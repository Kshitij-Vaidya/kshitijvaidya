"use strict";var oe=(l,f)=>()=>(f||l((f={exports:{}}).exports,f),f.exports);var $i=oe(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});var Zi=require("fs"),Qi=require("util"),Ki=require("path"),gc=Qi.promisify(Zi.readdir),mc=Qi.promisify(Zi.stat);async function yc(l,f){let d=new Set;return await Promise.all(l.map(async b=>{let y=await Ji(Ki.resolve(b),new RegExp(`\\.${f.map(F=>`(?:${F})`).join("|")}$`,"i"));for(let F of y)d.add(F)})),[...d]}zn.default=yc;async function Ji(l,f,d=10){if(d<=0)return[];let b;try{b=await gc(l)}catch{return[]}let y=[];return await Promise.all(b.map(async F=>{let O=Ki.join(l,F),S;try{S=await mc(O)}catch{return}S.isFile()&&f.test(O)?y.push(O):S.isDirectory()&&y.push(...await Ji(O,f,d-1))})),y}});var ts=oe((Vn,es)=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});var Gt=require("path"),Wn=require("os"),bc=$i(),xc={win32:()=>{let l=Gt.join(process.env.WINDIR||"C:\\Windows","Fonts"),f="Microsoft\\Windows\\Fonts",d;return process.env.LOCALAPPDATA?d=Gt.join(process.env.LOCALAPPDATA,f):process.env.APPDATA?d=Gt.join(process.env.APPDATA,"Local",f):process.env.USERPROFILE&&(d=Gt.join(process.env.USERPROFILE,"AppData","Local",f)),d?[l,d]:[l]},darwin:()=>{let l=Wn.homedir();return[...l?[Gt.join(l,"/Library/Fonts")]:[],"/Library/Fonts","/Network/Library/Fonts","/System/Library/Fonts","/System Folder/Fonts"]},linux:()=>{let l=Wn.homedir();return["/usr/share/fonts","/usr/local/share/fonts",...l?[Gt.join(l,".fonts"),Gt.join(l,".local/share/fonts")]:[]]}};function qn(l){let f=Object.assign({extensions:["ttf","otf","ttc","woff","woff2"],additionalFolders:[]},l),d=Wn.platform(),b=xc[d];if(!b)throw new Error(`Unsupported platform: ${d}`);let y=b();return bc.default([...y,...f.additionalFolders],f.extensions)}es.exports=Object.assign(qn,{default:qn});Vn.default=qn});var Xn=oe((nn,rs)=>{(function(l,f){typeof nn=="object"&&typeof rs<"u"?f(nn):typeof define=="function"&&define.amd?define(["exports"],f):(l=l||self,f(l.opentype={}))})(nn,function(l){"use strict";String.prototype.codePointAt||function(){var e=function(){try{var r={},n=Object.defineProperty,a=n(r,r,r)&&n}catch{}return a}(),t=function(r){if(this==null)throw TypeError();var n=String(this),a=n.length,i=r?Number(r):0;if(i!=i&&(i=0),!(i<0||i>=a)){var s=n.charCodeAt(i),u;return s>=55296&&s<=56319&&a>i+1&&(u=n.charCodeAt(i+1),u>=56320&&u<=57343)?(s-55296)*1024+u-56320+65536:s}};e?e(String.prototype,"codePointAt",{value:t,configurable:!0,writable:!0}):String.prototype.codePointAt=t}();var f=0,d=-3;function b(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function y(e,t){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new b,this.dtree=new b}var F=new b,O=new b,S=new Uint8Array(30),T=new Uint16Array(30),x=new Uint8Array(30),C=new Uint16Array(30),w=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),j=new b,Y=new Uint8Array(288+32);function U(e,t,r,n){var a,i;for(a=0;a<r;++a)e[a]=0;for(a=0;a<30-r;++a)e[a+r]=a/r|0;for(i=n,a=0;a<30;++a)t[a]=i,i+=1<<e[a]}function R(e,t){var r;for(r=0;r<7;++r)e.table[r]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,r=0;r<24;++r)e.trans[r]=256+r;for(r=0;r<144;++r)e.trans[24+r]=r;for(r=0;r<8;++r)e.trans[24+144+r]=280+r;for(r=0;r<112;++r)e.trans[24+144+8+r]=144+r;for(r=0;r<5;++r)t.table[r]=0;for(t.table[5]=32,r=0;r<32;++r)t.trans[r]=r}var H=new Uint16Array(16);function Z(e,t,r,n){var a,i;for(a=0;a<16;++a)e.table[a]=0;for(a=0;a<n;++a)e.table[t[r+a]]++;for(e.table[0]=0,i=0,a=0;a<16;++a)H[a]=i,i+=e.table[a];for(a=0;a<n;++a)t[r+a]&&(e.trans[H[t[r+a]]++]=a)}function ve(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var t=e.tag&1;return e.tag>>>=1,t}function Q(e,t,r){if(!t)return r;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var n=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,n+r}function le(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var r=0,n=0,a=0,i=e.tag;do n=2*n+(i&1),i>>>=1,++a,r+=t.table[a],n-=t.table[a];while(n>=0);return e.tag=i,e.bitcount-=a,t.trans[r+n]}function _e(e,t,r){var n,a,i,s,u,o;for(n=Q(e,5,257),a=Q(e,5,1),i=Q(e,4,4),s=0;s<19;++s)Y[s]=0;for(s=0;s<i;++s){var c=Q(e,3,0);Y[w[s]]=c}for(Z(j,Y,0,19),u=0;u<n+a;){var h=le(e,j);switch(h){case 16:var v=Y[u-1];for(o=Q(e,2,3);o;--o)Y[u++]=v;break;case 17:for(o=Q(e,3,3);o;--o)Y[u++]=0;break;case 18:for(o=Q(e,7,11);o;--o)Y[u++]=0;break;default:Y[u++]=h;break}}Z(t,Y,0,n),Z(r,Y,n,a)}function ne(e,t,r){for(;;){var n=le(e,t);if(n===256)return f;if(n<256)e.dest[e.destLen++]=n;else{var a,i,s,u;for(n-=257,a=Q(e,S[n],T[n]),i=le(e,r),s=e.destLen-Q(e,x[i],C[i]),u=s;u<s+a;++u)e.dest[e.destLen++]=e.dest[u]}}}function ee(e){for(var t,r,n;e.bitcount>8;)e.sourceIndex--,e.bitcount-=8;if(t=e.source[e.sourceIndex+1],t=256*t+e.source[e.sourceIndex],r=e.source[e.sourceIndex+3],r=256*r+e.source[e.sourceIndex+2],t!==(~r&65535))return d;for(e.sourceIndex+=4,n=t;n;--n)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,f}function me(e,t){var r=new y(e,t),n,a,i;do{switch(n=ve(r),a=Q(r,2,0),a){case 0:i=ee(r);break;case 1:i=ne(r,F,O);break;case 2:_e(r,r.ltree,r.dtree),i=ne(r,r.ltree,r.dtree);break;default:i=d}if(i!==f)throw new Error("Data error")}while(!n);return r.destLen<r.dest.length?typeof r.dest.slice=="function"?r.dest.slice(0,r.destLen):r.dest.subarray(0,r.destLen):r.dest}R(F,O),U(S,T,4,3),U(x,C,2,1),S[28]=0,T[28]=258;var Ge=me;function ye(e,t,r,n,a){return Math.pow(1-a,3)*e+3*Math.pow(1-a,2)*a*t+3*(1-a)*Math.pow(a,2)*r+Math.pow(a,3)*n}function Qe(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}Qe.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},Qe.prototype.addPoint=function(e,t){typeof e=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),typeof t=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))},Qe.prototype.addX=function(e){this.addPoint(e,null)},Qe.prototype.addY=function(e){this.addPoint(null,e)},Qe.prototype.addBezier=function(e,t,r,n,a,i,s,u){var o=[e,t],c=[r,n],h=[a,i],v=[s,u];this.addPoint(e,t),this.addPoint(s,u);for(var p=0;p<=1;p++){var g=6*o[p]-12*c[p]+6*h[p],k=-3*o[p]+9*c[p]-9*h[p]+3*v[p],D=3*c[p]-3*o[p];if(k===0){if(g===0)continue;var E=-D/g;0<E&&E<1&&(p===0&&this.addX(ye(o[p],c[p],h[p],v[p],E)),p===1&&this.addY(ye(o[p],c[p],h[p],v[p],E)));continue}var L=Math.pow(g,2)-4*D*k;if(!(L<0)){var W=(-g+Math.sqrt(L))/(2*k);0<W&&W<1&&(p===0&&this.addX(ye(o[p],c[p],h[p],v[p],W)),p===1&&this.addY(ye(o[p],c[p],h[p],v[p],W)));var I=(-g-Math.sqrt(L))/(2*k);0<I&&I<1&&(p===0&&this.addX(ye(o[p],c[p],h[p],v[p],I)),p===1&&this.addY(ye(o[p],c[p],h[p],v[p],I)))}}},Qe.prototype.addQuad=function(e,t,r,n,a,i){var s=e+.6666666666666666*(r-e),u=t+2/3*(n-t),o=s+1/3*(a-e),c=u+1/3*(i-t);this.addBezier(e,t,s,u,o,c,a,i)};function he(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}he.prototype.moveTo=function(e,t){this.commands.push({type:"M",x:e,y:t})},he.prototype.lineTo=function(e,t){this.commands.push({type:"L",x:e,y:t})},he.prototype.curveTo=he.prototype.bezierCurveTo=function(e,t,r,n,a,i){this.commands.push({type:"C",x1:e,y1:t,x2:r,y2:n,x:a,y:i})},he.prototype.quadTo=he.prototype.quadraticCurveTo=function(e,t,r,n){this.commands.push({type:"Q",x1:e,y1:t,x:r,y:n})},he.prototype.close=he.prototype.closePath=function(){this.commands.push({type:"Z"})},he.prototype.extend=function(e){if(e.commands)e=e.commands;else if(e instanceof Qe){var t=e;this.moveTo(t.x1,t.y1),this.lineTo(t.x2,t.y1),this.lineTo(t.x2,t.y2),this.lineTo(t.x1,t.y2),this.close();return}Array.prototype.push.apply(this.commands,e)},he.prototype.getBoundingBox=function(){for(var e=new Qe,t=0,r=0,n=0,a=0,i=0;i<this.commands.length;i++){var s=this.commands[i];switch(s.type){case"M":e.addPoint(s.x,s.y),t=n=s.x,r=a=s.y;break;case"L":e.addPoint(s.x,s.y),n=s.x,a=s.y;break;case"Q":e.addQuad(n,a,s.x1,s.y1,s.x,s.y),n=s.x,a=s.y;break;case"C":e.addBezier(n,a,s.x1,s.y1,s.x2,s.y2,s.x,s.y),n=s.x,a=s.y;break;case"Z":n=t,a=r;break;default:throw new Error("Unexpected path command "+s.type)}}return e.isEmpty()&&e.addPoint(0,0),e},he.prototype.draw=function(e){e.beginPath();for(var t=0;t<this.commands.length;t+=1){var r=this.commands[t];r.type==="M"?e.moveTo(r.x,r.y):r.type==="L"?e.lineTo(r.x,r.y):r.type==="C"?e.bezierCurveTo(r.x1,r.y1,r.x2,r.y2,r.x,r.y):r.type==="Q"?e.quadraticCurveTo(r.x1,r.y1,r.x,r.y):r.type==="Z"&&e.closePath()}this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke())},he.prototype.toPathData=function(e){e=e!==void 0?e:2;function t(s){return Math.round(s)===s?""+Math.round(s):s.toFixed(e)}function r(){for(var s=arguments,u="",o=0;o<arguments.length;o+=1){var c=s[o];c>=0&&o>0&&(u+=" "),u+=t(c)}return u}for(var n="",a=0;a<this.commands.length;a+=1){var i=this.commands[a];i.type==="M"?n+="M"+r(i.x,i.y):i.type==="L"?n+="L"+r(i.x,i.y):i.type==="C"?n+="C"+r(i.x1,i.y1,i.x2,i.y2,i.x,i.y):i.type==="Q"?n+="Q"+r(i.x1,i.y1,i.x,i.y):i.type==="Z"&&(n+="Z")}return n},he.prototype.toSVG=function(e){var t='<path d="';return t+=this.toPathData(e),t+='"',this.fill&&this.fill!=="black"&&(this.fill===null?t+=' fill="none"':t+=' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),t+="/>",t},he.prototype.toDOMElement=function(e){var t=this.toPathData(e),r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",t),r};function pr(e){throw new Error(e)}function Fa(e,t){e||pr(t)}var G={fail:pr,argument:Fa,assert:Fa},wa=32768,Ca=2147483648,er={},P={},z={};function nt(e){return function(){return e}}P.BYTE=function(e){return G.argument(e>=0&&e<=255,"Byte value should be between 0 and 255."),[e]},z.BYTE=nt(1),P.CHAR=function(e){return[e.charCodeAt(0)]},z.CHAR=nt(1),P.CHARARRAY=function(e){typeof e>"u"&&(e="",console.warn("Undefined CHARARRAY encountered and treated as an empty string. This is probably caused by a missing glyph name."));for(var t=[],r=0;r<e.length;r+=1)t[r]=e.charCodeAt(r);return t},z.CHARARRAY=function(e){return typeof e>"u"?0:e.length},P.USHORT=function(e){return[e>>8&255,e&255]},z.USHORT=nt(2),P.SHORT=function(e){return e>=wa&&(e=-(2*wa-e)),[e>>8&255,e&255]},z.SHORT=nt(2),P.UINT24=function(e){return[e>>16&255,e>>8&255,e&255]},z.UINT24=nt(3),P.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,e&255]},z.ULONG=nt(4),P.LONG=function(e){return e>=Ca&&(e=-(2*Ca-e)),[e>>24&255,e>>16&255,e>>8&255,e&255]},z.LONG=nt(4),P.FIXED=P.ULONG,z.FIXED=z.ULONG,P.FWORD=P.SHORT,z.FWORD=z.SHORT,P.UFWORD=P.USHORT,z.UFWORD=z.USHORT,P.LONGDATETIME=function(e){return[0,0,0,0,e>>24&255,e>>16&255,e>>8&255,e&255]},z.LONGDATETIME=nt(8),P.TAG=function(e){return G.argument(e.length===4,"Tag should be exactly 4 ASCII characters."),[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]},z.TAG=nt(4),P.Card8=P.BYTE,z.Card8=z.BYTE,P.Card16=P.USHORT,z.Card16=z.USHORT,P.OffSize=P.BYTE,z.OffSize=z.BYTE,P.SID=P.USHORT,z.SID=z.USHORT,P.NUMBER=function(e){return e>=-107&&e<=107?[e+139]:e>=108&&e<=1131?(e=e-108,[(e>>8)+247,e&255]):e>=-1131&&e<=-108?(e=-e-108,[(e>>8)+251,e&255]):e>=-32768&&e<=32767?P.NUMBER16(e):P.NUMBER32(e)},z.NUMBER=function(e){return P.NUMBER(e).length},P.NUMBER16=function(e){return[28,e>>8&255,e&255]},z.NUMBER16=nt(3),P.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,e&255]},z.NUMBER32=nt(5),P.REAL=function(e){var t=e.toString(),r=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t);if(r){var n=parseFloat("1e"+((r[2]?+r[2]:0)+r[1].length));t=(Math.round(e*n)/n).toString()}for(var a="",i=0,s=t.length;i<s;i+=1){var u=t[i];u==="e"?a+=t[++i]==="-"?"c":"b":u==="."?a+="a":u==="-"?a+="e":a+=u}a+=a.length&1?"f":"ff";for(var o=[30],c=0,h=a.length;c<h;c+=2)o.push(parseInt(a.substr(c,2),16));return o},z.REAL=function(e){return P.REAL(e).length},P.NAME=P.CHARARRAY,z.NAME=z.CHARARRAY,P.STRING=P.CHARARRAY,z.STRING=z.CHARARRAY,er.UTF8=function(e,t,r){for(var n=[],a=r,i=0;i<a;i++,t+=1)n[i]=e.getUint8(t);return String.fromCharCode.apply(null,n)},er.UTF16=function(e,t,r){for(var n=[],a=r/2,i=0;i<a;i++,t+=2)n[i]=e.getUint16(t);return String.fromCharCode.apply(null,n)},P.UTF16=function(e){for(var t=[],r=0;r<e.length;r+=1){var n=e.charCodeAt(r);t[t.length]=n>>8&255,t[t.length]=n&255}return t},z.UTF16=function(e){return e.length*2};var gn={"x-mac-croatian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\u0160\u2122\xB4\xA8\u2260\u017D\xD8\u221E\xB1\u2264\u2265\u2206\xB5\u2202\u2211\u220F\u0161\u222B\xAA\xBA\u03A9\u017E\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u0106\xAB\u010C\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u0110\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\uF8FF\xA9\u2044\u20AC\u2039\u203A\xC6\xBB\u2013\xB7\u201A\u201E\u2030\xC2\u0107\xC1\u010D\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u0111\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u03C0\xCB\u02DA\xB8\xCA\xE6\u02C7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041A\u041B\u041C\u041D\u041E\u041F\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042A\u042B\u042C\u042D\u042E\u042F\u2020\xB0\u0490\xA3\xA7\u2022\xB6\u0406\xAE\xA9\u2122\u0402\u0452\u2260\u0403\u0453\u221E\xB1\u2264\u2265\u0456\xB5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040A\u045A\u0458\u0405\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\u040B\u045B\u040C\u045C\u0455\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u201E\u040E\u045E\u040F\u045F\u2116\u0401\u0451\u044F\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043A\u043B\u043C\u043D\u043E\u043F\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044A\u044B\u044C\u044D\u044E","x-mac-gaelic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u1E02\xB1\u2264\u2265\u1E03\u010A\u010B\u1E0A\u1E0B\u1E1E\u1E1F\u0120\u0121\u1E40\xE6\xF8\u1E41\u1E56\u1E57\u027C\u0192\u017F\u1E60\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\u1E61\u1E9B\xFF\u0178\u1E6A\u20AC\u2039\u203A\u0176\u0177\u1E6B\xB7\u1EF2\u1EF3\u204A\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u2663\xD2\xDA\xDB\xD9\u0131\xDD\xFD\u0174\u0175\u1E84\u1E85\u1E80\u1E81\u1E82\u1E83","x-mac-greek":"\xC4\xB9\xB2\xC9\xB3\xD6\xDC\u0385\xE0\xE2\xE4\u0384\xA8\xE7\xE9\xE8\xEA\xEB\xA3\u2122\xEE\xEF\u2022\xBD\u2030\xF4\xF6\xA6\u20AC\xF9\xFB\xFC\u2020\u0393\u0394\u0398\u039B\u039E\u03A0\xDF\xAE\xA9\u03A3\u03AA\xA7\u2260\xB0\xB7\u0391\xB1\u2264\u2265\xA5\u0392\u0395\u0396\u0397\u0399\u039A\u039C\u03A6\u03AB\u03A8\u03A9\u03AC\u039D\xAC\u039F\u03A1\u2248\u03A4\xAB\xBB\u2026\xA0\u03A5\u03A7\u0386\u0388\u0153\u2013\u2015\u201C\u201D\u2018\u2019\xF7\u0389\u038A\u038C\u038E\u03AD\u03AE\u03AF\u03CC\u038F\u03CD\u03B1\u03B2\u03C8\u03B4\u03B5\u03C6\u03B3\u03B7\u03B9\u03BE\u03BA\u03BB\u03BC\u03BD\u03BF\u03C0\u03CE\u03C1\u03C3\u03C4\u03B8\u03C9\u03C2\u03C7\u03C5\u03B6\u03CA\u03CB\u0390\u03B0\xAD","x-mac-icelandic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\xDD\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\xD0\xF0\xDE\xFE\xFD\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140A\u140B\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144E\u144F\u1450\u1451\u1455\u1456\u1466\u146D\u146E\u146F\u1470\u1472\u1473\u1483\u148B\u148C\u148D\u148E\u1490\u1491\xB0\u14A1\u14A5\u14A6\u2022\xB6\u14A7\xAE\xA9\u2122\u14A8\u14AA\u14AB\u14BB\u14C2\u14C3\u14C4\u14C5\u14C7\u14C8\u14D0\u14EF\u14F0\u14F1\u14F2\u14F4\u14F5\u1505\u14D5\u14D6\u14D7\u14D8\u14DA\u14DB\u14EA\u1528\u1529\u152A\u152B\u152D\u2026\xA0\u152E\u153E\u1555\u1556\u1557\u2013\u2014\u201C\u201D\u2018\u2019\u1558\u1559\u155A\u155D\u1546\u1547\u1548\u1549\u154B\u154C\u1550\u157F\u1580\u1581\u1582\u1583\u1584\u1585\u158F\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15A0\u15A1\u15A2\u15A3\u15A4\u15A5\u15A6\u157C\u0141\u0142","x-mac-ce":"\xC4\u0100\u0101\xC9\u0104\xD6\xDC\xE1\u0105\u010C\xE4\u010D\u0106\u0107\xE9\u0179\u017A\u010E\xED\u010F\u0112\u0113\u0116\xF3\u0117\xF4\xF6\xF5\xFA\u011A\u011B\xFC\u2020\xB0\u0118\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\u0119\xA8\u2260\u0123\u012E\u012F\u012A\u2264\u2265\u012B\u0136\u2202\u2211\u0142\u013B\u013C\u013D\u013E\u0139\u013A\u0145\u0146\u0143\xAC\u221A\u0144\u0147\u2206\xAB\xBB\u2026\xA0\u0148\u0150\xD5\u0151\u014C\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\u014D\u0154\u0155\u0158\u2039\u203A\u0159\u0156\u0157\u0160\u201A\u201E\u0161\u015A\u015B\xC1\u0164\u0165\xCD\u017D\u017E\u016A\xD3\xD4\u016B\u016E\xDA\u016F\u0170\u0171\u0172\u0173\xDD\xFD\u0137\u017B\u0141\u017C\u0122\u02C7",macintosh:"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\uFB01\uFB02\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-romanian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\u0102\u0218\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\u0103\u0219\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\u021A\u021B\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-turkish":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u011E\u011F\u0130\u0131\u015E\u015F\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\uF8A0\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7"};er.MACSTRING=function(e,t,r,n){var a=gn[n];if(a!==void 0){for(var i="",s=0;s<r;s++){var u=e.getUint8(t+s);u<=127?i+=String.fromCharCode(u):i+=a[u&127]}return i}};var Gr=typeof WeakMap=="function"&&new WeakMap,Hr,ro=function(e){if(!Hr){Hr={};for(var t in gn)Hr[t]=new String(t)}var r=Hr[e];if(r!==void 0){if(Gr){var n=Gr.get(r);if(n!==void 0)return n}var a=gn[e];if(a!==void 0){for(var i={},s=0;s<a.length;s++)i[a.charCodeAt(s)]=s+128;return Gr&&Gr.set(r,i),i}}};P.MACSTRING=function(e,t){var r=ro(t);if(r!==void 0){for(var n=[],a=0;a<e.length;a++){var i=e.charCodeAt(a);if(i>=128&&(i=r[i],i===void 0))return;n[a]=i}return n}},z.MACSTRING=function(e,t){var r=P.MACSTRING(e,t);return r!==void 0?r.length:0};function mn(e){return e>=-128&&e<=127}function no(e,t,r){for(var n=0,a=e.length;t<a&&n<64&&e[t]===0;)++t,++n;return r.push(128|n-1),t}function ao(e,t,r){for(var n=0,a=e.length,i=t;i<a&&n<64;){var s=e[i];if(!mn(s)||s===0&&i+1<a&&e[i+1]===0)break;++i,++n}r.push(n-1);for(var u=t;u<i;++u)r.push(e[u]+256&255);return i}function io(e,t,r){for(var n=0,a=e.length,i=t;i<a&&n<64;){var s=e[i];if(s===0||mn(s)&&i+1<a&&mn(e[i+1]))break;++i,++n}r.push(64|n-1);for(var u=t;u<i;++u){var o=e[u];r.push(o+65536>>8&255,o+256&255)}return i}P.VARDELTAS=function(e){for(var t=0,r=[];t<e.length;){var n=e[t];n===0?t=no(e,t,r):n>=-128&&n<=127?t=ao(e,t,r):t=io(e,t,r)}return r},P.INDEX=function(e){for(var t=1,r=[t],n=[],a=0;a<e.length;a+=1){var i=P.OBJECT(e[a]);Array.prototype.push.apply(n,i),t+=i.length,r.push(t)}if(n.length===0)return[0,0];for(var s=[],u=1+Math.floor(Math.log(t)/Math.log(2))/8|0,o=[void 0,P.BYTE,P.USHORT,P.UINT24,P.ULONG][u],c=0;c<r.length;c+=1){var h=o(r[c]);Array.prototype.push.apply(s,h)}return Array.prototype.concat(P.Card16(e.length),P.OffSize(u),s,n)},z.INDEX=function(e){return P.INDEX(e).length},P.DICT=function(e){for(var t=[],r=Object.keys(e),n=r.length,a=0;a<n;a+=1){var i=parseInt(r[a],0),s=e[i];t=t.concat(P.OPERAND(s.value,s.type)),t=t.concat(P.OPERATOR(i))}return t},z.DICT=function(e){return P.DICT(e).length},P.OPERATOR=function(e){return e<1200?[e]:[12,e-1200]},P.OPERAND=function(e,t){var r=[];if(Array.isArray(t))for(var n=0;n<t.length;n+=1)G.argument(e.length===t.length,"Not enough arguments given for type"+t),r=r.concat(P.OPERAND(e[n],t[n]));else if(t==="SID")r=r.concat(P.NUMBER(e));else if(t==="offset")r=r.concat(P.NUMBER32(e));else if(t==="number")r=r.concat(P.NUMBER(e));else if(t==="real")r=r.concat(P.REAL(e));else throw new Error("Unknown operand type "+t);return r},P.OP=P.BYTE,z.OP=z.BYTE;var zr=typeof WeakMap=="function"&&new WeakMap;P.CHARSTRING=function(e){if(zr){var t=zr.get(e);if(t!==void 0)return t}for(var r=[],n=e.length,a=0;a<n;a+=1){var i=e[a];r=r.concat(P[i.type](i.value))}return zr&&zr.set(e,r),r},z.CHARSTRING=function(e){return P.CHARSTRING(e).length},P.OBJECT=function(e){var t=P[e.type];return G.argument(t!==void 0,"No encoding function for type "+e.type),t(e.value)},z.OBJECT=function(e){var t=z[e.type];return G.argument(t!==void 0,"No sizeOf function for type "+e.type),t(e.value)},P.TABLE=function(e){for(var t=[],r=e.fields.length,n=[],a=[],i=0;i<r;i+=1){var s=e.fields[i],u=P[s.type];G.argument(u!==void 0,"No encoding function for field type "+s.type+" ("+s.name+")");var o=e[s.name];o===void 0&&(o=s.value);var c=u(o);s.type==="TABLE"?(a.push(t.length),t=t.concat([0,0]),n.push(c)):t=t.concat(c)}for(var h=0;h<n.length;h+=1){var v=a[h],p=t.length;G.argument(p<65536,"Table "+e.tableName+" too big."),t[v]=p>>8,t[v+1]=p&255,t=t.concat(n[h])}return t},z.TABLE=function(e){for(var t=0,r=e.fields.length,n=0;n<r;n+=1){var a=e.fields[n],i=z[a.type];G.argument(i!==void 0,"No sizeOf function for field type "+a.type+" ("+a.name+")");var s=e[a.name];s===void 0&&(s=a.value),t+=i(s),a.type==="TABLE"&&(t+=2)}return t},P.RECORD=P.TABLE,z.RECORD=z.TABLE,P.LITERAL=function(e){return e},z.LITERAL=function(e){return e.length};function Te(e,t,r){if(t.length&&(t[0].name!=="coverageFormat"||t[0].value===1))for(var n=0;n<t.length;n+=1){var a=t[n];this[a.name]=a.value}if(this.tableName=e,this.fields=t,r)for(var i=Object.keys(r),s=0;s<i.length;s+=1){var u=i[s],o=r[u];this[u]!==void 0&&(this[u]=o)}}Te.prototype.encode=function(){return P.TABLE(this)},Te.prototype.sizeOf=function(){return z.TABLE(this)};function dr(e,t,r){r===void 0&&(r=t.length);var n=new Array(t.length+1);n[0]={name:e+"Count",type:"USHORT",value:r};for(var a=0;a<t.length;a++)n[a+1]={name:e+a,type:"USHORT",value:t[a]};return n}function yn(e,t,r){var n=t.length,a=new Array(n+1);a[0]={name:e+"Count",type:"USHORT",value:n};for(var i=0;i<n;i++)a[i+1]={name:e+i,type:"TABLE",value:r(t[i],i)};return a}function vr(e,t,r){var n=t.length,a=[];a[0]={name:e+"Count",type:"USHORT",value:n};for(var i=0;i<n;i++)a=a.concat(r(t[i],i));return a}function Wr(e){e.format===1?Te.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(dr("glyph",e.glyphs))):e.format===2?Te.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:2}].concat(vr("rangeRecord",e.ranges,function(t){return[{name:"startGlyphID",type:"USHORT",value:t.start},{name:"endGlyphID",type:"USHORT",value:t.end},{name:"startCoverageIndex",type:"USHORT",value:t.index}]}))):G.assert(!1,"Coverage format must be 1 or 2.")}Wr.prototype=Object.create(Te.prototype),Wr.prototype.constructor=Wr;function qr(e){Te.call(this,"scriptListTable",vr("scriptRecord",e,function(t,r){var n=t.script,a=n.defaultLangSys;return G.assert(!!a,"Unable to write GSUB: script "+t.tag+" has no default language system."),[{name:"scriptTag"+r,type:"TAG",value:t.tag},{name:"script"+r,type:"TABLE",value:new Te("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new Te("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:a.reqFeatureIndex}].concat(dr("featureIndex",a.featureIndexes)))}].concat(vr("langSys",n.langSysRecords,function(i,s){var u=i.langSys;return[{name:"langSysTag"+s,type:"TAG",value:i.tag},{name:"langSys"+s,type:"TABLE",value:new Te("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:u.reqFeatureIndex}].concat(dr("featureIndex",u.featureIndexes)))}]})))}]}))}qr.prototype=Object.create(Te.prototype),qr.prototype.constructor=qr;function Vr(e){Te.call(this,"featureListTable",vr("featureRecord",e,function(t,r){var n=t.feature;return[{name:"featureTag"+r,type:"TAG",value:t.tag},{name:"feature"+r,type:"TABLE",value:new Te("featureTable",[{name:"featureParams",type:"USHORT",value:n.featureParams}].concat(dr("lookupListIndex",n.lookupListIndexes)))}]}))}Vr.prototype=Object.create(Te.prototype),Vr.prototype.constructor=Vr;function Xr(e,t){Te.call(this,"lookupListTable",yn("lookup",e,function(r){var n=t[r.lookupType];return G.assert(!!n,"Unable to write GSUB lookup type "+r.lookupType+" tables."),new Te("lookupTable",[{name:"lookupType",type:"USHORT",value:r.lookupType},{name:"lookupFlag",type:"USHORT",value:r.lookupFlag}].concat(yn("subtable",r.subtables,n)))}))}Xr.prototype=Object.create(Te.prototype),Xr.prototype.constructor=Xr;var M={Table:Te,Record:Te,Coverage:Wr,ScriptList:qr,FeatureList:Vr,LookupList:Xr,ushortList:dr,tableList:yn,recordList:vr};function Ua(e,t){return e.getUint8(t)}function jr(e,t){return e.getUint16(t,!1)}function so(e,t){return e.getInt16(t,!1)}function bn(e,t){return e.getUint32(t,!1)}function Oa(e,t){var r=e.getInt16(t,!1),n=e.getUint16(t+2,!1);return r+n/65535}function oo(e,t){for(var r="",n=t;n<t+4;n+=1)r+=String.fromCharCode(e.getInt8(n));return r}function uo(e,t,r){for(var n=0,a=0;a<r;a+=1)n<<=8,n+=e.getUint8(t+a);return n}function lo(e,t,r){for(var n=[],a=t;a<r;a+=1)n.push(e.getUint8(a));return n}function fo(e){for(var t="",r=0;r<e.length;r+=1)t+=String.fromCharCode(e[r]);return t}var co={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function m(e,t){this.data=e,this.offset=t,this.relativeOffset=0}m.prototype.parseByte=function(){var e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},m.prototype.parseChar=function(){var e=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},m.prototype.parseCard8=m.prototype.parseByte,m.prototype.parseUShort=function(){var e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},m.prototype.parseCard16=m.prototype.parseUShort,m.prototype.parseSID=m.prototype.parseUShort,m.prototype.parseOffset16=m.prototype.parseUShort,m.prototype.parseShort=function(){var e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},m.prototype.parseF2Dot14=function(){var e=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,e},m.prototype.parseULong=function(){var e=bn(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},m.prototype.parseOffset32=m.prototype.parseULong,m.prototype.parseFixed=function(){var e=Oa(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},m.prototype.parseString=function(e){var t=this.data,r=this.offset+this.relativeOffset,n="";this.relativeOffset+=e;for(var a=0;a<e;a++)n+=String.fromCharCode(t.getUint8(r+a));return n},m.prototype.parseTag=function(){return this.parseString(4)},m.prototype.parseLongDateTime=function(){var e=bn(this.data,this.offset+this.relativeOffset+4);return e-=2082844800,this.relativeOffset+=8,e},m.prototype.parseVersion=function(e){var t=jr(this.data,this.offset+this.relativeOffset),r=jr(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,e===void 0&&(e=4096),t+r/e/10},m.prototype.skip=function(e,t){t===void 0&&(t=1),this.relativeOffset+=co[e]*t},m.prototype.parseULongList=function(e){e===void 0&&(e=this.parseULong());for(var t=new Array(e),r=this.data,n=this.offset+this.relativeOffset,a=0;a<e;a++)t[a]=r.getUint32(n),n+=4;return this.relativeOffset+=e*4,t},m.prototype.parseOffset16List=m.prototype.parseUShortList=function(e){e===void 0&&(e=this.parseUShort());for(var t=new Array(e),r=this.data,n=this.offset+this.relativeOffset,a=0;a<e;a++)t[a]=r.getUint16(n),n+=2;return this.relativeOffset+=e*2,t},m.prototype.parseShortList=function(e){for(var t=new Array(e),r=this.data,n=this.offset+this.relativeOffset,a=0;a<e;a++)t[a]=r.getInt16(n),n+=2;return this.relativeOffset+=e*2,t},m.prototype.parseByteList=function(e){for(var t=new Array(e),r=this.data,n=this.offset+this.relativeOffset,a=0;a<e;a++)t[a]=r.getUint8(n++);return this.relativeOffset+=e,t},m.prototype.parseList=function(e,t){t||(t=e,e=this.parseUShort());for(var r=new Array(e),n=0;n<e;n++)r[n]=t.call(this);return r},m.prototype.parseList32=function(e,t){t||(t=e,e=this.parseULong());for(var r=new Array(e),n=0;n<e;n++)r[n]=t.call(this);return r},m.prototype.parseRecordList=function(e,t){t||(t=e,e=this.parseUShort());for(var r=new Array(e),n=Object.keys(t),a=0;a<e;a++){for(var i={},s=0;s<n.length;s++){var u=n[s],o=t[u];i[u]=o.call(this)}r[a]=i}return r},m.prototype.parseRecordList32=function(e,t){t||(t=e,e=this.parseULong());for(var r=new Array(e),n=Object.keys(t),a=0;a<e;a++){for(var i={},s=0;s<n.length;s++){var u=n[s],o=t[u];i[u]=o.call(this)}r[a]=i}return r},m.prototype.parseStruct=function(e){if(typeof e=="function")return e.call(this);for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var a=t[n],i=e[a];r[a]=i.call(this)}return r},m.prototype.parseValueRecord=function(e){if(e===void 0&&(e=this.parseUShort()),e!==0){var t={};return e&1&&(t.xPlacement=this.parseShort()),e&2&&(t.yPlacement=this.parseShort()),e&4&&(t.xAdvance=this.parseShort()),e&8&&(t.yAdvance=this.parseShort()),e&16&&(t.xPlaDevice=void 0,this.parseShort()),e&32&&(t.yPlaDevice=void 0,this.parseShort()),e&64&&(t.xAdvDevice=void 0,this.parseShort()),e&128&&(t.yAdvDevice=void 0,this.parseShort()),t}},m.prototype.parseValueRecordList=function(){for(var e=this.parseUShort(),t=this.parseUShort(),r=new Array(t),n=0;n<t;n++)r[n]=this.parseValueRecord(e);return r},m.prototype.parsePointer=function(e){var t=this.parseOffset16();if(t>0)return new m(this.data,this.offset+t).parseStruct(e)},m.prototype.parsePointer32=function(e){var t=this.parseOffset32();if(t>0)return new m(this.data,this.offset+t).parseStruct(e)},m.prototype.parseListOfLists=function(e){for(var t=this.parseOffset16List(),r=t.length,n=this.relativeOffset,a=new Array(r),i=0;i<r;i++){var s=t[i];if(s===0){a[i]=void 0;continue}if(this.relativeOffset=s,e){for(var u=this.parseOffset16List(),o=new Array(u.length),c=0;c<u.length;c++)this.relativeOffset=s+u[c],o[c]=e.call(this);a[i]=o}else a[i]=this.parseUShortList()}return this.relativeOffset=n,a},m.prototype.parseCoverage=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort(),r=this.parseUShort();if(t===1)return{format:1,glyphs:this.parseUShortList(r)};if(t===2){for(var n=new Array(r),a=0;a<r;a++)n[a]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:n}}throw new Error("0x"+e.toString(16)+": Coverage format must be 1 or 2.")},m.prototype.parseClassDef=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(t===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(t===2)return{format:2,ranges:this.parseRecordList({start:m.uShort,end:m.uShort,classId:m.uShort})};throw new Error("0x"+e.toString(16)+": ClassDef format must be 1 or 2.")},m.list=function(e,t){return function(){return this.parseList(e,t)}},m.list32=function(e,t){return function(){return this.parseList32(e,t)}},m.recordList=function(e,t){return function(){return this.parseRecordList(e,t)}},m.recordList32=function(e,t){return function(){return this.parseRecordList32(e,t)}},m.pointer=function(e){return function(){return this.parsePointer(e)}},m.pointer32=function(e){return function(){return this.parsePointer32(e)}},m.tag=m.prototype.parseTag,m.byte=m.prototype.parseByte,m.uShort=m.offset16=m.prototype.parseUShort,m.uShortList=m.prototype.parseUShortList,m.uLong=m.offset32=m.prototype.parseULong,m.uLongList=m.prototype.parseULongList,m.struct=m.prototype.parseStruct,m.coverage=m.prototype.parseCoverage,m.classDef=m.prototype.parseClassDef;var Pa={reserved:m.uShort,reqFeatureIndex:m.uShort,featureIndexes:m.uShortList};m.prototype.parseScriptList=function(){return this.parsePointer(m.recordList({tag:m.tag,script:m.pointer({defaultLangSys:m.pointer(Pa),langSysRecords:m.recordList({tag:m.tag,langSys:m.pointer(Pa)})})}))||[]},m.prototype.parseFeatureList=function(){return this.parsePointer(m.recordList({tag:m.tag,feature:m.pointer({featureParams:m.offset16,lookupListIndexes:m.uShortList})}))||[]},m.prototype.parseLookupList=function(e){return this.parsePointer(m.list(m.pointer(function(){var t=this.parseUShort();G.argument(1<=t&&t<=9,"GPOS/GSUB lookup type "+t+" unknown.");var r=this.parseUShort(),n=r&16;return{lookupType:t,lookupFlag:r,subtables:this.parseList(m.pointer(e[t])),markFilteringSet:n?this.parseUShort():void 0}})))||[]},m.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var e=this.parseUShort(),t=this.parseUShort();G.argument(e===1&&t<1,"GPOS/GSUB feature variations table unknown.");var r=this.parseRecordList32({conditionSetOffset:m.offset32,featureTableSubstitutionOffset:m.offset32});return r})||[]};var A={getByte:Ua,getCard8:Ua,getUShort:jr,getCard16:jr,getShort:so,getULong:bn,getFixed:Oa,getTag:oo,getOffset:uo,getBytes:lo,bytesToString:fo,Parser:m};function ho(e,t){t.parseUShort(),e.length=t.parseULong(),e.language=t.parseULong();var r;e.groupCount=r=t.parseULong(),e.glyphIndexMap={};for(var n=0;n<r;n+=1)for(var a=t.parseULong(),i=t.parseULong(),s=t.parseULong(),u=a;u<=i;u+=1)e.glyphIndexMap[u]=s,s++}function po(e,t,r,n,a){e.length=t.parseUShort(),e.language=t.parseUShort();var i;e.segCount=i=t.parseUShort()>>1,t.skip("uShort",3),e.glyphIndexMap={};for(var s=new A.Parser(r,n+a+14),u=new A.Parser(r,n+a+16+i*2),o=new A.Parser(r,n+a+16+i*4),c=new A.Parser(r,n+a+16+i*6),h=n+a+16+i*8,v=0;v<i-1;v+=1)for(var p=void 0,g=s.parseUShort(),k=u.parseUShort(),D=o.parseShort(),E=c.parseUShort(),L=k;L<=g;L+=1)E!==0?(h=c.offset+c.relativeOffset-2,h+=E,h+=(L-k)*2,p=A.getUShort(r,h),p!==0&&(p=p+D&65535)):p=L+D&65535,e.glyphIndexMap[L]=p}function vo(e,t){var r={};r.version=A.getUShort(e,t),G.argument(r.version===0,"cmap table version should be 0."),r.numTables=A.getUShort(e,t+2);for(var n=-1,a=r.numTables-1;a>=0;a-=1){var i=A.getUShort(e,t+4+a*8),s=A.getUShort(e,t+4+a*8+2);if(i===3&&(s===0||s===1||s===10)||i===0&&(s===0||s===1||s===2||s===3||s===4)){n=A.getULong(e,t+4+a*8+4);break}}if(n===-1)throw new Error("No valid cmap sub-tables found.");var u=new A.Parser(e,t+n);if(r.format=u.parseUShort(),r.format===12)ho(r,u);else if(r.format===4)po(r,u,e,t,n);else throw new Error("Only format 4 and 12 cmap tables are supported (found format "+r.format+").");return r}function go(e,t,r){e.segments.push({end:t,start:t,delta:-(t-r),offset:0,glyphIndex:r})}function mo(e){e.segments.push({end:65535,start:65535,delta:1,offset:0})}function yo(e){var t=!0,r;for(r=e.length-1;r>0;r-=1){var n=e.get(r);if(n.unicode>65535){console.log("Adding CMAP format 12 (needed!)"),t=!1;break}}var a=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:t?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:t?12:12+8}];t||(a=a.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),a=a.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var i=new M.Table("cmap",a);for(i.segments=[],r=0;r<e.length;r+=1){for(var s=e.get(r),u=0;u<s.unicodes.length;u+=1)go(i,s.unicodes[u],r);i.segments=i.segments.sort(function(W,I){return W.start-I.start})}mo(i);var o=i.segments.length,c=0,h=[],v=[],p=[],g=[],k=[],D=[];for(r=0;r<o;r+=1){var E=i.segments[r];E.end<=65535&&E.start<=65535?(h=h.concat({name:"end_"+r,type:"USHORT",value:E.end}),v=v.concat({name:"start_"+r,type:"USHORT",value:E.start}),p=p.concat({name:"idDelta_"+r,type:"SHORT",value:E.delta}),g=g.concat({name:"idRangeOffset_"+r,type:"USHORT",value:E.offset}),E.glyphId!==void 0&&(k=k.concat({name:"glyph_"+r,type:"USHORT",value:E.glyphId}))):c+=1,!t&&E.glyphIndex!==void 0&&(D=D.concat({name:"cmap12Start_"+r,type:"ULONG",value:E.start}),D=D.concat({name:"cmap12End_"+r,type:"ULONG",value:E.end}),D=D.concat({name:"cmap12Glyph_"+r,type:"ULONG",value:E.glyphIndex}))}if(i.segCountX2=(o-c)*2,i.searchRange=Math.pow(2,Math.floor(Math.log(o-c)/Math.log(2)))*2,i.entrySelector=Math.log(i.searchRange/2)/Math.log(2),i.rangeShift=i.segCountX2-i.searchRange,i.fields=i.fields.concat(h),i.fields.push({name:"reservedPad",type:"USHORT",value:0}),i.fields=i.fields.concat(v),i.fields=i.fields.concat(p),i.fields=i.fields.concat(g),i.fields=i.fields.concat(k),i.cmap4Length=14+h.length*2+2+v.length*2+p.length*2+g.length*2+k.length*2,!t){var L=16+D.length*4;i.cmap12Offset=12+2*2+4+i.cmap4Length,i.fields=i.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:L},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:D.length/3}]),i.fields=i.fields.concat(D)}return i}var Ea={parse:vo,make:yo},Yr=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],bo=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],xo=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],At=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function La(e){this.font=e}La.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),r=this.font.glyphs;if(r){for(var n=0;n<r.length;n+=1)for(var a=r.get(n),i=0;i<a.unicodes.length;i+=1)if(a.unicodes[i]===t)return n}return null};function Da(e){this.cmap=e}Da.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.codePointAt(0)]||0};function Zr(e,t){this.encoding=e,this.charset=t}Zr.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),r=this.encoding[t];return this.charset.indexOf(r)};function xn(e){switch(e.version){case 1:this.names=At.slice();break;case 2:this.names=new Array(e.numberOfGlyphs);for(var t=0;t<e.numberOfGlyphs;t++)e.glyphNameIndex[t]<At.length?this.names[t]=At[e.glyphNameIndex[t]]:this.names[t]=e.names[e.glyphNameIndex[t]-At.length];break;case 2.5:this.names=new Array(e.numberOfGlyphs);for(var r=0;r<e.numberOfGlyphs;r++)this.names[r]=At[r+e.glyphNameIndex[r]];break;case 3:this.names=[];break;default:this.names=[];break}}xn.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)},xn.prototype.glyphIndexToName=function(e){return this.names[e]};function So(e){for(var t,r=e.tables.cmap.glyphIndexMap,n=Object.keys(r),a=0;a<n.length;a+=1){var i=n[a],s=r[i];t=e.glyphs.get(s),t.addUnicode(parseInt(i))}for(var u=0;u<e.glyphs.length;u+=1)t=e.glyphs.get(u),e.cffEncoding?e.isCIDFont?t.name="gid"+u:t.name=e.cffEncoding.charset[u]:e.glyphNames.names&&(t.name=e.glyphNames.glyphIndexToName(u))}function To(e){e._IndexToUnicodeMap={};for(var t=e.tables.cmap.glyphIndexMap,r=Object.keys(t),n=0;n<r.length;n+=1){var a=r[n],i=t[a];e._IndexToUnicodeMap[i]===void 0?e._IndexToUnicodeMap[i]={unicodes:[parseInt(a)]}:e._IndexToUnicodeMap[i].unicodes.push(parseInt(a))}}function ko(e,t){t.lowMemory?To(e):So(e)}function Fo(e,t,r,n,a){e.beginPath(),e.moveTo(t,r),e.lineTo(n,a),e.stroke()}var Bt={line:Fo};function wo(e,t){var r=t||new he;return{configurable:!0,get:function(){return typeof r=="function"&&(r=r()),r},set:function(n){r=n}}}function He(e){this.bindConstructorValues(e)}He.prototype.bindConstructorValues=function(e){this.index=e.index||0,this.name=e.name||null,this.unicode=e.unicode||void 0,this.unicodes=e.unicodes||e.unicode!==void 0?[e.unicode]:[],"xMin"in e&&(this.xMin=e.xMin),"yMin"in e&&(this.yMin=e.yMin),"xMax"in e&&(this.xMax=e.xMax),"yMax"in e&&(this.yMax=e.yMax),"advanceWidth"in e&&(this.advanceWidth=e.advanceWidth),Object.defineProperty(this,"path",wo(this,e.path))},He.prototype.addUnicode=function(e){this.unicodes.length===0&&(this.unicode=e),this.unicodes.push(e)},He.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},He.prototype.getPath=function(e,t,r,n,a){e=e!==void 0?e:0,t=t!==void 0?t:0,r=r!==void 0?r:72;var i,s;n||(n={});var u=n.xScale,o=n.yScale;if(n.hinting&&a&&a.hinting&&(s=this.path&&a.hinting.exec(this,r)),s)i=a.hinting.getCommands(s),e=Math.round(e),t=Math.round(t),u=o=1;else{i=this.path.commands;var c=1/(this.path.unitsPerEm||1e3)*r;u===void 0&&(u=c),o===void 0&&(o=c)}for(var h=new he,v=0;v<i.length;v+=1){var p=i[v];p.type==="M"?h.moveTo(e+p.x*u,t+-p.y*o):p.type==="L"?h.lineTo(e+p.x*u,t+-p.y*o):p.type==="Q"?h.quadraticCurveTo(e+p.x1*u,t+-p.y1*o,e+p.x*u,t+-p.y*o):p.type==="C"?h.curveTo(e+p.x1*u,t+-p.y1*o,e+p.x2*u,t+-p.y2*o,e+p.x*u,t+-p.y*o):p.type==="Z"&&h.closePath()}return h},He.prototype.getContours=function(){if(this.points===void 0)return[];for(var e=[],t=[],r=0;r<this.points.length;r+=1){var n=this.points[r];t.push(n),n.lastPointOfContour&&(e.push(t),t=[])}return G.argument(t.length===0,"There are still points left in the current contour."),e},He.prototype.getMetrics=function(){for(var e=this.path.commands,t=[],r=[],n=0;n<e.length;n+=1){var a=e[n];a.type!=="Z"&&(t.push(a.x),r.push(a.y)),(a.type==="Q"||a.type==="C")&&(t.push(a.x1),r.push(a.y1)),a.type==="C"&&(t.push(a.x2),r.push(a.y2))}var i={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,r),leftSideBearing:this.leftSideBearing};return isFinite(i.xMin)||(i.xMin=0),isFinite(i.xMax)||(i.xMax=this.advanceWidth),isFinite(i.yMin)||(i.yMin=0),isFinite(i.yMax)||(i.yMax=0),i.rightSideBearing=this.advanceWidth-i.leftSideBearing-(i.xMax-i.xMin),i},He.prototype.draw=function(e,t,r,n,a){this.getPath(t,r,n,a).draw(e)},He.prototype.drawPoints=function(e,t,r,n){function a(v,p,g,k){e.beginPath();for(var D=0;D<v.length;D+=1)e.moveTo(p+v[D].x*k,g+v[D].y*k),e.arc(p+v[D].x*k,g+v[D].y*k,2,0,Math.PI*2,!1);e.closePath(),e.fill()}t=t!==void 0?t:0,r=r!==void 0?r:0,n=n!==void 0?n:24;for(var i=1/this.path.unitsPerEm*n,s=[],u=[],o=this.path,c=0;c<o.commands.length;c+=1){var h=o.commands[c];h.x!==void 0&&s.push({x:h.x,y:-h.y}),h.x1!==void 0&&u.push({x:h.x1,y:-h.y1}),h.x2!==void 0&&u.push({x:h.x2,y:-h.y2})}e.fillStyle="blue",a(s,t,r,i),e.fillStyle="red",a(u,t,r,i)},He.prototype.drawMetrics=function(e,t,r,n){var a;t=t!==void 0?t:0,r=r!==void 0?r:0,n=n!==void 0?n:24,a=1/this.path.unitsPerEm*n,e.lineWidth=1,e.strokeStyle="black",Bt.line(e,t,-1e4,t,1e4),Bt.line(e,-1e4,r,1e4,r);var i=this.xMin||0,s=this.yMin||0,u=this.xMax||0,o=this.yMax||0,c=this.advanceWidth||0;e.strokeStyle="blue",Bt.line(e,t+i*a,-1e4,t+i*a,1e4),Bt.line(e,t+u*a,-1e4,t+u*a,1e4),Bt.line(e,-1e4,r+-s*a,1e4,r+-s*a),Bt.line(e,-1e4,r+-o*a,1e4,r+-o*a),e.strokeStyle="green",Bt.line(e,t+c*a,-1e4,t+c*a,1e4)};function Qr(e,t,r){Object.defineProperty(e,t,{get:function(){return e.path,e[r]},set:function(n){e[r]=n},enumerable:!0,configurable:!0})}function Sn(e,t){if(this.font=e,this.glyphs={},Array.isArray(t))for(var r=0;r<t.length;r++){var n=t[r];n.path.unitsPerEm=e.unitsPerEm,this.glyphs[r]=n}this.length=t&&t.length||0}Sn.prototype.get=function(e){if(this.glyphs[e]===void 0){this.font._push(e),typeof this.glyphs[e]=="function"&&(this.glyphs[e]=this.glyphs[e]());var t=this.glyphs[e],r=this.font._IndexToUnicodeMap[e];if(r)for(var n=0;n<r.unicodes.length;n++)t.addUnicode(r.unicodes[n]);this.font.cffEncoding?this.font.isCIDFont?t.name="gid"+e:t.name=this.font.cffEncoding.charset[e]:this.font.glyphNames.names&&(t.name=this.font.glyphNames.glyphIndexToName(e)),this.glyphs[e].advanceWidth=this.font._hmtxTableData[e].advanceWidth,this.glyphs[e].leftSideBearing=this.font._hmtxTableData[e].leftSideBearing}else typeof this.glyphs[e]=="function"&&(this.glyphs[e]=this.glyphs[e]());return this.glyphs[e]},Sn.prototype.push=function(e,t){this.glyphs[e]=t,this.length++};function Co(e,t){return new He({index:t,font:e})}function Uo(e,t,r,n,a,i){return function(){var s=new He({index:t,font:e});return s.path=function(){r(s,n,a);var u=i(e.glyphs,s);return u.unitsPerEm=e.unitsPerEm,u},Qr(s,"xMin","_xMin"),Qr(s,"xMax","_xMax"),Qr(s,"yMin","_yMin"),Qr(s,"yMax","_yMax"),s}}function Oo(e,t,r,n){return function(){var a=new He({index:t,font:e});return a.path=function(){var i=r(e,a,n);return i.unitsPerEm=e.unitsPerEm,i},a}}var ut={GlyphSet:Sn,glyphLoader:Co,ttfGlyphLoader:Uo,cffGlyphLoader:Oo};function Ra(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r+=1)if(!Ra(e[r],t[r]))return!1;return!0}else return!1}function Tn(e){var t;return e.length<1240?t=107:e.length<33900?t=1131:t=32768,t}function bt(e,t,r){var n=[],a=[],i=A.getCard16(e,t),s,u;if(i!==0){var o=A.getByte(e,t+2);s=t+(i+1)*o+2;for(var c=t+3,h=0;h<i+1;h+=1)n.push(A.getOffset(e,c,o)),c+=o;u=s+n[i]}else u=t+2;for(var v=0;v<n.length-1;v+=1){var p=A.getBytes(e,s+n[v],s+n[v+1]);r&&(p=r(p)),a.push(p)}return{objects:a,startOffset:t,endOffset:u}}function Po(e,t){var r=[],n=A.getCard16(e,t),a,i;if(n!==0){var s=A.getByte(e,t+2);a=t+(n+1)*s+2;for(var u=t+3,o=0;o<n+1;o+=1)r.push(A.getOffset(e,u,s)),u+=s;i=a+r[n]}else i=t+2;return{offsets:r,startOffset:t,endOffset:i}}function Eo(e,t,r,n,a){var i=A.getCard16(r,n),s=0;if(i!==0){var u=A.getByte(r,n+2);s=n+(i+1)*u+2}var o=A.getBytes(r,s+t[e],s+t[e+1]);return a&&(o=a(o)),o}function Lo(e){for(var t="",r=15,n=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var a=e.parseByte(),i=a>>4,s=a&15;if(i===r||(t+=n[i],s===r))break;t+=n[s]}return parseFloat(t)}function Do(e,t){var r,n,a,i;if(t===28)return r=e.parseByte(),n=e.parseByte(),r<<8|n;if(t===29)return r=e.parseByte(),n=e.parseByte(),a=e.parseByte(),i=e.parseByte(),r<<24|n<<16|a<<8|i;if(t===30)return Lo(e);if(t>=32&&t<=246)return t-139;if(t>=247&&t<=250)return r=e.parseByte(),(t-247)*256+r+108;if(t>=251&&t<=254)return r=e.parseByte(),-(t-251)*256-r-108;throw new Error("Invalid b0 "+t)}function Ro(e){for(var t={},r=0;r<e.length;r+=1){var n=e[r][0],a=e[r][1],i=void 0;if(a.length===1?i=a[0]:i=a,t.hasOwnProperty(n)&&!isNaN(t[n]))throw new Error("Object "+t+" already has key "+n);t[n]=i}return t}function Ma(e,t,r){t=t!==void 0?t:0;var n=new A.Parser(e,t),a=[],i=[];for(r=r!==void 0?r:e.length;n.relativeOffset<r;){var s=n.parseByte();s<=21?(s===12&&(s=1200+n.parseByte()),a.push([s,i]),i=[]):i.push(Do(n,s))}return Ro(a)}function gr(e,t){return t<=390?t=Yr[t]:t=e[t-391],t}function Ia(e,t,r){for(var n={},a,i=0;i<t.length;i+=1){var s=t[i];if(Array.isArray(s.type)){var u=[];u.length=s.type.length;for(var o=0;o<s.type.length;o++)a=e[s.op]!==void 0?e[s.op][o]:void 0,a===void 0&&(a=s.value!==void 0&&s.value[o]!==void 0?s.value[o]:null),s.type[o]==="SID"&&(a=gr(r,a)),u[o]=a;n[s.name]=u}else a=e[s.op],a===void 0&&(a=s.value!==void 0?s.value:null),s.type==="SID"&&(a=gr(r,a)),n[s.name]=a}return n}function Mo(e,t){var r={};return r.formatMajor=A.getCard8(e,t),r.formatMinor=A.getCard8(e,t+1),r.size=A.getCard8(e,t+2),r.offsetSize=A.getCard8(e,t+3),r.startOffset=t,r.endOffset=t+4,r}var Aa=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Ba=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Io(e,t){var r=Ma(e,0,e.byteLength);return Ia(r,Aa,t)}function Na(e,t,r,n){var a=Ma(e,t,r);return Ia(a,Ba,n)}function _a(e,t,r,n){for(var a=[],i=0;i<r.length;i+=1){var s=new DataView(new Uint8Array(r[i]).buffer),u=Io(s,n);u._subrs=[],u._subrsBias=0,u._defaultWidthX=0,u._nominalWidthX=0;var o=u.private[0],c=u.private[1];if(o!==0&&c!==0){var h=Na(e,c+t,o,n);if(u._defaultWidthX=h.defaultWidthX,u._nominalWidthX=h.nominalWidthX,h.subrs!==0){var v=c+h.subrs,p=bt(e,v+t);u._subrs=p.objects,u._subrsBias=Tn(u._subrs)}u._privateDict=h}a.push(u)}return a}function Ao(e,t,r,n){var a,i,s=new A.Parser(e,t);r-=1;var u=[".notdef"],o=s.parseCard8();if(o===0)for(var c=0;c<r;c+=1)a=s.parseSID(),u.push(gr(n,a));else if(o===1)for(;u.length<=r;){a=s.parseSID(),i=s.parseCard8();for(var h=0;h<=i;h+=1)u.push(gr(n,a)),a+=1}else if(o===2)for(;u.length<=r;){a=s.parseSID(),i=s.parseCard16();for(var v=0;v<=i;v+=1)u.push(gr(n,a)),a+=1}else throw new Error("Unknown charset format "+o);return u}function Bo(e,t,r){var n,a={},i=new A.Parser(e,t),s=i.parseCard8();if(s===0)for(var u=i.parseCard8(),o=0;o<u;o+=1)n=i.parseCard8(),a[n]=o;else if(s===1){var c=i.parseCard8();n=1;for(var h=0;h<c;h+=1)for(var v=i.parseCard8(),p=i.parseCard8(),g=v;g<=v+p;g+=1)a[g]=n,n+=1}else throw new Error("Unknown encoding format "+s);return new Zr(a,r)}function Ga(e,t,r){var n,a,i,s,u=new he,o=[],c=0,h=!1,v=!1,p=0,g=0,k,D,E,L;if(e.isCIDFont){var W=e.tables.cff.topDict._fdSelect[t.index],I=e.tables.cff.topDict._fdArray[W];k=I._subrs,D=I._subrsBias,E=I._defaultWidthX,L=I._nominalWidthX}else k=e.tables.cff.topDict._subrs,D=e.tables.cff.topDict._subrsBias,E=e.tables.cff.topDict._defaultWidthX,L=e.tables.cff.topDict._nominalWidthX;var J=E;function q(N,Se){v&&u.closePath(),u.moveTo(N,Se),v=!0}function ie(){var N;N=o.length%2!==0,N&&!h&&(J=o.shift()+L),c+=o.length>>1,o.length=0,h=!0}function V(N){for(var Se,Be,ze,Ke,Je,be,ke,Oe,Pe,Ee,Fe,Ie,se=0;se<N.length;){var Le=N[se];switch(se+=1,Le){case 1:ie();break;case 3:ie();break;case 4:o.length>1&&!h&&(J=o.shift()+L,h=!0),g+=o.pop(),q(p,g);break;case 5:for(;o.length>0;)p+=o.shift(),g+=o.shift(),u.lineTo(p,g);break;case 6:for(;o.length>0&&(p+=o.shift(),u.lineTo(p,g),o.length!==0);)g+=o.shift(),u.lineTo(p,g);break;case 7:for(;o.length>0&&(g+=o.shift(),u.lineTo(p,g),o.length!==0);)p+=o.shift(),u.lineTo(p,g);break;case 8:for(;o.length>0;)n=p+o.shift(),a=g+o.shift(),i=n+o.shift(),s=a+o.shift(),p=i+o.shift(),g=s+o.shift(),u.curveTo(n,a,i,s,p,g);break;case 10:Je=o.pop()+D,be=k[Je],be&&V(be);break;case 11:return;case 12:switch(Le=N[se],se+=1,Le){case 35:n=p+o.shift(),a=g+o.shift(),i=n+o.shift(),s=a+o.shift(),ke=i+o.shift(),Oe=s+o.shift(),Pe=ke+o.shift(),Ee=Oe+o.shift(),Fe=Pe+o.shift(),Ie=Ee+o.shift(),p=Fe+o.shift(),g=Ie+o.shift(),o.shift(),u.curveTo(n,a,i,s,ke,Oe),u.curveTo(Pe,Ee,Fe,Ie,p,g);break;case 34:n=p+o.shift(),a=g,i=n+o.shift(),s=a+o.shift(),ke=i+o.shift(),Oe=s,Pe=ke+o.shift(),Ee=s,Fe=Pe+o.shift(),Ie=g,p=Fe+o.shift(),u.curveTo(n,a,i,s,ke,Oe),u.curveTo(Pe,Ee,Fe,Ie,p,g);break;case 36:n=p+o.shift(),a=g+o.shift(),i=n+o.shift(),s=a+o.shift(),ke=i+o.shift(),Oe=s,Pe=ke+o.shift(),Ee=s,Fe=Pe+o.shift(),Ie=Ee+o.shift(),p=Fe+o.shift(),u.curveTo(n,a,i,s,ke,Oe),u.curveTo(Pe,Ee,Fe,Ie,p,g);break;case 37:n=p+o.shift(),a=g+o.shift(),i=n+o.shift(),s=a+o.shift(),ke=i+o.shift(),Oe=s+o.shift(),Pe=ke+o.shift(),Ee=Oe+o.shift(),Fe=Pe+o.shift(),Ie=Ee+o.shift(),Math.abs(Fe-p)>Math.abs(Ie-g)?p=Fe+o.shift():g=Ie+o.shift(),u.curveTo(n,a,i,s,ke,Oe),u.curveTo(Pe,Ee,Fe,Ie,p,g);break;default:console.log("Glyph "+t.index+": unknown operator 1200"+Le),o.length=0}break;case 14:o.length>0&&!h&&(J=o.shift()+L,h=!0),v&&(u.closePath(),v=!1);break;case 18:ie();break;case 19:case 20:ie(),se+=c+7>>3;break;case 21:o.length>2&&!h&&(J=o.shift()+L,h=!0),g+=o.pop(),p+=o.pop(),q(p,g);break;case 22:o.length>1&&!h&&(J=o.shift()+L,h=!0),p+=o.pop(),q(p,g);break;case 23:ie();break;case 24:for(;o.length>2;)n=p+o.shift(),a=g+o.shift(),i=n+o.shift(),s=a+o.shift(),p=i+o.shift(),g=s+o.shift(),u.curveTo(n,a,i,s,p,g);p+=o.shift(),g+=o.shift(),u.lineTo(p,g);break;case 25:for(;o.length>6;)p+=o.shift(),g+=o.shift(),u.lineTo(p,g);n=p+o.shift(),a=g+o.shift(),i=n+o.shift(),s=a+o.shift(),p=i+o.shift(),g=s+o.shift(),u.curveTo(n,a,i,s,p,g);break;case 26:for(o.length%2&&(p+=o.shift());o.length>0;)n=p,a=g+o.shift(),i=n+o.shift(),s=a+o.shift(),p=i,g=s+o.shift(),u.curveTo(n,a,i,s,p,g);break;case 27:for(o.length%2&&(g+=o.shift());o.length>0;)n=p+o.shift(),a=g,i=n+o.shift(),s=a+o.shift(),p=i+o.shift(),g=s,u.curveTo(n,a,i,s,p,g);break;case 28:Se=N[se],Be=N[se+1],o.push((Se<<24|Be<<16)>>16),se+=2;break;case 29:Je=o.pop()+e.gsubrsBias,be=e.gsubrs[Je],be&&V(be);break;case 30:for(;o.length>0&&(n=p,a=g+o.shift(),i=n+o.shift(),s=a+o.shift(),p=i+o.shift(),g=s+(o.length===1?o.shift():0),u.curveTo(n,a,i,s,p,g),o.length!==0);)n=p+o.shift(),a=g,i=n+o.shift(),s=a+o.shift(),g=s+o.shift(),p=i+(o.length===1?o.shift():0),u.curveTo(n,a,i,s,p,g);break;case 31:for(;o.length>0&&(n=p+o.shift(),a=g,i=n+o.shift(),s=a+o.shift(),g=s+o.shift(),p=i+(o.length===1?o.shift():0),u.curveTo(n,a,i,s,p,g),o.length!==0);)n=p,a=g+o.shift(),i=n+o.shift(),s=a+o.shift(),p=i+o.shift(),g=s+(o.length===1?o.shift():0),u.curveTo(n,a,i,s,p,g);break;default:Le<32?console.log("Glyph "+t.index+": unknown operator "+Le):Le<247?o.push(Le-139):Le<251?(Se=N[se],se+=1,o.push((Le-247)*256+Se+108)):Le<255?(Se=N[se],se+=1,o.push(-(Le-251)*256-Se-108)):(Se=N[se],Be=N[se+1],ze=N[se+2],Ke=N[se+3],se+=4,o.push((Se<<24|Be<<16|ze<<8|Ke)/65536))}}}return V(r),t.advanceWidth=J,u}function No(e,t,r,n){var a=[],i,s=new A.Parser(e,t),u=s.parseCard8();if(u===0)for(var o=0;o<r;o++){if(i=s.parseCard8(),i>=n)throw new Error("CFF table CID Font FDSelect has bad FD index value "+i+" (FD count "+n+")");a.push(i)}else if(u===3){var c=s.parseCard16(),h=s.parseCard16();if(h!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+h);for(var v,p=0;p<c;p++){if(i=s.parseCard8(),v=s.parseCard16(),i>=n)throw new Error("CFF table CID Font FDSelect has bad FD index value "+i+" (FD count "+n+")");if(v>r)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+v);for(;h<v;h++)a.push(i);h=v}if(v!==r)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+v)}else throw new Error("CFF Table CID Font FDSelect table has unsupported format "+u);return a}function _o(e,t,r,n){r.tables.cff={};var a=Mo(e,t),i=bt(e,a.endOffset,A.bytesToString),s=bt(e,i.endOffset),u=bt(e,s.endOffset,A.bytesToString),o=bt(e,u.endOffset);r.gsubrs=o.objects,r.gsubrsBias=Tn(r.gsubrs);var c=_a(e,t,s.objects,u.objects);if(c.length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+c.length);var h=c[0];if(r.tables.cff.topDict=h,h._privateDict&&(r.defaultWidthX=h._privateDict.defaultWidthX,r.nominalWidthX=h._privateDict.nominalWidthX),h.ros[0]!==void 0&&h.ros[1]!==void 0&&(r.isCIDFont=!0),r.isCIDFont){var v=h.fdArray,p=h.fdSelect;if(v===0||p===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");v+=t;var g=bt(e,v),k=_a(e,t,g.objects,u.objects);h._fdArray=k,p+=t,h._fdSelect=No(e,p,r.numGlyphs,k.length)}var D=t+h.private[1],E=Na(e,D,h.private[0],u.objects);if(r.defaultWidthX=E.defaultWidthX,r.nominalWidthX=E.nominalWidthX,E.subrs!==0){var L=D+E.subrs,W=bt(e,L);r.subrs=W.objects,r.subrsBias=Tn(r.subrs)}else r.subrs=[],r.subrsBias=0;var I;n.lowMemory?(I=Po(e,t+h.charStrings),r.nGlyphs=I.offsets.length):(I=bt(e,t+h.charStrings),r.nGlyphs=I.objects.length);var J=Ao(e,t+h.charset,r.nGlyphs,u.objects);if(h.encoding===0?r.cffEncoding=new Zr(bo,J):h.encoding===1?r.cffEncoding=new Zr(xo,J):r.cffEncoding=Bo(e,t+h.encoding,J),r.encoding=r.encoding||r.cffEncoding,r.glyphs=new ut.GlyphSet(r),n.lowMemory)r._push=function(V){var N=Eo(V,I.offsets,e,t+h.charStrings);r.glyphs.push(V,ut.cffGlyphLoader(r,V,Ga,N))};else for(var q=0;q<r.nGlyphs;q+=1){var ie=I.objects[q];r.glyphs.push(q,ut.cffGlyphLoader(r,q,Ga,ie))}}function Ha(e,t){var r,n=Yr.indexOf(e);return n>=0&&(r=n),n=t.indexOf(e),n>=0?r=n+Yr.length:(r=Yr.length+t.length,t.push(e)),r}function Go(){return new M.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function Ho(e){var t=new M.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var r=0;r<e.length;r+=1)t.names.push({name:"name_"+r,type:"NAME",value:e[r]});return t}function za(e,t,r){for(var n={},a=0;a<e.length;a+=1){var i=e[a],s=t[i.name];s!==void 0&&!Ra(s,i.value)&&(i.type==="SID"&&(s=Ha(s,r)),n[i.op]={name:i.name,type:i.type,value:s})}return n}function Wa(e,t){var r=new M.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=za(Aa,e,t),r}function qa(e){var t=new M.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}],t}function zo(e){var t=new M.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var r=0;r<e.length;r+=1)t.strings.push({name:"string_"+r,type:"STRING",value:e[r]});return t}function Wo(){return new M.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function qo(e,t){for(var r=new M.Record("Charsets",[{name:"format",type:"Card8",value:0}]),n=0;n<e.length;n+=1){var a=e[n],i=Ha(a,t);r.fields.push({name:"glyph_"+n,type:"SID",value:i})}return r}function Vo(e){var t=[],r=e.path;t.push({name:"width",type:"NUMBER",value:e.advanceWidth});for(var n=0,a=0,i=0;i<r.commands.length;i+=1){var s=void 0,u=void 0,o=r.commands[i];if(o.type==="Q"){var c=.3333333333333333,h=2/3;o={type:"C",x:o.x,y:o.y,x1:Math.round(c*n+h*o.x1),y1:Math.round(c*a+h*o.y1),x2:Math.round(c*o.x+h*o.x1),y2:Math.round(c*o.y+h*o.y1)}}if(o.type==="M")s=Math.round(o.x-n),u=Math.round(o.y-a),t.push({name:"dx",type:"NUMBER",value:s}),t.push({name:"dy",type:"NUMBER",value:u}),t.push({name:"rmoveto",type:"OP",value:21}),n=Math.round(o.x),a=Math.round(o.y);else if(o.type==="L")s=Math.round(o.x-n),u=Math.round(o.y-a),t.push({name:"dx",type:"NUMBER",value:s}),t.push({name:"dy",type:"NUMBER",value:u}),t.push({name:"rlineto",type:"OP",value:5}),n=Math.round(o.x),a=Math.round(o.y);else if(o.type==="C"){var v=Math.round(o.x1-n),p=Math.round(o.y1-a),g=Math.round(o.x2-o.x1),k=Math.round(o.y2-o.y1);s=Math.round(o.x-o.x2),u=Math.round(o.y-o.y2),t.push({name:"dx1",type:"NUMBER",value:v}),t.push({name:"dy1",type:"NUMBER",value:p}),t.push({name:"dx2",type:"NUMBER",value:g}),t.push({name:"dy2",type:"NUMBER",value:k}),t.push({name:"dx",type:"NUMBER",value:s}),t.push({name:"dy",type:"NUMBER",value:u}),t.push({name:"rrcurveto",type:"OP",value:8}),n=Math.round(o.x),a=Math.round(o.y)}}return t.push({name:"endchar",type:"OP",value:14}),t}function Xo(e){for(var t=new M.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),r=0;r<e.length;r+=1){var n=e.get(r),a=Vo(n);t.charStrings.push({name:n.name,type:"CHARSTRING",value:a})}return t}function jo(e,t){var r=new M.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=za(Ba,e,t),r}function Yo(e,t){for(var r=new M.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),n=1/t.unitsPerEm,a={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontBBox:t.fontBBox||[0,0,0,0],fontMatrix:[n,0,0,n,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},i={},s=[],u,o=1;o<e.length;o+=1)u=e.get(o),s.push(u.name);var c=[];r.header=Go(),r.nameIndex=Ho([t.postScriptName]);var h=Wa(a,c);r.topDictIndex=qa(h),r.globalSubrIndex=Wo(),r.charsets=qo(s,c),r.charStringsIndex=Xo(e),r.privateDict=jo(i,c),r.stringIndex=zo(c);var v=r.header.sizeOf()+r.nameIndex.sizeOf()+r.topDictIndex.sizeOf()+r.stringIndex.sizeOf()+r.globalSubrIndex.sizeOf();return a.charset=v,a.encoding=0,a.charStrings=a.charset+r.charsets.sizeOf(),a.private[1]=a.charStrings+r.charStringsIndex.sizeOf(),h=Wa(a,c),r.topDictIndex=qa(h),r}var Va={parse:_o,make:Yo};function Zo(e,t){var r={},n=new A.Parser(e,t);return r.version=n.parseVersion(),r.fontRevision=Math.round(n.parseFixed()*1e3)/1e3,r.checkSumAdjustment=n.parseULong(),r.magicNumber=n.parseULong(),G.argument(r.magicNumber===1594834165,"Font header has wrong magic number."),r.flags=n.parseUShort(),r.unitsPerEm=n.parseUShort(),r.created=n.parseLongDateTime(),r.modified=n.parseLongDateTime(),r.xMin=n.parseShort(),r.yMin=n.parseShort(),r.xMax=n.parseShort(),r.yMax=n.parseShort(),r.macStyle=n.parseUShort(),r.lowestRecPPEM=n.parseUShort(),r.fontDirectionHint=n.parseShort(),r.indexToLocFormat=n.parseShort(),r.glyphDataFormat=n.parseShort(),r}function Qo(e){var t=Math.round(new Date().getTime()/1e3)+2082844800,r=t;return e.createdTimestamp&&(r=e.createdTimestamp+2082844800),new M.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:r},{name:"modified",type:"LONGDATETIME",value:t},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)}var Xa={parse:Zo,make:Qo};function Ko(e,t){var r={},n=new A.Parser(e,t);return r.version=n.parseVersion(),r.ascender=n.parseShort(),r.descender=n.parseShort(),r.lineGap=n.parseShort(),r.advanceWidthMax=n.parseUShort(),r.minLeftSideBearing=n.parseShort(),r.minRightSideBearing=n.parseShort(),r.xMaxExtent=n.parseShort(),r.caretSlopeRise=n.parseShort(),r.caretSlopeRun=n.parseShort(),r.caretOffset=n.parseShort(),n.relativeOffset+=8,r.metricDataFormat=n.parseShort(),r.numberOfHMetrics=n.parseUShort(),r}function Jo(e){return new M.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)}var ja={parse:Ko,make:Jo};function $o(e,t,r,n,a){for(var i,s,u=new A.Parser(e,t),o=0;o<n;o+=1){o<r&&(i=u.parseUShort(),s=u.parseShort());var c=a.get(o);c.advanceWidth=i,c.leftSideBearing=s}}function eu(e,t,r,n,a){e._hmtxTableData={};for(var i,s,u=new A.Parser(t,r),o=0;o<a;o+=1)o<n&&(i=u.parseUShort(),s=u.parseShort()),e._hmtxTableData[o]={advanceWidth:i,leftSideBearing:s}}function tu(e,t,r,n,a,i,s){s.lowMemory?eu(e,t,r,n,a):$o(t,r,n,a,i)}function ru(e){for(var t=new M.Table("hmtx",[]),r=0;r<e.length;r+=1){var n=e.get(r),a=n.advanceWidth||0,i=n.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+r,type:"USHORT",value:a}),t.fields.push({name:"leftSideBearing_"+r,type:"SHORT",value:i})}return t}var Ya={parse:tu,make:ru};function nu(e){for(var t=new M.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:e.length}]),r="",n=12+e.length*4,a=0;a<e.length;++a){var i=r.indexOf(e[a]);i<0&&(i=r.length,r+=e[a]),t.fields.push({name:"offset "+a,type:"USHORT",value:n+i}),t.fields.push({name:"length "+a,type:"USHORT",value:e[a].length})}return t.fields.push({name:"stringPool",type:"CHARARRAY",value:r}),t}function au(e,t){var r=new A.Parser(e,t),n=r.parseULong();G.argument(n===1,"Unsupported ltag table version."),r.skip("uLong",1);for(var a=r.parseULong(),i=[],s=0;s<a;s++){for(var u="",o=t+r.parseUShort(),c=r.parseUShort(),h=o;h<o+c;++h)u+=String.fromCharCode(e.getInt8(h));i.push(u)}return i}var Za={make:nu,parse:au};function iu(e,t){var r={},n=new A.Parser(e,t);return r.version=n.parseVersion(),r.numGlyphs=n.parseUShort(),r.version===1&&(r.maxPoints=n.parseUShort(),r.maxContours=n.parseUShort(),r.maxCompositePoints=n.parseUShort(),r.maxCompositeContours=n.parseUShort(),r.maxZones=n.parseUShort(),r.maxTwilightPoints=n.parseUShort(),r.maxStorage=n.parseUShort(),r.maxFunctionDefs=n.parseUShort(),r.maxInstructionDefs=n.parseUShort(),r.maxStackElements=n.parseUShort(),r.maxSizeOfInstructions=n.parseUShort(),r.maxComponentElements=n.parseUShort(),r.maxComponentDepth=n.parseUShort()),r}function su(e){return new M.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])}var Qa={parse:iu,make:su},Ka=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Ja={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},ou={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},$a={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function uu(e,t,r){switch(e){case 0:if(t===65535)return"und";if(r)return r[t];break;case 1:return Ja[t];case 3:return $a[t]}}var kn="utf-16",lu={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},fu={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function ei(e,t,r){switch(e){case 0:return kn;case 1:return fu[r]||lu[t];case 3:if(t===1||t===10)return kn;break}}function cu(e,t,r){for(var n={},a=new A.Parser(e,t),i=a.parseUShort(),s=a.parseUShort(),u=a.offset+a.parseUShort(),o=0;o<s;o++){var c=a.parseUShort(),h=a.parseUShort(),v=a.parseUShort(),p=a.parseUShort(),g=Ka[p]||p,k=a.parseUShort(),D=a.parseUShort(),E=uu(c,v,r),L=ei(c,h,v);if(L!==void 0&&E!==void 0){var W=void 0;if(L===kn?W=er.UTF16(e,u+D,k):W=er.MACSTRING(e,u+D,k,L),W){var I=n[g];I===void 0&&(I=n[g]={}),I[E]=W}}}var J=0;return i===1&&(J=a.parseUShort()),n}function Fn(e){var t={};for(var r in e)t[e[r]]=parseInt(r);return t}function ti(e,t,r,n,a,i){return new M.Record("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:r},{name:"nameID",type:"USHORT",value:n},{name:"length",type:"USHORT",value:a},{name:"offset",type:"USHORT",value:i}])}function hu(e,t){var r=e.length,n=t.length-r+1;e:for(var a=0;a<n;a++)for(;a<n;a++){for(var i=0;i<r;i++)if(t[a+i]!==e[i])continue e;return a}return-1}function ri(e,t){var r=hu(e,t);if(r<0){r=t.length;for(var n=0,a=e.length;n<a;++n)t.push(e[n])}return r}function pu(e,t){var r,n=[],a={},i=Fn(Ka);for(var s in e){var u=i[s];if(u===void 0&&(u=s),r=parseInt(u),isNaN(r))throw new Error('Name table entry "'+s+'" does not exist, see nameTableNames for complete list.');a[r]=e[s],n.push(r)}for(var o=Fn(Ja),c=Fn($a),h=[],v=[],p=0;p<n.length;p++){r=n[p];var g=a[r];for(var k in g){var D=g[k],E=1,L=o[k],W=ou[L],I=ei(E,W,L),J=P.MACSTRING(D,I);J===void 0&&(E=0,L=t.indexOf(k),L<0&&(L=t.length,t.push(k)),W=4,J=P.UTF16(D));var q=ri(J,v);h.push(ti(E,W,L,r,J.length,q));var ie=c[k];if(ie!==void 0){var V=P.UTF16(D),N=ri(V,v);h.push(ti(3,1,ie,r,V.length,N))}}}h.sort(function(ze,Ke){return ze.platformID-Ke.platformID||ze.encodingID-Ke.encodingID||ze.languageID-Ke.languageID||ze.nameID-Ke.nameID});for(var Se=new M.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:h.length},{name:"stringOffset",type:"USHORT",value:6+h.length*12}]),Be=0;Be<h.length;Be++)Se.fields.push({name:"record_"+Be,type:"RECORD",value:h[Be]});return Se.fields.push({name:"strings",type:"LITERAL",value:v}),Se}var ni={parse:cu,make:pu},wn=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];function du(e){for(var t=0;t<wn.length;t+=1){var r=wn[t];if(e>=r.begin&&e<r.end)return t}return-1}function vu(e,t){var r={},n=new A.Parser(e,t);r.version=n.parseUShort(),r.xAvgCharWidth=n.parseShort(),r.usWeightClass=n.parseUShort(),r.usWidthClass=n.parseUShort(),r.fsType=n.parseUShort(),r.ySubscriptXSize=n.parseShort(),r.ySubscriptYSize=n.parseShort(),r.ySubscriptXOffset=n.parseShort(),r.ySubscriptYOffset=n.parseShort(),r.ySuperscriptXSize=n.parseShort(),r.ySuperscriptYSize=n.parseShort(),r.ySuperscriptXOffset=n.parseShort(),r.ySuperscriptYOffset=n.parseShort(),r.yStrikeoutSize=n.parseShort(),r.yStrikeoutPosition=n.parseShort(),r.sFamilyClass=n.parseShort(),r.panose=[];for(var a=0;a<10;a++)r.panose[a]=n.parseByte();return r.ulUnicodeRange1=n.parseULong(),r.ulUnicodeRange2=n.parseULong(),r.ulUnicodeRange3=n.parseULong(),r.ulUnicodeRange4=n.parseULong(),r.achVendID=String.fromCharCode(n.parseByte(),n.parseByte(),n.parseByte(),n.parseByte()),r.fsSelection=n.parseUShort(),r.usFirstCharIndex=n.parseUShort(),r.usLastCharIndex=n.parseUShort(),r.sTypoAscender=n.parseShort(),r.sTypoDescender=n.parseShort(),r.sTypoLineGap=n.parseShort(),r.usWinAscent=n.parseUShort(),r.usWinDescent=n.parseUShort(),r.version>=1&&(r.ulCodePageRange1=n.parseULong(),r.ulCodePageRange2=n.parseULong()),r.version>=2&&(r.sxHeight=n.parseShort(),r.sCapHeight=n.parseShort(),r.usDefaultChar=n.parseUShort(),r.usBreakChar=n.parseUShort(),r.usMaxContent=n.parseUShort()),r}function gu(e){return new M.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)}var Cn={parse:vu,make:gu,unicodeRanges:wn,getUnicodeRange:du};function mu(e,t){var r={},n=new A.Parser(e,t);switch(r.version=n.parseVersion(),r.italicAngle=n.parseFixed(),r.underlinePosition=n.parseShort(),r.underlineThickness=n.parseShort(),r.isFixedPitch=n.parseULong(),r.minMemType42=n.parseULong(),r.maxMemType42=n.parseULong(),r.minMemType1=n.parseULong(),r.maxMemType1=n.parseULong(),r.version){case 1:r.names=At.slice();break;case 2:r.numberOfGlyphs=n.parseUShort(),r.glyphNameIndex=new Array(r.numberOfGlyphs);for(var a=0;a<r.numberOfGlyphs;a++)r.glyphNameIndex[a]=n.parseUShort();r.names=[];for(var i=0;i<r.numberOfGlyphs;i++)if(r.glyphNameIndex[i]>=At.length){var s=n.parseChar();r.names.push(n.parseString(s))}break;case 2.5:r.numberOfGlyphs=n.parseUShort(),r.offset=new Array(r.numberOfGlyphs);for(var u=0;u<r.numberOfGlyphs;u++)r.offset[u]=n.parseChar();break}return r}function yu(){return new M.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}var ai={parse:mu,make:yu},at=new Array(9);at[1]=function(){var t=this.offset+this.relativeOffset,r=this.parseUShort();if(r===1)return{substFormat:1,coverage:this.parsePointer(m.coverage),deltaGlyphId:this.parseUShort()};if(r===2)return{substFormat:2,coverage:this.parsePointer(m.coverage),substitute:this.parseOffset16List()};G.assert(!1,"0x"+t.toString(16)+": lookup type 1 format must be 1 or 2.")},at[2]=function(){var t=this.parseUShort();return G.argument(t===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(m.coverage),sequences:this.parseListOfLists()}},at[3]=function(){var t=this.parseUShort();return G.argument(t===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(m.coverage),alternateSets:this.parseListOfLists()}},at[4]=function(){var t=this.parseUShort();return G.argument(t===1,"GSUB ligature table identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(m.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var tr={sequenceIndex:m.uShort,lookupListIndex:m.uShort};at[5]=function(){var t=this.offset+this.relativeOffset,r=this.parseUShort();if(r===1)return{substFormat:r,coverage:this.parsePointer(m.coverage),ruleSets:this.parseListOfLists(function(){var i=this.parseUShort(),s=this.parseUShort();return{input:this.parseUShortList(i-1),lookupRecords:this.parseRecordList(s,tr)}})};if(r===2)return{substFormat:r,coverage:this.parsePointer(m.coverage),classDef:this.parsePointer(m.classDef),classSets:this.parseListOfLists(function(){var i=this.parseUShort(),s=this.parseUShort();return{classes:this.parseUShortList(i-1),lookupRecords:this.parseRecordList(s,tr)}})};if(r===3){var n=this.parseUShort(),a=this.parseUShort();return{substFormat:r,coverages:this.parseList(n,m.pointer(m.coverage)),lookupRecords:this.parseRecordList(a,tr)}}G.assert(!1,"0x"+t.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},at[6]=function(){var t=this.offset+this.relativeOffset,r=this.parseUShort();if(r===1)return{substFormat:1,coverage:this.parsePointer(m.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(tr)}})};if(r===2)return{substFormat:2,coverage:this.parsePointer(m.coverage),backtrackClassDef:this.parsePointer(m.classDef),inputClassDef:this.parsePointer(m.classDef),lookaheadClassDef:this.parsePointer(m.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(tr)}})};if(r===3)return{substFormat:3,backtrackCoverage:this.parseList(m.pointer(m.coverage)),inputCoverage:this.parseList(m.pointer(m.coverage)),lookaheadCoverage:this.parseList(m.pointer(m.coverage)),lookupRecords:this.parseRecordList(tr)};G.assert(!1,"0x"+t.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},at[7]=function(){var t=this.parseUShort();G.argument(t===1,"GSUB Extension Substitution subtable identifier-format must be 1");var r=this.parseUShort(),n=new m(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:r,extension:at[r].call(n)}},at[8]=function(){var t=this.parseUShort();return G.argument(t===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(m.coverage),backtrackCoverage:this.parseList(m.pointer(m.coverage)),lookaheadCoverage:this.parseList(m.pointer(m.coverage)),substitutes:this.parseUShortList()}};function bu(e,t){t=t||0;var r=new m(e,t),n=r.parseVersion(1);return G.argument(n===1||n===1.1,"Unsupported GSUB table version."),n===1?{version:n,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(at)}:{version:n,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(at),variations:r.parseFeatureVariationsList()}}var rr=new Array(9);rr[1]=function(t){return t.substFormat===1?new M.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new M.Coverage(t.coverage)},{name:"deltaGlyphID",type:"USHORT",value:t.deltaGlyphId}]):new M.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new M.Coverage(t.coverage)}].concat(M.ushortList("substitute",t.substitute)))},rr[2]=function(t){return G.assert(t.substFormat===1,"Lookup type 2 substFormat must be 1."),new M.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new M.Coverage(t.coverage)}].concat(M.tableList("seqSet",t.sequences,function(r){return new M.Table("sequenceSetTable",M.ushortList("sequence",r))})))},rr[3]=function(t){return G.assert(t.substFormat===1,"Lookup type 3 substFormat must be 1."),new M.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new M.Coverage(t.coverage)}].concat(M.tableList("altSet",t.alternateSets,function(r){return new M.Table("alternateSetTable",M.ushortList("alternate",r))})))},rr[4]=function(t){return G.assert(t.substFormat===1,"Lookup type 4 substFormat must be 1."),new M.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new M.Coverage(t.coverage)}].concat(M.tableList("ligSet",t.ligatureSets,function(r){return new M.Table("ligatureSetTable",M.tableList("ligature",r,function(n){return new M.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:n.ligGlyph}].concat(M.ushortList("component",n.components,n.components.length+1)))}))})))},rr[6]=function(t){if(t.substFormat===1){var r=new M.Table("chainContextTable",[{name:"substFormat",type:"USHORT",value:t.substFormat},{name:"coverage",type:"TABLE",value:new M.Coverage(t.coverage)}].concat(M.tableList("chainRuleSet",t.chainRuleSets,function(i){return new M.Table("chainRuleSetTable",M.tableList("chainRule",i,function(s){var u=M.ushortList("backtrackGlyph",s.backtrack,s.backtrack.length).concat(M.ushortList("inputGlyph",s.input,s.input.length+1)).concat(M.ushortList("lookaheadGlyph",s.lookahead,s.lookahead.length)).concat(M.ushortList("substitution",[],s.lookupRecords.length));return s.lookupRecords.forEach(function(o,c){u=u.concat({name:"sequenceIndex"+c,type:"USHORT",value:o.sequenceIndex}).concat({name:"lookupListIndex"+c,type:"USHORT",value:o.lookupListIndex})}),new M.Table("chainRuleTable",u)}))})));return r}else if(t.substFormat===2)G.assert(!1,"lookup type 6 format 2 is not yet supported.");else if(t.substFormat===3){var n=[{name:"substFormat",type:"USHORT",value:t.substFormat}];n.push({name:"backtrackGlyphCount",type:"USHORT",value:t.backtrackCoverage.length}),t.backtrackCoverage.forEach(function(i,s){n.push({name:"backtrackCoverage"+s,type:"TABLE",value:new M.Coverage(i)})}),n.push({name:"inputGlyphCount",type:"USHORT",value:t.inputCoverage.length}),t.inputCoverage.forEach(function(i,s){n.push({name:"inputCoverage"+s,type:"TABLE",value:new M.Coverage(i)})}),n.push({name:"lookaheadGlyphCount",type:"USHORT",value:t.lookaheadCoverage.length}),t.lookaheadCoverage.forEach(function(i,s){n.push({name:"lookaheadCoverage"+s,type:"TABLE",value:new M.Coverage(i)})}),n.push({name:"substitutionCount",type:"USHORT",value:t.lookupRecords.length}),t.lookupRecords.forEach(function(i,s){n=n.concat({name:"sequenceIndex"+s,type:"USHORT",value:i.sequenceIndex}).concat({name:"lookupListIndex"+s,type:"USHORT",value:i.lookupListIndex})});var a=new M.Table("chainContextTable",n);return a}G.assert(!1,"lookup type 6 format must be 1, 2 or 3.")};function xu(e){return new M.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new M.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new M.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new M.LookupList(e.lookups,rr)}])}var ii={parse:bu,make:xu};function Su(e,t){var r=new A.Parser(e,t),n=r.parseULong();G.argument(n===1,"Unsupported META table version."),r.parseULong(),r.parseULong();for(var a=r.parseULong(),i={},s=0;s<a;s++){var u=r.parseTag(),o=r.parseULong(),c=r.parseULong(),h=er.UTF8(e,t+o,c);i[u]=h}return i}function Tu(e){var t=Object.keys(e).length,r="",n=16+t*12,a=new M.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:n},{name:"numTags",type:"ULONG",value:t}]);for(var i in e){var s=r.length;r+=e[i],a.fields.push({name:"tag "+i,type:"TAG",value:i}),a.fields.push({name:"offset "+i,type:"ULONG",value:n+s}),a.fields.push({name:"length "+i,type:"ULONG",value:e[i].length})}return a.fields.push({name:"stringPool",type:"CHARARRAY",value:r}),a}var si={parse:Su,make:Tu};function oi(e){return Math.log(e)/Math.log(2)|0}function Un(e){for(;e.length%4!==0;)e.push(0);for(var t=0,r=0;r<e.length;r+=4)t+=(e[r]<<24)+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3];return t%=Math.pow(2,32),t}function ui(e,t,r,n){return new M.Record("Table Record",[{name:"tag",type:"TAG",value:e!==void 0?e:""},{name:"checkSum",type:"ULONG",value:t!==void 0?t:0},{name:"offset",type:"ULONG",value:r!==void 0?r:0},{name:"length",type:"ULONG",value:n!==void 0?n:0}])}function li(e){var t=new M.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);t.tables=e,t.numTables=e.length;var r=Math.pow(2,oi(t.numTables));t.searchRange=16*r,t.entrySelector=oi(r),t.rangeShift=t.numTables*16-t.searchRange;for(var n=[],a=[],i=t.sizeOf()+ui().sizeOf()*t.numTables;i%4!==0;)i+=1,a.push({name:"padding",type:"BYTE",value:0});for(var s=0;s<e.length;s+=1){var u=e[s];G.argument(u.tableName.length===4,"Table name"+u.tableName+" is invalid.");var o=u.sizeOf(),c=ui(u.tableName,Un(u.encode()),i,o);for(n.push({name:c.tag+" Table Record",type:"RECORD",value:c}),a.push({name:u.tableName+" table",type:"RECORD",value:u}),i+=o,G.argument(!isNaN(i),"Something went wrong calculating the offset.");i%4!==0;)i+=1,a.push({name:"padding",type:"BYTE",value:0})}return n.sort(function(h,v){return h.value.tag>v.value.tag?1:-1}),t.fields=t.fields.concat(n),t.fields=t.fields.concat(a),t}function fi(e,t,r){for(var n=0;n<t.length;n+=1){var a=e.charToGlyphIndex(t[n]);if(a>0){var i=e.glyphs.get(a);return i.getMetrics()}}return r}function ku(e){for(var t=0,r=0;r<e.length;r+=1)t+=e[r];return t/e.length}function Fu(e){for(var t=[],r=[],n=[],a=[],i=[],s=[],u=[],o,c=0,h=0,v=0,p=0,g=0,k=0;k<e.glyphs.length;k+=1){var D=e.glyphs.get(k),E=D.unicode|0;if(isNaN(D.advanceWidth))throw new Error("Glyph "+D.name+" ("+k+"): advanceWidth is not a number.");(o>E||o===void 0)&&E>0&&(o=E),c<E&&(c=E);var L=Cn.getUnicodeRange(E);if(L<32)h|=1<<L;else if(L<64)v|=1<<L-32;else if(L<96)p|=1<<L-64;else if(L<123)g|=1<<L-96;else throw new Error("Unicode ranges bits > 123 are reserved for internal usage");if(D.name!==".notdef"){var W=D.getMetrics();t.push(W.xMin),r.push(W.yMin),n.push(W.xMax),a.push(W.yMax),s.push(W.leftSideBearing),u.push(W.rightSideBearing),i.push(D.advanceWidth)}}var I={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,n),yMax:Math.max.apply(null,a),advanceWidthMax:Math.max.apply(null,i),advanceWidthAvg:ku(i),minLeftSideBearing:Math.min.apply(null,s),maxLeftSideBearing:Math.max.apply(null,s),minRightSideBearing:Math.min.apply(null,u)};I.ascender=e.ascender,I.descender=e.descender;var J=Xa.make({flags:3,unitsPerEm:e.unitsPerEm,xMin:I.xMin,yMin:I.yMin,xMax:I.xMax,yMax:I.yMax,lowestRecPPEM:3,createdTimestamp:e.createdTimestamp}),q=ja.make({ascender:I.ascender,descender:I.descender,advanceWidthMax:I.advanceWidthMax,minLeftSideBearing:I.minLeftSideBearing,minRightSideBearing:I.minRightSideBearing,xMaxExtent:I.maxLeftSideBearing+(I.xMax-I.xMin),numberOfHMetrics:e.glyphs.length}),ie=Qa.make(e.glyphs.length),V=Cn.make(Object.assign({xAvgCharWidth:Math.round(I.advanceWidthAvg),usFirstCharIndex:o,usLastCharIndex:c,ulUnicodeRange1:h,ulUnicodeRange2:v,ulUnicodeRange3:p,ulUnicodeRange4:g,sTypoAscender:I.ascender,sTypoDescender:I.descender,sTypoLineGap:0,usWinAscent:I.yMax,usWinDescent:Math.abs(I.yMin),ulCodePageRange1:1,sxHeight:fi(e,"xyvw",{yMax:Math.round(I.ascender/2)}).yMax,sCapHeight:fi(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",I).yMax,usDefaultChar:e.hasChar(" ")?32:0,usBreakChar:e.hasChar(" ")?32:0},e.tables.os2)),N=Ya.make(e.glyphs),Se=Ea.make(e.glyphs),Be=e.getEnglishName("fontFamily"),ze=e.getEnglishName("fontSubfamily"),Ke=Be+" "+ze,Je=e.getEnglishName("postScriptName");Je||(Je=Be.replace(/\s/g,"")+"-"+ze);var be={};for(var ke in e.names)be[ke]=e.names[ke];be.uniqueID||(be.uniqueID={en:e.getEnglishName("manufacturer")+":"+Ke}),be.postScriptName||(be.postScriptName={en:Je}),be.preferredFamily||(be.preferredFamily=e.names.fontFamily),be.preferredSubfamily||(be.preferredSubfamily=e.names.fontSubfamily);var Oe=[],Pe=ni.make(be,Oe),Ee=Oe.length>0?Za.make(Oe):void 0,Fe=ai.make(),Ie=Va.make(e.glyphs,{version:e.getEnglishName("version"),fullName:Ke,familyName:Be,weightName:ze,postScriptName:Je,unitsPerEm:e.unitsPerEm,fontBBox:[0,I.yMin,I.ascender,I.advanceWidthMax]}),se=e.metas&&Object.keys(e.metas).length>0?si.make(e.metas):void 0,Le=[J,q,ie,V,Pe,Se,Fe,Ie,N];Ee&&Le.push(Ee),e.tables.gsub&&Le.push(ii.make(e.tables.gsub)),se&&Le.push(se);for(var Gn=li(Le),dc=Gn.encode(),vc=Un(dc),Hn=Gn.fields,Yi=!1,rn=0;rn<Hn.length;rn+=1)if(Hn[rn].name==="head table"){Hn[rn].value.checkSumAdjustment=2981146554-vc,Yi=!0;break}if(!Yi)throw new Error("Could not find head table with checkSum to adjust.");return Gn}var wu={make:li,fontToTable:Fu,computeCheckSum:Un};function On(e,t){for(var r=0,n=e.length-1;r<=n;){var a=r+n>>>1,i=e[a].tag;if(i===t)return a;i<t?r=a+1:n=a-1}return-r-1}function ci(e,t){for(var r=0,n=e.length-1;r<=n;){var a=r+n>>>1,i=e[a];if(i===t)return a;i<t?r=a+1:n=a-1}return-r-1}function hi(e,t){for(var r,n=0,a=e.length-1;n<=a;){var i=n+a>>>1;r=e[i];var s=r.start;if(s===t)return r;s<t?n=i+1:a=i-1}if(n>0)return r=e[n-1],t>r.end?0:r}function mr(e,t){this.font=e,this.tableName=t}mr.prototype={searchTag:On,binSearch:ci,getTable:function(e){var t=this.font.tables[this.tableName];return!t&&e&&(t=this.font.tables[this.tableName]=this.createDefaultTable()),t},getScriptNames:function(){var e=this.getTable();return e?e.scripts.map(function(t){return t.tag}):[]},getDefaultScriptName:function(){var e=this.getTable();if(e){for(var t=!1,r=0;r<e.scripts.length;r++){var n=e.scripts[r].tag;if(n==="DFLT")return n;n==="latn"&&(t=!0)}if(t)return"latn"}},getScriptTable:function(e,t){var r=this.getTable(t);if(r){e=e||"DFLT";var n=r.scripts,a=On(r.scripts,e);if(a>=0)return n[a].script;if(t){var i={tag:e,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return n.splice(-1-a,0,i),i.script}}},getLangSysTable:function(e,t,r){var n=this.getScriptTable(e,r);if(n){if(!t||t==="dflt"||t==="DFLT")return n.defaultLangSys;var a=On(n.langSysRecords,t);if(a>=0)return n.langSysRecords[a].langSys;if(r){var i={tag:t,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return n.langSysRecords.splice(-1-a,0,i),i.langSys}}},getFeatureTable:function(e,t,r,n){var a=this.getLangSysTable(e,t,n);if(a){for(var i,s=a.featureIndexes,u=this.font.tables[this.tableName].features,o=0;o<s.length;o++)if(i=u[s[o]],i.tag===r)return i.feature;if(n){var c=u.length;return G.assert(c===0||r>=u[c-1].tag,"Features must be added in alphabetical order."),i={tag:r,feature:{params:0,lookupListIndexes:[]}},u.push(i),s.push(c),i.feature}}},getLookupTables:function(e,t,r,n,a){var i=this.getFeatureTable(e,t,r,a),s=[];if(i){for(var u,o=i.lookupListIndexes,c=this.font.tables[this.tableName].lookups,h=0;h<o.length;h++)u=c[o[h]],u.lookupType===n&&s.push(u);if(s.length===0&&a){u={lookupType:n,lookupFlag:0,subtables:[],markFilteringSet:void 0};var v=c.length;return c.push(u),o.push(v),[u]}}return s},getGlyphClass:function(e,t){switch(e.format){case 1:return e.startGlyph<=t&&t<e.startGlyph+e.classes.length?e.classes[t-e.startGlyph]:0;case 2:var r=hi(e.ranges,t);return r?r.classId:0}},getCoverageIndex:function(e,t){switch(e.format){case 1:var r=ci(e.glyphs,t);return r>=0?r:-1;case 2:var n=hi(e.ranges,t);return n?n.index+t-n.start:-1}},expandCoverage:function(e){if(e.format===1)return e.glyphs;for(var t=[],r=e.ranges,n=0;n<r.length;n++)for(var a=r[n],i=a.start,s=a.end,u=i;u<=s;u++)t.push(u);return t}};function yr(e){mr.call(this,e,"gpos")}yr.prototype=mr.prototype,yr.prototype.init=function(){var e=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(e)},yr.prototype.getKerningValue=function(e,t,r){for(var n=0;n<e.length;n++)for(var a=e[n].subtables,i=0;i<a.length;i++){var s=a[i],u=this.getCoverageIndex(s.coverage,t);if(!(u<0))switch(s.posFormat){case 1:for(var o=s.pairSets[u],c=0;c<o.length;c++){var h=o[c];if(h.secondGlyph===r)return h.value1&&h.value1.xAdvance||0}break;case 2:var v=this.getGlyphClass(s.classDef1,t),p=this.getGlyphClass(s.classDef2,r),g=s.classRecords[v][p];return g.value1&&g.value1.xAdvance||0}}return 0},yr.prototype.getKerningTables=function(e,t){if(this.font.tables.gpos)return this.getLookupTables(e,t,"kern",2)};function Ve(e){mr.call(this,e,"gsub")}function Cu(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Pn(e,t,r){for(var n=e.subtables,a=0;a<n.length;a++){var i=n[a];if(i.substFormat===t)return i}if(r)return n.push(r),r}Ve.prototype=mr.prototype,Ve.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},Ve.prototype.getSingle=function(e,t,r){for(var n=[],a=this.getLookupTables(t,r,e,1),i=0;i<a.length;i++)for(var s=a[i].subtables,u=0;u<s.length;u++){var o=s[u],c=this.expandCoverage(o.coverage),h=void 0;if(o.substFormat===1){var v=o.deltaGlyphId;for(h=0;h<c.length;h++){var p=c[h];n.push({sub:p,by:p+v})}}else{var g=o.substitute;for(h=0;h<c.length;h++)n.push({sub:c[h],by:g[h]})}}return n},Ve.prototype.getMultiple=function(e,t,r){for(var n=[],a=this.getLookupTables(t,r,e,2),i=0;i<a.length;i++)for(var s=a[i].subtables,u=0;u<s.length;u++){var o=s[u],c=this.expandCoverage(o.coverage),h=void 0;for(h=0;h<c.length;h++){var v=c[h],p=o.sequences[h];n.push({sub:v,by:p})}}return n},Ve.prototype.getAlternates=function(e,t,r){for(var n=[],a=this.getLookupTables(t,r,e,3),i=0;i<a.length;i++)for(var s=a[i].subtables,u=0;u<s.length;u++)for(var o=s[u],c=this.expandCoverage(o.coverage),h=o.alternateSets,v=0;v<c.length;v++)n.push({sub:c[v],by:h[v]});return n},Ve.prototype.getLigatures=function(e,t,r){for(var n=[],a=this.getLookupTables(t,r,e,4),i=0;i<a.length;i++)for(var s=a[i].subtables,u=0;u<s.length;u++)for(var o=s[u],c=this.expandCoverage(o.coverage),h=o.ligatureSets,v=0;v<c.length;v++)for(var p=c[v],g=h[v],k=0;k<g.length;k++){var D=g[k];n.push({sub:[p].concat(D.components),by:D.ligGlyph})}return n},Ve.prototype.addSingle=function(e,t,r,n){var a=this.getLookupTables(r,n,e,1,!0)[0],i=Pn(a,2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});G.assert(i.coverage.format===1,"Single: unable to modify coverage table format "+i.coverage.format);var s=t.sub,u=this.binSearch(i.coverage.glyphs,s);u<0&&(u=-1-u,i.coverage.glyphs.splice(u,0,s),i.substitute.splice(u,0,0)),i.substitute[u]=t.by},Ve.prototype.addMultiple=function(e,t,r,n){G.assert(t.by instanceof Array&&t.by.length>1,'Multiple: "by" must be an array of two or more ids');var a=this.getLookupTables(r,n,e,2,!0)[0],i=Pn(a,1,{substFormat:1,coverage:{format:1,glyphs:[]},sequences:[]});G.assert(i.coverage.format===1,"Multiple: unable to modify coverage table format "+i.coverage.format);var s=t.sub,u=this.binSearch(i.coverage.glyphs,s);u<0&&(u=-1-u,i.coverage.glyphs.splice(u,0,s),i.sequences.splice(u,0,0)),i.sequences[u]=t.by},Ve.prototype.addAlternate=function(e,t,r,n){var a=this.getLookupTables(r,n,e,3,!0)[0],i=Pn(a,1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});G.assert(i.coverage.format===1,"Alternate: unable to modify coverage table format "+i.coverage.format);var s=t.sub,u=this.binSearch(i.coverage.glyphs,s);u<0&&(u=-1-u,i.coverage.glyphs.splice(u,0,s),i.alternateSets.splice(u,0,0)),i.alternateSets[u]=t.by},Ve.prototype.addLigature=function(e,t,r,n){var a=this.getLookupTables(r,n,e,4,!0)[0],i=a.subtables[0];i||(i={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},a.subtables[0]=i),G.assert(i.coverage.format===1,"Ligature: unable to modify coverage table format "+i.coverage.format);var s=t.sub[0],u=t.sub.slice(1),o={ligGlyph:t.by,components:u},c=this.binSearch(i.coverage.glyphs,s);if(c>=0){for(var h=i.ligatureSets[c],v=0;v<h.length;v++)if(Cu(h[v].components,u))return;h.push(o)}else c=-1-c,i.coverage.glyphs.splice(c,0,s),i.ligatureSets.splice(c,0,[o])},Ve.prototype.getFeature=function(e,t,r){if(/ss\d\d/.test(e))return this.getSingle(e,t,r);switch(e){case"aalt":case"salt":return this.getSingle(e,t,r).concat(this.getAlternates(e,t,r));case"dlig":case"liga":case"rlig":return this.getLigatures(e,t,r);case"ccmp":return this.getMultiple(e,t,r).concat(this.getLigatures(e,t,r));case"stch":return this.getMultiple(e,t,r)}},Ve.prototype.add=function(e,t,r,n){if(/ss\d\d/.test(e))return this.addSingle(e,t,r,n);switch(e){case"aalt":case"salt":return typeof t.by=="number"?this.addSingle(e,t,r,n):this.addAlternate(e,t,r,n);case"dlig":case"liga":case"rlig":return this.addLigature(e,t,r,n);case"ccmp":return t.by instanceof Array?this.addMultiple(e,t,r,n):this.addLigature(e,t,r,n)}};function Uu(){return typeof window<"u"}function pi(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;++n)r[n]=e[n];return t}function Ou(e){for(var t=new Buffer(e.byteLength),r=new Uint8Array(e),n=0;n<t.length;++n)t[n]=r[n];return t}function br(e,t){if(!e)throw t}function di(e,t,r,n,a){var i;return(t&n)>0?(i=e.parseByte(),t&a||(i=-i),i=r+i):(t&a)>0?i=r:i=r+e.parseShort(),i}function vi(e,t,r){var n=new A.Parser(t,r);e.numberOfContours=n.parseShort(),e._xMin=n.parseShort(),e._yMin=n.parseShort(),e._xMax=n.parseShort(),e._yMax=n.parseShort();var a,i;if(e.numberOfContours>0){for(var s=e.endPointIndices=[],u=0;u<e.numberOfContours;u+=1)s.push(n.parseUShort());e.instructionLength=n.parseUShort(),e.instructions=[];for(var o=0;o<e.instructionLength;o+=1)e.instructions.push(n.parseByte());var c=s[s.length-1]+1;a=[];for(var h=0;h<c;h+=1)if(i=n.parseByte(),a.push(i),(i&8)>0)for(var v=n.parseByte(),p=0;p<v;p+=1)a.push(i),h+=1;if(G.argument(a.length===c,"Bad flags."),s.length>0){var g=[],k;if(c>0){for(var D=0;D<c;D+=1)i=a[D],k={},k.onCurve=!!(i&1),k.lastPointOfContour=s.indexOf(D)>=0,g.push(k);for(var E=0,L=0;L<c;L+=1)i=a[L],k=g[L],k.x=di(n,i,E,2,16),E=k.x;for(var W=0,I=0;I<c;I+=1)i=a[I],k=g[I],k.y=di(n,i,W,4,32),W=k.y}e.points=g}else e.points=[]}else if(e.numberOfContours===0)e.points=[];else{e.isComposite=!0,e.points=[],e.components=[];for(var J=!0;J;){a=n.parseUShort();var q={glyphIndex:n.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(a&1)>0?(a&2)>0?(q.dx=n.parseShort(),q.dy=n.parseShort()):q.matchedPoints=[n.parseUShort(),n.parseUShort()]:(a&2)>0?(q.dx=n.parseChar(),q.dy=n.parseChar()):q.matchedPoints=[n.parseByte(),n.parseByte()],(a&8)>0?q.xScale=q.yScale=n.parseF2Dot14():(a&64)>0?(q.xScale=n.parseF2Dot14(),q.yScale=n.parseF2Dot14()):(a&128)>0&&(q.xScale=n.parseF2Dot14(),q.scale01=n.parseF2Dot14(),q.scale10=n.parseF2Dot14(),q.yScale=n.parseF2Dot14()),e.components.push(q),J=!!(a&32)}if(a&256){e.instructionLength=n.parseUShort(),e.instructions=[];for(var ie=0;ie<e.instructionLength;ie+=1)e.instructions.push(n.parseByte())}}}function En(e,t){for(var r=[],n=0;n<e.length;n+=1){var a=e[n],i={x:t.xScale*a.x+t.scale01*a.y+t.dx,y:t.scale10*a.x+t.yScale*a.y+t.dy,onCurve:a.onCurve,lastPointOfContour:a.lastPointOfContour};r.push(i)}return r}function Pu(e){for(var t=[],r=[],n=0;n<e.length;n+=1){var a=e[n];r.push(a),a.lastPointOfContour&&(t.push(r),r=[])}return G.argument(r.length===0,"There are still points left in the current contour."),t}function gi(e){var t=new he;if(!e)return t;for(var r=Pu(e),n=0;n<r.length;++n){var a=r[n],i=null,s=a[a.length-1],u=a[0];if(s.onCurve)t.moveTo(s.x,s.y);else if(u.onCurve)t.moveTo(u.x,u.y);else{var o={x:(s.x+u.x)*.5,y:(s.y+u.y)*.5};t.moveTo(o.x,o.y)}for(var c=0;c<a.length;++c)if(i=s,s=u,u=a[(c+1)%a.length],s.onCurve)t.lineTo(s.x,s.y);else{var h=i,v=u;i.onCurve||(h={x:(s.x+i.x)*.5,y:(s.y+i.y)*.5}),u.onCurve||(v={x:(s.x+u.x)*.5,y:(s.y+u.y)*.5}),t.quadraticCurveTo(s.x,s.y,v.x,v.y)}t.closePath()}return t}function mi(e,t){if(t.isComposite)for(var r=0;r<t.components.length;r+=1){var n=t.components[r],a=e.get(n.glyphIndex);if(a.getPath(),a.points){var i=void 0;if(n.matchedPoints===void 0)i=En(a.points,n);else{if(n.matchedPoints[0]>t.points.length-1||n.matchedPoints[1]>a.points.length-1)throw Error("Matched points out of range in "+t.name);var s=t.points[n.matchedPoints[0]],u=a.points[n.matchedPoints[1]],o={xScale:n.xScale,scale01:n.scale01,scale10:n.scale10,yScale:n.yScale,dx:0,dy:0};u=En([u],o)[0],o.dx=s.x-u.x,o.dy=s.y-u.y,i=En(a.points,o)}t.points=t.points.concat(i)}}return gi(t.points)}function Eu(e,t,r,n){for(var a=new ut.GlyphSet(n),i=0;i<r.length-1;i+=1){var s=r[i],u=r[i+1];s!==u?a.push(i,ut.ttfGlyphLoader(n,i,vi,e,t+s,mi)):a.push(i,ut.glyphLoader(n,i))}return a}function Lu(e,t,r,n){var a=new ut.GlyphSet(n);return n._push=function(i){var s=r[i],u=r[i+1];s!==u?a.push(i,ut.ttfGlyphLoader(n,i,vi,e,t+s,mi)):a.push(i,ut.glyphLoader(n,i))},a}function Du(e,t,r,n,a){return a.lowMemory?Lu(e,t,r,n):Eu(e,t,r,n)}var yi={getPath:gi,parse:Du},bi,Nt,xi,Ln;function Si(e){this.font=e,this.getCommands=function(t){return yi.getPath(t).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function Ru(e){return e}function Ti(e){return Math.sign(e)*Math.round(Math.abs(e))}function Mu(e){return Math.sign(e)*Math.round(Math.abs(e*2))/2}function Iu(e){return Math.sign(e)*(Math.round(Math.abs(e)+.5)-.5)}function Au(e){return Math.sign(e)*Math.ceil(Math.abs(e))}function Bu(e){return Math.sign(e)*Math.floor(Math.abs(e))}var ki=function(e){var t=this.srPeriod,r=this.srPhase,n=this.srThreshold,a=1;return e<0&&(e=-e,a=-1),e+=n-r,e=Math.trunc(e/t)*t,e+=r,e<0?r*a:e*a},lt={x:1,y:0,axis:"x",distance:function(e,t,r,n){return(r?e.xo:e.x)-(n?t.xo:t.x)},interpolate:function(e,t,r,n){var a,i,s,u,o,c,h;if(!n||n===this){if(a=e.xo-t.xo,i=e.xo-r.xo,o=t.x-t.xo,c=r.x-r.xo,s=Math.abs(a),u=Math.abs(i),h=s+u,h===0){e.x=e.xo+(o+c)/2;return}e.x=e.xo+(o*u+c*s)/h;return}if(a=n.distance(e,t,!0,!0),i=n.distance(e,r,!0,!0),o=n.distance(t,t,!1,!0),c=n.distance(r,r,!1,!0),s=Math.abs(a),u=Math.abs(i),h=s+u,h===0){lt.setRelative(e,e,(o+c)/2,n,!0);return}lt.setRelative(e,e,(o*u+c*s)/h,n,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(e,t,r,n,a){if(!n||n===this){e.x=(a?t.xo:t.x)+r;return}var i=a?t.xo:t.x,s=a?t.yo:t.y,u=i+r*n.x,o=s+r*n.y;e.x=u+(e.y-o)/n.normalSlope},slope:0,touch:function(e){e.xTouched=!0},touched:function(e){return e.xTouched},untouch:function(e){e.xTouched=!1}},ct={x:0,y:1,axis:"y",distance:function(e,t,r,n){return(r?e.yo:e.y)-(n?t.yo:t.y)},interpolate:function(e,t,r,n){var a,i,s,u,o,c,h;if(!n||n===this){if(a=e.yo-t.yo,i=e.yo-r.yo,o=t.y-t.yo,c=r.y-r.yo,s=Math.abs(a),u=Math.abs(i),h=s+u,h===0){e.y=e.yo+(o+c)/2;return}e.y=e.yo+(o*u+c*s)/h;return}if(a=n.distance(e,t,!0,!0),i=n.distance(e,r,!0,!0),o=n.distance(t,t,!1,!0),c=n.distance(r,r,!1,!0),s=Math.abs(a),u=Math.abs(i),h=s+u,h===0){ct.setRelative(e,e,(o+c)/2,n,!0);return}ct.setRelative(e,e,(o*u+c*s)/h,n,!0)},normalSlope:0,setRelative:function(e,t,r,n,a){if(!n||n===this){e.y=(a?t.yo:t.y)+r;return}var i=a?t.xo:t.x,s=a?t.yo:t.y,u=i+r*n.x,o=s+r*n.y;e.y=o+n.normalSlope*(e.x-u)},slope:Number.POSITIVE_INFINITY,touch:function(e){e.yTouched=!0},touched:function(e){return e.yTouched},untouch:function(e){e.yTouched=!1}};Object.freeze(lt),Object.freeze(ct);function xr(e,t){this.x=e,this.y=t,this.axis=void 0,this.slope=t/e,this.normalSlope=-e/t,Object.freeze(this)}xr.prototype.distance=function(e,t,r,n){return this.x*lt.distance(e,t,r,n)+this.y*ct.distance(e,t,r,n)},xr.prototype.interpolate=function(e,t,r,n){var a,i,s,u,o,c,h;if(s=n.distance(e,t,!0,!0),u=n.distance(e,r,!0,!0),a=n.distance(t,t,!1,!0),i=n.distance(r,r,!1,!0),o=Math.abs(s),c=Math.abs(u),h=o+c,h===0){this.setRelative(e,e,(a+i)/2,n,!0);return}this.setRelative(e,e,(a*c+i*o)/h,n,!0)},xr.prototype.setRelative=function(e,t,r,n,a){n=n||this;var i=a?t.xo:t.x,s=a?t.yo:t.y,u=i+r*n.x,o=s+r*n.y,c=n.normalSlope,h=this.slope,v=e.x,p=e.y;e.x=(h*v-c*u+o-p)/(h-c),e.y=h*(e.x-v)+p},xr.prototype.touch=function(e){e.xTouched=!0,e.yTouched=!0};function Sr(e,t){var r=Math.sqrt(e*e+t*t);return e/=r,t/=r,e===1&&t===0?lt:e===0&&t===1?ct:new xr(e,t)}function ht(e,t,r,n){this.x=this.xo=Math.round(e*64)/64,this.y=this.yo=Math.round(t*64)/64,this.lastPointOfContour=r,this.onCurve=n,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}ht.prototype.nextTouched=function(e){for(var t=this.nextPointOnContour;!e.touched(t)&&t!==this;)t=t.nextPointOnContour;return t},ht.prototype.prevTouched=function(e){for(var t=this.prevPointOnContour;!e.touched(t)&&t!==this;)t=t.prevPointOnContour;return t};var Tr=Object.freeze(new ht(0,0)),Nu={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function xt(e,t){switch(this.env=e,this.stack=[],this.prog=t,e){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=lt,this.round=Ti}}Si.prototype.exec=function(e,t){if(typeof t!="number")throw new Error("Point size is not a number!");if(!(this._errorState>2)){var r=this.font,n=this._prepState;if(!n||n.ppem!==t){var a=this._fpgmState;if(!a){xt.prototype=Nu,a=this._fpgmState=new xt("fpgm",r.tables.fpgm),a.funcs=[],a.font=r,l.DEBUG&&(console.log("---EXEC FPGM---"),a.step=-1);try{Nt(a)}catch(c){console.log("Hinting error in FPGM:"+c),this._errorState=3;return}}xt.prototype=a,n=this._prepState=new xt("prep",r.tables.prep),n.ppem=t;var i=r.tables.cvt;if(i)for(var s=n.cvt=new Array(i.length),u=t/r.unitsPerEm,o=0;o<i.length;o++)s[o]=i[o]*u;else n.cvt=[];l.DEBUG&&(console.log("---EXEC PREP---"),n.step=-1);try{Nt(n)}catch(c){this._errorState<2&&console.log("Hinting error in PREP:"+c),this._errorState=2}}if(!(this._errorState>1))try{return xi(e,n)}catch(c){this._errorState<1&&(console.log("Hinting error:"+c),console.log("Note: further hinting errors are silenced")),this._errorState=1;return}}},xi=function(e,t){var r=t.ppem/t.font.unitsPerEm,n=r,a=e.components,i,s,u;if(xt.prototype=t,!a)u=new xt("glyf",e.instructions),l.DEBUG&&(console.log("---EXEC GLYPH---"),u.step=-1),Ln(e,u,r,n),s=u.gZone;else{var o=t.font;s=[],i=[];for(var c=0;c<a.length;c++){var h=a[c],v=o.glyphs.get(h.glyphIndex);u=new xt("glyf",v.instructions),l.DEBUG&&(console.log("---EXEC COMP "+c+"---"),u.step=-1),Ln(v,u,r,n);for(var p=Math.round(h.dx*r),g=Math.round(h.dy*n),k=u.gZone,D=u.contours,E=0;E<k.length;E++){var L=k[E];L.xTouched=L.yTouched=!1,L.xo=L.x=L.x+p,L.yo=L.y=L.y+g}var W=s.length;s.push.apply(s,k);for(var I=0;I<D.length;I++)i.push(D[I]+W)}e.instructions&&!u.inhibitGridFit&&(u=new xt("glyf",e.instructions),u.gZone=u.z0=u.z1=u.z2=s,u.contours=i,s.push(new ht(0,0),new ht(Math.round(e.advanceWidth*r),0)),l.DEBUG&&(console.log("---EXEC COMPOSITE---"),u.step=-1),Nt(u),s.length-=2)}return s},Ln=function(e,t,r,n){for(var a=e.points||[],i=a.length,s=t.gZone=t.z0=t.z1=t.z2=[],u=t.contours=[],o,c=0;c<i;c++)o=a[c],s[c]=new ht(o.x*r,o.y*n,o.lastPointOfContour,o.onCurve);for(var h,v,p=0;p<i;p++)o=s[p],h||(h=o,u.push(p)),o.lastPointOfContour?(o.nextPointOnContour=h,h.prevPointOnContour=o,h=void 0):(v=s[p+1],o.nextPointOnContour=v,v.prevPointOnContour=o);if(!t.inhibitGridFit){if(l.DEBUG){console.log("PROCESSING GLYPH",t.stack);for(var g=0;g<i;g++)console.log(g,s[g].x,s[g].y)}if(s.push(new ht(0,0),new ht(Math.round(e.advanceWidth*r),0)),Nt(t),s.length-=2,l.DEBUG){console.log("FINISHED GLYPH",t.stack);for(var k=0;k<i;k++)console.log(k,s[k].x,s[k].y)}}},Nt=function(e){var t=e.prog;if(t){var r=t.length,n;for(e.ip=0;e.ip<r;e.ip++){if(l.DEBUG&&e.step++,n=bi[t[e.ip]],!n)throw new Error("unknown instruction: 0x"+Number(t[e.ip]).toString(16));n(e)}}};function Kr(e){for(var t=e.tZone=new Array(e.gZone.length),r=0;r<t.length;r++)t[r]=new ht(0,0)}function Fi(e,t){var r=e.prog,n=e.ip,a=1,i;do if(i=r[++n],i===88)a++;else if(i===89)a--;else if(i===64)n+=r[n+1]+1;else if(i===65)n+=2*r[n+1]+1;else if(i>=176&&i<=183)n+=i-176+1;else if(i>=184&&i<=191)n+=(i-184+1)*2;else if(t&&a===1&&i===27)break;while(a>0);e.ip=n}function wi(e,t){l.DEBUG&&console.log(t.step,"SVTCA["+e.axis+"]"),t.fv=t.pv=t.dpv=e}function Ci(e,t){l.DEBUG&&console.log(t.step,"SPVTCA["+e.axis+"]"),t.pv=t.dpv=e}function Ui(e,t){l.DEBUG&&console.log(t.step,"SFVTCA["+e.axis+"]"),t.fv=e}function Oi(e,t){var r=t.stack,n=r.pop(),a=r.pop(),i=t.z2[n],s=t.z1[a];l.DEBUG&&console.log("SPVTL["+e+"]",n,a);var u,o;e?(u=i.y-s.y,o=s.x-i.x):(u=s.x-i.x,o=s.y-i.y),t.pv=t.dpv=Sr(u,o)}function Pi(e,t){var r=t.stack,n=r.pop(),a=r.pop(),i=t.z2[n],s=t.z1[a];l.DEBUG&&console.log("SFVTL["+e+"]",n,a);var u,o;e?(u=i.y-s.y,o=s.x-i.x):(u=s.x-i.x,o=s.y-i.y),t.fv=Sr(u,o)}function _u(e){var t=e.stack,r=t.pop(),n=t.pop();l.DEBUG&&console.log(e.step,"SPVFS[]",r,n),e.pv=e.dpv=Sr(n,r)}function Gu(e){var t=e.stack,r=t.pop(),n=t.pop();l.DEBUG&&console.log(e.step,"SPVFS[]",r,n),e.fv=Sr(n,r)}function Hu(e){var t=e.stack,r=e.pv;l.DEBUG&&console.log(e.step,"GPV[]"),t.push(r.x*16384),t.push(r.y*16384)}function zu(e){var t=e.stack,r=e.fv;l.DEBUG&&console.log(e.step,"GFV[]"),t.push(r.x*16384),t.push(r.y*16384)}function Wu(e){e.fv=e.pv,l.DEBUG&&console.log(e.step,"SFVTPV[]")}function qu(e){var t=e.stack,r=t.pop(),n=t.pop(),a=t.pop(),i=t.pop(),s=t.pop(),u=e.z0,o=e.z1,c=u[r],h=u[n],v=o[a],p=o[i],g=e.z2[s];l.DEBUG&&console.log("ISECT[], ",r,n,a,i,s);var k=c.x,D=c.y,E=h.x,L=h.y,W=v.x,I=v.y,J=p.x,q=p.y,ie=(k-E)*(I-q)-(D-L)*(W-J),V=k*L-D*E,N=W*q-I*J;g.x=(V*(W-J)-N*(k-E))/ie,g.y=(V*(I-q)-N*(D-L))/ie}function Vu(e){e.rp0=e.stack.pop(),l.DEBUG&&console.log(e.step,"SRP0[]",e.rp0)}function Xu(e){e.rp1=e.stack.pop(),l.DEBUG&&console.log(e.step,"SRP1[]",e.rp1)}function ju(e){e.rp2=e.stack.pop(),l.DEBUG&&console.log(e.step,"SRP2[]",e.rp2)}function Yu(e){var t=e.stack.pop();switch(l.DEBUG&&console.log(e.step,"SZP0[]",t),e.zp0=t,t){case 0:e.tZone||Kr(e),e.z0=e.tZone;break;case 1:e.z0=e.gZone;break;default:throw new Error("Invalid zone pointer")}}function Zu(e){var t=e.stack.pop();switch(l.DEBUG&&console.log(e.step,"SZP1[]",t),e.zp1=t,t){case 0:e.tZone||Kr(e),e.z1=e.tZone;break;case 1:e.z1=e.gZone;break;default:throw new Error("Invalid zone pointer")}}function Qu(e){var t=e.stack.pop();switch(l.DEBUG&&console.log(e.step,"SZP2[]",t),e.zp2=t,t){case 0:e.tZone||Kr(e),e.z2=e.tZone;break;case 1:e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}}function Ku(e){var t=e.stack.pop();switch(l.DEBUG&&console.log(e.step,"SZPS[]",t),e.zp0=e.zp1=e.zp2=t,t){case 0:e.tZone||Kr(e),e.z0=e.z1=e.z2=e.tZone;break;case 1:e.z0=e.z1=e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}}function Ju(e){e.loop=e.stack.pop(),l.DEBUG&&console.log(e.step,"SLOOP[]",e.loop)}function $u(e){l.DEBUG&&console.log(e.step,"RTG[]"),e.round=Ti}function el(e){l.DEBUG&&console.log(e.step,"RTHG[]"),e.round=Iu}function tl(e){var t=e.stack.pop();l.DEBUG&&console.log(e.step,"SMD[]",t),e.minDis=t/64}function rl(e){l.DEBUG&&console.log(e.step,"ELSE[]"),Fi(e,!1)}function nl(e){var t=e.stack.pop();l.DEBUG&&console.log(e.step,"JMPR[]",t),e.ip+=t-1}function al(e){var t=e.stack.pop();l.DEBUG&&console.log(e.step,"SCVTCI[]",t),e.cvCutIn=t/64}function il(e){var t=e.stack;l.DEBUG&&console.log(e.step,"DUP[]"),t.push(t[t.length-1])}function Dn(e){l.DEBUG&&console.log(e.step,"POP[]"),e.stack.pop()}function sl(e){l.DEBUG&&console.log(e.step,"CLEAR[]"),e.stack.length=0}function ol(e){var t=e.stack,r=t.pop(),n=t.pop();l.DEBUG&&console.log(e.step,"SWAP[]"),t.push(r),t.push(n)}function ul(e){var t=e.stack;l.DEBUG&&console.log(e.step,"DEPTH[]"),t.push(t.length)}function ll(e){var t=e.stack,r=t.pop(),n=t.pop();l.DEBUG&&console.log(e.step,"LOOPCALL[]",r,n);var a=e.ip,i=e.prog;e.prog=e.funcs[r];for(var s=0;s<n;s++)Nt(e),l.DEBUG&&console.log(++e.step,s+1<n?"next loopcall":"done loopcall",s);e.ip=a,e.prog=i}function fl(e){var t=e.stack.pop();l.DEBUG&&console.log(e.step,"CALL[]",t);var r=e.ip,n=e.prog;e.prog=e.funcs[t],Nt(e),e.ip=r,e.prog=n,l.DEBUG&&console.log(++e.step,"returning from",t)}function cl(e){var t=e.stack,r=t.pop();l.DEBUG&&console.log(e.step,"CINDEX[]",r),t.push(t[t.length-r])}function hl(e){var t=e.stack,r=t.pop();l.DEBUG&&console.log(e.step,"MINDEX[]",r),t.push(t.splice(t.length-r,1)[0])}function pl(e){if(e.env!=="fpgm")throw new Error("FDEF not allowed here");var t=e.stack,r=e.prog,n=e.ip,a=t.pop(),i=n;for(l.DEBUG&&console.log(e.step,"FDEF[]",a);r[++n]!==45;);e.ip=n,e.funcs[a]=r.slice(i+1,n)}function Ei(e,t){var r=t.stack.pop(),n=t.z0[r],a=t.fv,i=t.pv;l.DEBUG&&console.log(t.step,"MDAP["+e+"]",r);var s=i.distance(n,Tr);e&&(s=t.round(s)),a.setRelative(n,Tr,s,i),a.touch(n),t.rp0=t.rp1=r}function Li(e,t){var r=t.z2,n=r.length-2,a,i,s;l.DEBUG&&console.log(t.step,"IUP["+e.axis+"]");for(var u=0;u<n;u++)a=r[u],!e.touched(a)&&(i=a.prevTouched(e),i!==a&&(s=a.nextTouched(e),i===s&&e.setRelative(a,a,e.distance(i,i,!1,!0),e,!0),e.interpolate(a,i,s,e)))}function Di(e,t){for(var r=t.stack,n=e?t.rp1:t.rp2,a=(e?t.z0:t.z1)[n],i=t.fv,s=t.pv,u=t.loop,o=t.z2;u--;){var c=r.pop(),h=o[c],v=s.distance(a,a,!1,!0);i.setRelative(h,h,v,s),i.touch(h),l.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-u)+": ":"")+"SHP["+(e?"rp1":"rp2")+"]",c)}t.loop=1}function Ri(e,t){var r=t.stack,n=e?t.rp1:t.rp2,a=(e?t.z0:t.z1)[n],i=t.fv,s=t.pv,u=r.pop(),o=t.z2[t.contours[u]],c=o;l.DEBUG&&console.log(t.step,"SHC["+e+"]",u);var h=s.distance(a,a,!1,!0);do c!==a&&i.setRelative(c,c,h,s),c=c.nextPointOnContour;while(c!==o)}function Mi(e,t){var r=t.stack,n=e?t.rp1:t.rp2,a=(e?t.z0:t.z1)[n],i=t.fv,s=t.pv,u=r.pop();l.DEBUG&&console.log(t.step,"SHZ["+e+"]",u);var o;switch(u){case 0:o=t.tZone;break;case 1:o=t.gZone;break;default:throw new Error("Invalid zone")}for(var c,h=s.distance(a,a,!1,!0),v=o.length-2,p=0;p<v;p++)c=o[p],i.setRelative(c,c,h,s)}function dl(e){for(var t=e.stack,r=e.loop,n=e.fv,a=t.pop()/64,i=e.z2;r--;){var s=t.pop(),u=i[s];l.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-r)+": ":"")+"SHPIX[]",s,a),n.setRelative(u,u,a),n.touch(u)}e.loop=1}function vl(e){for(var t=e.stack,r=e.rp1,n=e.rp2,a=e.loop,i=e.z0[r],s=e.z1[n],u=e.fv,o=e.dpv,c=e.z2;a--;){var h=t.pop(),v=c[h];l.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-a)+": ":"")+"IP[]",h,r,"<->",n),u.interpolate(v,i,s,o),u.touch(v)}e.loop=1}function Ii(e,t){var r=t.stack,n=r.pop()/64,a=r.pop(),i=t.z1[a],s=t.z0[t.rp0],u=t.fv,o=t.pv;u.setRelative(i,s,n,o),u.touch(i),l.DEBUG&&console.log(t.step,"MSIRP["+e+"]",n,a),t.rp1=t.rp0,t.rp2=a,e&&(t.rp0=a)}function gl(e){for(var t=e.stack,r=e.rp0,n=e.z0[r],a=e.loop,i=e.fv,s=e.pv,u=e.z1;a--;){var o=t.pop(),c=u[o];l.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-a)+": ":"")+"ALIGNRP[]",o),i.setRelative(c,n,0,s),i.touch(c)}e.loop=1}function ml(e){l.DEBUG&&console.log(e.step,"RTDG[]"),e.round=Mu}function Ai(e,t){var r=t.stack,n=r.pop(),a=r.pop(),i=t.z0[a],s=t.fv,u=t.pv,o=t.cvt[n];l.DEBUG&&console.log(t.step,"MIAP["+e+"]",n,"(",o,")",a);var c=u.distance(i,Tr);e&&(Math.abs(c-o)<t.cvCutIn&&(c=o),c=t.round(c)),s.setRelative(i,Tr,c,u),t.zp0===0&&(i.xo=i.x,i.yo=i.y),s.touch(i),t.rp0=t.rp1=a}function yl(e){var t=e.prog,r=e.ip,n=e.stack,a=t[++r];l.DEBUG&&console.log(e.step,"NPUSHB[]",a);for(var i=0;i<a;i++)n.push(t[++r]);e.ip=r}function bl(e){var t=e.ip,r=e.prog,n=e.stack,a=r[++t];l.DEBUG&&console.log(e.step,"NPUSHW[]",a);for(var i=0;i<a;i++){var s=r[++t]<<8|r[++t];s&32768&&(s=-((s^65535)+1)),n.push(s)}e.ip=t}function xl(e){var t=e.stack,r=e.store;r||(r=e.store=[]);var n=t.pop(),a=t.pop();l.DEBUG&&console.log(e.step,"WS",n,a),r[a]=n}function Sl(e){var t=e.stack,r=e.store,n=t.pop();l.DEBUG&&console.log(e.step,"RS",n);var a=r&&r[n]||0;t.push(a)}function Tl(e){var t=e.stack,r=t.pop(),n=t.pop();l.DEBUG&&console.log(e.step,"WCVTP",r,n),e.cvt[n]=r/64}function kl(e){var t=e.stack,r=t.pop();l.DEBUG&&console.log(e.step,"RCVT",r),t.push(e.cvt[r]*64)}function Bi(e,t){var r=t.stack,n=r.pop(),a=t.z2[n];l.DEBUG&&console.log(t.step,"GC["+e+"]",n),r.push(t.dpv.distance(a,Tr,e,!1)*64)}function Ni(e,t){var r=t.stack,n=r.pop(),a=r.pop(),i=t.z1[n],s=t.z0[a],u=t.dpv.distance(s,i,e,e);l.DEBUG&&console.log(t.step,"MD["+e+"]",n,a,"->",u),t.stack.push(Math.round(u*64))}function Fl(e){l.DEBUG&&console.log(e.step,"MPPEM[]"),e.stack.push(e.ppem)}function wl(e){l.DEBUG&&console.log(e.step,"FLIPON[]"),e.autoFlip=!0}function Cl(e){var t=e.stack,r=t.pop(),n=t.pop();l.DEBUG&&console.log(e.step,"LT[]",r,n),t.push(n<r?1:0)}function Ul(e){var t=e.stack,r=t.pop(),n=t.pop();l.DEBUG&&console.log(e.step,"LTEQ[]",r,n),t.push(n<=r?1:0)}function Ol(e){var t=e.stack,r=t.pop(),n=t.pop();l.DEBUG&&console.log(e.step,"GT[]",r,n),t.push(n>r?1:0)}function Pl(e){var t=e.stack,r=t.pop(),n=t.pop();l.DEBUG&&console.log(e.step,"GTEQ[]",r,n),t.push(n>=r?1:0)}function El(e){var t=e.stack,r=t.pop(),n=t.pop();l.DEBUG&&console.log(e.step,"EQ[]",r,n),t.push(r===n?1:0)}function Ll(e){var t=e.stack,r=t.pop(),n=t.pop();l.DEBUG&&console.log(e.step,"NEQ[]",r,n),t.push(r!==n?1:0)}function Dl(e){var t=e.stack,r=t.pop();l.DEBUG&&console.log(e.step,"ODD[]",r),t.push(Math.trunc(r)%2?1:0)}function Rl(e){var t=e.stack,r=t.pop();l.DEBUG&&console.log(e.step,"EVEN[]",r),t.push(Math.trunc(r)%2?0:1)}function Ml(e){var t=e.stack.pop();l.DEBUG&&console.log(e.step,"IF[]",t),t||(Fi(e,!0),l.DEBUG&&console.log(e.step,"EIF[]"))}function Il(e){l.DEBUG&&console.log(e.step,"EIF[]")}function Al(e){var t=e.stack,r=t.pop(),n=t.pop();l.DEBUG&&console.log(e.step,"AND[]",r,n),t.push(r&&n?1:0)}function Bl(e){var t=e.stack,r=t.pop(),n=t.pop();l.DEBUG&&console.log(e.step,"OR[]",r,n),t.push(r||n?1:0)}function Nl(e){var t=e.stack,r=t.pop();l.DEBUG&&console.log(e.step,"NOT[]",r),t.push(r?0:1)}function Rn(e,t){var r=t.stack,n=r.pop(),a=t.fv,i=t.pv,s=t.ppem,u=t.deltaBase+(e-1)*16,o=t.deltaShift,c=t.z0;l.DEBUG&&console.log(t.step,"DELTAP["+e+"]",n,r);for(var h=0;h<n;h++){var v=r.pop(),p=r.pop(),g=u+((p&240)>>4);if(g===s){var k=(p&15)-8;k>=0&&k++,l.DEBUG&&console.log(t.step,"DELTAPFIX",v,"by",k*o);var D=c[v];a.setRelative(D,D,k*o,i)}}}function _l(e){var t=e.stack,r=t.pop();l.DEBUG&&console.log(e.step,"SDB[]",r),e.deltaBase=r}function Gl(e){var t=e.stack,r=t.pop();l.DEBUG&&console.log(e.step,"SDS[]",r),e.deltaShift=Math.pow(.5,r)}function Hl(e){var t=e.stack,r=t.pop(),n=t.pop();l.DEBUG&&console.log(e.step,"ADD[]",r,n),t.push(n+r)}function zl(e){var t=e.stack,r=t.pop(),n=t.pop();l.DEBUG&&console.log(e.step,"SUB[]",r,n),t.push(n-r)}function Wl(e){var t=e.stack,r=t.pop(),n=t.pop();l.DEBUG&&console.log(e.step,"DIV[]",r,n),t.push(n*64/r)}function ql(e){var t=e.stack,r=t.pop(),n=t.pop();l.DEBUG&&console.log(e.step,"MUL[]",r,n),t.push(n*r/64)}function Vl(e){var t=e.stack,r=t.pop();l.DEBUG&&console.log(e.step,"ABS[]",r),t.push(Math.abs(r))}function Xl(e){var t=e.stack,r=t.pop();l.DEBUG&&console.log(e.step,"NEG[]",r),t.push(-r)}function jl(e){var t=e.stack,r=t.pop();l.DEBUG&&console.log(e.step,"FLOOR[]",r),t.push(Math.floor(r/64)*64)}function Yl(e){var t=e.stack,r=t.pop();l.DEBUG&&console.log(e.step,"CEILING[]",r),t.push(Math.ceil(r/64)*64)}function Jr(e,t){var r=t.stack,n=r.pop();l.DEBUG&&console.log(t.step,"ROUND[]"),r.push(t.round(n/64)*64)}function Zl(e){var t=e.stack,r=t.pop(),n=t.pop();l.DEBUG&&console.log(e.step,"WCVTF[]",r,n),e.cvt[n]=r*e.ppem/e.font.unitsPerEm}function Mn(e,t){var r=t.stack,n=r.pop(),a=t.ppem,i=t.deltaBase+(e-1)*16,s=t.deltaShift;l.DEBUG&&console.log(t.step,"DELTAC["+e+"]",n,r);for(var u=0;u<n;u++){var o=r.pop(),c=r.pop(),h=i+((c&240)>>4);if(h===a){var v=(c&15)-8;v>=0&&v++;var p=v*s;l.DEBUG&&console.log(t.step,"DELTACFIX",o,"by",p),t.cvt[o]+=p}}}function Ql(e){var t=e.stack.pop();l.DEBUG&&console.log(e.step,"SROUND[]",t),e.round=ki;var r;switch(t&192){case 0:r=.5;break;case 64:r=1;break;case 128:r=2;break;default:throw new Error("invalid SROUND value")}switch(e.srPeriod=r,t&48){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*r;break;case 32:e.srPhase=.5*r;break;case 48:e.srPhase=.75*r;break;default:throw new Error("invalid SROUND value")}t&=15,t===0?e.srThreshold=0:e.srThreshold=(t/8-.5)*r}function Kl(e){var t=e.stack.pop();l.DEBUG&&console.log(e.step,"S45ROUND[]",t),e.round=ki;var r;switch(t&192){case 0:r=Math.sqrt(2)/2;break;case 64:r=Math.sqrt(2);break;case 128:r=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(e.srPeriod=r,t&48){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*r;break;case 32:e.srPhase=.5*r;break;case 48:e.srPhase=.75*r;break;default:throw new Error("invalid S45ROUND value")}t&=15,t===0?e.srThreshold=0:e.srThreshold=(t/8-.5)*r}function Jl(e){l.DEBUG&&console.log(e.step,"ROFF[]"),e.round=Ru}function $l(e){l.DEBUG&&console.log(e.step,"RUTG[]"),e.round=Au}function ef(e){l.DEBUG&&console.log(e.step,"RDTG[]"),e.round=Bu}function tf(e){var t=e.stack.pop();l.DEBUG&&console.log(e.step,"SCANCTRL[]",t)}function _i(e,t){var r=t.stack,n=r.pop(),a=r.pop(),i=t.z2[n],s=t.z1[a];l.DEBUG&&console.log(t.step,"SDPVTL["+e+"]",n,a);var u,o;e?(u=i.y-s.y,o=s.x-i.x):(u=s.x-i.x,o=s.y-i.y),t.dpv=Sr(u,o)}function rf(e){var t=e.stack,r=t.pop(),n=0;l.DEBUG&&console.log(e.step,"GETINFO[]",r),r&1&&(n=35),r&32&&(n|=4096),t.push(n)}function nf(e){var t=e.stack,r=t.pop(),n=t.pop(),a=t.pop();l.DEBUG&&console.log(e.step,"ROLL[]"),t.push(n),t.push(r),t.push(a)}function af(e){var t=e.stack,r=t.pop(),n=t.pop();l.DEBUG&&console.log(e.step,"MAX[]",r,n),t.push(Math.max(n,r))}function sf(e){var t=e.stack,r=t.pop(),n=t.pop();l.DEBUG&&console.log(e.step,"MIN[]",r,n),t.push(Math.min(n,r))}function of(e){var t=e.stack.pop();l.DEBUG&&console.log(e.step,"SCANTYPE[]",t)}function uf(e){var t=e.stack.pop(),r=e.stack.pop();switch(l.DEBUG&&console.log(e.step,"INSTCTRL[]",t,r),t){case 1:e.inhibitGridFit=!!r;return;case 2:e.ignoreCvt=!!r;return;default:throw new Error("invalid INSTCTRL[] selector")}}function St(e,t){var r=t.stack,n=t.prog,a=t.ip;l.DEBUG&&console.log(t.step,"PUSHB["+e+"]");for(var i=0;i<e;i++)r.push(n[++a]);t.ip=a}function Tt(e,t){var r=t.ip,n=t.prog,a=t.stack;l.DEBUG&&console.log(t.ip,"PUSHW["+e+"]");for(var i=0;i<e;i++){var s=n[++r]<<8|n[++r];s&32768&&(s=-((s^65535)+1)),a.push(s)}t.ip=r}function B(e,t,r,n,a,i){var s=i.stack,u=e&&s.pop(),o=s.pop(),c=i.rp0,h=i.z0[c],v=i.z1[o],p=i.minDis,g=i.fv,k=i.dpv,D,E,L,W;E=D=k.distance(v,h,!0,!0),L=E>=0?1:-1,E=Math.abs(E),e&&(W=i.cvt[u],n&&Math.abs(E-W)<i.cvCutIn&&(E=W)),r&&E<p&&(E=p),n&&(E=i.round(E)),g.setRelative(v,h,L*E,k),g.touch(v),l.DEBUG&&console.log(i.step,(e?"MIRP[":"MDRP[")+(t?"M":"m")+(r?">":"_")+(n?"R":"_")+(a===0?"Gr":a===1?"Bl":a===2?"Wh":"")+"]",e?u+"("+i.cvt[u]+","+W+")":"",o,"(d =",D,"->",L*E,")"),i.rp1=i.rp0,i.rp2=o,t&&(i.rp0=o)}bi=[wi.bind(void 0,ct),wi.bind(void 0,lt),Ci.bind(void 0,ct),Ci.bind(void 0,lt),Ui.bind(void 0,ct),Ui.bind(void 0,lt),Oi.bind(void 0,0),Oi.bind(void 0,1),Pi.bind(void 0,0),Pi.bind(void 0,1),_u,Gu,Hu,zu,Wu,qu,Vu,Xu,ju,Yu,Zu,Qu,Ku,Ju,$u,el,tl,rl,nl,al,void 0,void 0,il,Dn,sl,ol,ul,cl,hl,void 0,void 0,void 0,ll,fl,pl,void 0,Ei.bind(void 0,0),Ei.bind(void 0,1),Li.bind(void 0,ct),Li.bind(void 0,lt),Di.bind(void 0,0),Di.bind(void 0,1),Ri.bind(void 0,0),Ri.bind(void 0,1),Mi.bind(void 0,0),Mi.bind(void 0,1),dl,vl,Ii.bind(void 0,0),Ii.bind(void 0,1),gl,ml,Ai.bind(void 0,0),Ai.bind(void 0,1),yl,bl,xl,Sl,Tl,kl,Bi.bind(void 0,0),Bi.bind(void 0,1),void 0,Ni.bind(void 0,0),Ni.bind(void 0,1),Fl,void 0,wl,void 0,void 0,Cl,Ul,Ol,Pl,El,Ll,Dl,Rl,Ml,Il,Al,Bl,Nl,Rn.bind(void 0,1),_l,Gl,Hl,zl,Wl,ql,Vl,Xl,jl,Yl,Jr.bind(void 0,0),Jr.bind(void 0,1),Jr.bind(void 0,2),Jr.bind(void 0,3),void 0,void 0,void 0,void 0,Zl,Rn.bind(void 0,2),Rn.bind(void 0,3),Mn.bind(void 0,1),Mn.bind(void 0,2),Mn.bind(void 0,3),Ql,Kl,void 0,void 0,Jl,void 0,$l,ef,Dn,Dn,void 0,void 0,void 0,void 0,void 0,tf,_i.bind(void 0,0),_i.bind(void 0,1),rf,void 0,nf,af,sf,of,uf,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,St.bind(void 0,1),St.bind(void 0,2),St.bind(void 0,3),St.bind(void 0,4),St.bind(void 0,5),St.bind(void 0,6),St.bind(void 0,7),St.bind(void 0,8),Tt.bind(void 0,1),Tt.bind(void 0,2),Tt.bind(void 0,3),Tt.bind(void 0,4),Tt.bind(void 0,5),Tt.bind(void 0,6),Tt.bind(void 0,7),Tt.bind(void 0,8),B.bind(void 0,0,0,0,0,0),B.bind(void 0,0,0,0,0,1),B.bind(void 0,0,0,0,0,2),B.bind(void 0,0,0,0,0,3),B.bind(void 0,0,0,0,1,0),B.bind(void 0,0,0,0,1,1),B.bind(void 0,0,0,0,1,2),B.bind(void 0,0,0,0,1,3),B.bind(void 0,0,0,1,0,0),B.bind(void 0,0,0,1,0,1),B.bind(void 0,0,0,1,0,2),B.bind(void 0,0,0,1,0,3),B.bind(void 0,0,0,1,1,0),B.bind(void 0,0,0,1,1,1),B.bind(void 0,0,0,1,1,2),B.bind(void 0,0,0,1,1,3),B.bind(void 0,0,1,0,0,0),B.bind(void 0,0,1,0,0,1),B.bind(void 0,0,1,0,0,2),B.bind(void 0,0,1,0,0,3),B.bind(void 0,0,1,0,1,0),B.bind(void 0,0,1,0,1,1),B.bind(void 0,0,1,0,1,2),B.bind(void 0,0,1,0,1,3),B.bind(void 0,0,1,1,0,0),B.bind(void 0,0,1,1,0,1),B.bind(void 0,0,1,1,0,2),B.bind(void 0,0,1,1,0,3),B.bind(void 0,0,1,1,1,0),B.bind(void 0,0,1,1,1,1),B.bind(void 0,0,1,1,1,2),B.bind(void 0,0,1,1,1,3),B.bind(void 0,1,0,0,0,0),B.bind(void 0,1,0,0,0,1),B.bind(void 0,1,0,0,0,2),B.bind(void 0,1,0,0,0,3),B.bind(void 0,1,0,0,1,0),B.bind(void 0,1,0,0,1,1),B.bind(void 0,1,0,0,1,2),B.bind(void 0,1,0,0,1,3),B.bind(void 0,1,0,1,0,0),B.bind(void 0,1,0,1,0,1),B.bind(void 0,1,0,1,0,2),B.bind(void 0,1,0,1,0,3),B.bind(void 0,1,0,1,1,0),B.bind(void 0,1,0,1,1,1),B.bind(void 0,1,0,1,1,2),B.bind(void 0,1,0,1,1,3),B.bind(void 0,1,1,0,0,0),B.bind(void 0,1,1,0,0,1),B.bind(void 0,1,1,0,0,2),B.bind(void 0,1,1,0,0,3),B.bind(void 0,1,1,0,1,0),B.bind(void 0,1,1,0,1,1),B.bind(void 0,1,1,0,1,2),B.bind(void 0,1,1,0,1,3),B.bind(void 0,1,1,1,0,0),B.bind(void 0,1,1,1,0,1),B.bind(void 0,1,1,1,0,2),B.bind(void 0,1,1,1,0,3),B.bind(void 0,1,1,1,1,0),B.bind(void 0,1,1,1,1,1),B.bind(void 0,1,1,1,1,2),B.bind(void 0,1,1,1,1,3)];function nr(e){this.char=e,this.state={},this.activeState=null}function In(e,t,r){this.contextName=r,this.startIndex=e,this.endOffset=t}function lf(e,t,r){this.contextName=e,this.openRange=null,this.ranges=[],this.checkStart=t,this.checkEnd=r}function it(e,t){this.context=e,this.index=t,this.length=e.length,this.current=e[t],this.backtrack=e.slice(0,t),this.lookahead=e.slice(t+1)}function $r(e){this.eventId=e,this.subscribers=[]}function ff(e){var t=this,r=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];r.forEach(function(a){Object.defineProperty(t.events,a,{value:new $r(a)})}),e&&r.forEach(function(a){var i=e[a];typeof i=="function"&&t.events[a].subscribe(i)});var n=["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"];n.forEach(function(a){t.events[a].subscribe(t.updateContextsRanges)})}function pe(e){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],ff.call(this,e)}nr.prototype.setState=function(e,t){return this.state[e]=t,this.activeState={key:e,value:this.state[e]},this.activeState},nr.prototype.getState=function(e){return this.state[e]||null},pe.prototype.inboundIndex=function(e){return e>=0&&e<this.tokens.length},pe.prototype.composeRUD=function(e){var t=this,r=!0,n=e.map(function(i){return t[i[0]].apply(t,i.slice(1).concat(r))}),a=function(i){return typeof i=="object"&&i.hasOwnProperty("FAIL")};if(n.every(a))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:n.filter(a)};this.dispatch("composeRUD",[n.filter(function(i){return!a(i)})])},pe.prototype.replaceRange=function(e,t,r,n){t=t!==null?t:this.tokens.length;var a=r.every(function(s){return s instanceof nr});if(!isNaN(e)&&this.inboundIndex(e)&&a){var i=this.tokens.splice.apply(this.tokens,[e,t].concat(r));return n||this.dispatch("replaceToken",[e,t,r]),[i,r]}else return{FAIL:"replaceRange: invalid tokens or startIndex."}},pe.prototype.replaceToken=function(e,t,r){if(!isNaN(e)&&this.inboundIndex(e)&&t instanceof nr){var n=this.tokens.splice(e,1,t);return r||this.dispatch("replaceToken",[e,t]),[n[0],t]}else return{FAIL:"replaceToken: invalid token or index."}},pe.prototype.removeRange=function(e,t,r){t=isNaN(t)?this.tokens.length:t;var n=this.tokens.splice(e,t);return r||this.dispatch("removeRange",[n,e,t]),n},pe.prototype.removeToken=function(e,t){if(!isNaN(e)&&this.inboundIndex(e)){var r=this.tokens.splice(e,1);return t||this.dispatch("removeToken",[r,e]),r}else return{FAIL:"removeToken: invalid token index."}},pe.prototype.insertToken=function(e,t,r){var n=e.every(function(a){return a instanceof nr});return n?(this.tokens.splice.apply(this.tokens,[t,0].concat(e)),r||this.dispatch("insertToken",[e,t]),e):{FAIL:"insertToken: invalid token(s)."}},pe.prototype.registerModifier=function(e,t,r){this.events.newToken.subscribe(function(n,a){var i=[n,a],s=t===null||t.apply(this,i)===!0,u=[n,a];if(s){var o=r.apply(this,u);n.setState(e,o)}}),this.registeredModifiers.push(e)},$r.prototype.subscribe=function(e){return typeof e=="function"?this.subscribers.push(e)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}},$r.prototype.unsubscribe=function(e){this.subscribers.splice(e,1)},it.prototype.setCurrentIndex=function(e){this.index=e,this.current=this.context[e],this.backtrack=this.context.slice(0,e),this.lookahead=this.context.slice(e+1)},it.prototype.get=function(e){switch(!0){case e===0:return this.current;case(e<0&&Math.abs(e)<=this.backtrack.length):return this.backtrack.slice(e)[0];case(e>0&&e<=this.lookahead.length):return this.lookahead[e-1];default:return null}},pe.prototype.rangeToText=function(e){if(e instanceof In)return this.getRangeTokens(e).map(function(t){return t.char}).join("")},pe.prototype.getText=function(){return this.tokens.map(function(e){return e.char}).join("")},pe.prototype.getContext=function(e){var t=this.registeredContexts[e];return t||null},pe.prototype.on=function(e,t){var r=this.events[e];return r?r.subscribe(t):null},pe.prototype.dispatch=function(e,t){var r=this,n=this.events[e];n instanceof $r&&n.subscribers.forEach(function(a){a.apply(r,t||[])})},pe.prototype.registerContextChecker=function(e,t,r){if(this.getContext(e))return{FAIL:"context name '"+e+"' is already registered."};if(typeof t!="function")return{FAIL:"missing context start check."};if(typeof r!="function")return{FAIL:"missing context end check."};var n=new lf(e,t,r);return this.registeredContexts[e]=n,this.contextCheckers.push(n),n},pe.prototype.getRangeTokens=function(e){var t=e.startIndex+e.endOffset;return[].concat(this.tokens.slice(e.startIndex,t))},pe.prototype.getContextRanges=function(e){var t=this.getContext(e);return t?t.ranges:{FAIL:"context checker '"+e+"' is not registered."}},pe.prototype.resetContextsRanges=function(){var e=this.registeredContexts;for(var t in e)if(e.hasOwnProperty(t)){var r=e[t];r.ranges=[]}},pe.prototype.updateContextsRanges=function(){this.resetContextsRanges();for(var e=this.tokens.map(function(n){return n.char}),t=0;t<e.length;t++){var r=new it(e,t);this.runContextCheck(r)}this.dispatch("updateContextsRanges",[this.registeredContexts])},pe.prototype.setEndOffset=function(e,t){var r=this.getContext(t).openRange.startIndex,n=new In(r,e,t),a=this.getContext(t).ranges;return n.rangeId=t+"."+a.length,a.push(n),this.getContext(t).openRange=null,n},pe.prototype.runContextCheck=function(e){var t=this,r=e.index;this.contextCheckers.forEach(function(n){var a=n.contextName,i=t.getContext(a).openRange;if(!i&&n.checkStart(e)&&(i=new In(r,null,a),t.getContext(a).openRange=i,t.dispatch("contextStart",[a,r])),i&&n.checkEnd(e)){var s=r-i.startIndex+1,u=t.setEndOffset(s,a);t.dispatch("contextEnd",[a,u])}})},pe.prototype.tokenize=function(e){this.tokens=[],this.resetContextsRanges();var t=Array.from(e);this.dispatch("start");for(var r=0;r<t.length;r++){var n=t[r],a=new it(t,r);this.dispatch("next",[a]),this.runContextCheck(a);var i=new nr(n);this.tokens.push(i),this.dispatch("newToken",[i,a])}return this.dispatch("end",[this.tokens]),this.tokens};function kt(e){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(e)}function Gi(e){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(e)}function Ft(e){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(e)}function en(e){return/[A-z]/.test(e)}function cf(e){return/\s/.test(e)}function Xe(e){this.font=e,this.features={}}function _t(e){this.id=e.id,this.tag=e.tag,this.substitution=e.substitution}function kr(e,t){if(!e)return-1;switch(t.format){case 1:return t.glyphs.indexOf(e);case 2:for(var r=t.ranges,n=0;n<r.length;n++){var a=r[n];if(e>=a.start&&e<=a.end){var i=e-a.start;return a.index+i}}break;default:return-1}return-1}function hf(e,t){var r=kr(e,t.coverage);return r===-1?null:e+t.deltaGlyphId}function pf(e,t){var r=kr(e,t.coverage);return r===-1?null:t.substitute[r]}function An(e,t){for(var r=[],n=0;n<e.length;n++){var a=e[n],i=t.current;i=Array.isArray(i)?i[0]:i;var s=kr(i,a);s!==-1&&r.push(s)}return r.length!==e.length?-1:r}function df(e,t){var r=t.inputCoverage.length+t.lookaheadCoverage.length+t.backtrackCoverage.length;if(e.context.length<r)return[];var n=An(t.inputCoverage,e);if(n===-1)return[];var a=t.inputCoverage.length-1;if(e.lookahead.length<t.lookaheadCoverage.length)return[];for(var i=e.lookahead.slice(a);i.length&&Ft(i[0].char);)i.shift();var s=new it(i,0),u=An(t.lookaheadCoverage,s),o=[].concat(e.backtrack);for(o.reverse();o.length&&Ft(o[0].char);)o.shift();if(o.length<t.backtrackCoverage.length)return[];var c=new it(o,0),h=An(t.backtrackCoverage,c),v=n.length===t.inputCoverage.length&&u.length===t.lookaheadCoverage.length&&h.length===t.backtrackCoverage.length,p=[];if(v)for(var g=0;g<t.lookupRecords.length;g++)for(var k=t.lookupRecords[g],D=k.lookupListIndex,E=this.getLookupByIndex(D),L=0;L<E.subtables.length;L++){var W=E.subtables[L],I=this.getLookupMethod(E,W),J=this.getSubstitutionType(E,W);if(J==="12")for(var q=0;q<n.length;q++){var ie=e.get(q),V=I(ie);V&&p.push(V)}}return p}function vf(e,t){var r=e.current,n=kr(r,t.coverage);if(n===-1)return null;for(var a,i=t.ligatureSets[n],s=0;s<i.length;s++){a=i[s];for(var u=0;u<a.components.length;u++){var o=e.lookahead[u],c=a.components[u];if(o!==c)break;if(u===a.components.length-1)return a}}return null}function gf(e,t){var r=kr(e,t.coverage);return r===-1?null:t.sequences[r]}Xe.prototype.getDefaultScriptFeaturesIndexes=function(){for(var e=this.font.tables.gsub.scripts,t=0;t<e.length;t++){var r=e[t];if(r.tag==="DFLT")return r.script.defaultLangSys.featureIndexes}return[]},Xe.prototype.getScriptFeaturesIndexes=function(e){var t=this.font.tables;if(!t.gsub)return[];if(!e)return this.getDefaultScriptFeaturesIndexes();for(var r=this.font.tables.gsub.scripts,n=0;n<r.length;n++){var a=r[n];if(a.tag===e&&a.script.defaultLangSys)return a.script.defaultLangSys.featureIndexes;var i=a.langSysRecords;if(i)for(var s=0;s<i.length;s++){var u=i[s];if(u.tag===e){var o=u.langSys;return o.featureIndexes}}}return this.getDefaultScriptFeaturesIndexes()},Xe.prototype.mapTagsToFeatures=function(e,t){for(var r={},n=0;n<e.length;n++){var a=e[n].tag,i=e[n].feature;r[a]=i}this.features[t].tags=r},Xe.prototype.getScriptFeatures=function(e){var t=this.features[e];if(this.features.hasOwnProperty(e))return t;var r=this.getScriptFeaturesIndexes(e);if(!r)return null;var n=this.font.tables.gsub;return t=r.map(function(a){return n.features[a]}),this.features[e]=t,this.mapTagsToFeatures(t,e),t},Xe.prototype.getSubstitutionType=function(e,t){var r=e.lookupType.toString(),n=t.substFormat.toString();return r+n},Xe.prototype.getLookupMethod=function(e,t){var r=this,n=this.getSubstitutionType(e,t);switch(n){case"11":return function(a){return hf.apply(r,[a,t])};case"12":return function(a){return pf.apply(r,[a,t])};case"63":return function(a){return df.apply(r,[a,t])};case"41":return function(a){return vf.apply(r,[a,t])};case"21":return function(a){return gf.apply(r,[a,t])};default:throw new Error("lookupType: "+e.lookupType+" - substFormat: "+t.substFormat+" is not yet supported")}},Xe.prototype.lookupFeature=function(e){var t=e.contextParams,r=t.index,n=this.getFeature({tag:e.tag,script:e.script});if(!n)return new Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+e.tag+"' for script '"+e.script+"'.");for(var a=this.getFeatureLookups(n),i=[].concat(t.context),s=0;s<a.length;s++)for(var u=a[s],o=this.getLookupSubtables(u),c=0;c<o.length;c++){var h=o[c],v=this.getSubstitutionType(u,h),p=this.getLookupMethod(u,h),g=void 0;switch(v){case"11":g=p(t.current),g&&i.splice(r,1,new _t({id:11,tag:e.tag,substitution:g}));break;case"12":g=p(t.current),g&&i.splice(r,1,new _t({id:12,tag:e.tag,substitution:g}));break;case"63":g=p(t),Array.isArray(g)&&g.length&&i.splice(r,1,new _t({id:63,tag:e.tag,substitution:g}));break;case"41":g=p(t),g&&i.splice(r,1,new _t({id:41,tag:e.tag,substitution:g}));break;case"21":g=p(t.current),g&&i.splice(r,1,new _t({id:21,tag:e.tag,substitution:g}));break}t=new it(i,r),!(Array.isArray(g)&&!g.length)&&(g=null)}return i.length?i:null},Xe.prototype.supports=function(e){if(!e.script)return!1;this.getScriptFeatures(e.script);var t=this.features.hasOwnProperty(e.script);if(!e.tag)return t;var r=this.features[e.script].some(function(n){return n.tag===e.tag});return t&&r},Xe.prototype.getLookupSubtables=function(e){return e.subtables||null},Xe.prototype.getLookupByIndex=function(e){var t=this.font.tables.gsub.lookups;return t[e]||null},Xe.prototype.getFeatureLookups=function(e){return e.lookupListIndexes.map(this.getLookupByIndex.bind(this))},Xe.prototype.getFeature=function(t){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(t.script)||this.getScriptFeatures(t.script);var r=this.features[t.script];return r?r.tags[t.tag]?this.features[t.script].tags[t.tag]:null:{FAIL:"No feature for script "+t.script}};function mf(e){var t=e.current,r=e.get(-1);return r===null&&kt(t)||!kt(r)&&kt(t)}function yf(e){var t=e.get(1);return t===null||!kt(t)}var bf={startCheck:mf,endCheck:yf};function xf(e){var t=e.current,r=e.get(-1);return(kt(t)||Ft(t))&&!kt(r)}function Sf(e){var t=e.get(1);switch(!0){case t===null:return!0;case(!kt(t)&&!Ft(t)):var r=cf(t);if(!r)return!0;if(r){var n=!1;if(n=e.lookahead.some(function(a){return kt(a)||Ft(a)}),!n)return!0}break;default:return!1}}var Tf={startCheck:xf,endCheck:Sf};function kf(e,t,r){t[r].setState(e.tag,e.substitution)}function Ff(e,t,r){t[r].setState(e.tag,e.substitution)}function wf(e,t,r){e.substitution.forEach(function(n,a){var i=t[r+a];i.setState(e.tag,n)})}function Cf(e,t,r){var n=t[r];n.setState(e.tag,e.substitution.ligGlyph);for(var a=e.substitution.components.length,i=0;i<a;i++)n=t[r+i+1],n.setState("deleted",!0)}var Hi={11:kf,12:Ff,63:wf,41:Cf};function Bn(e,t,r){e instanceof _t&&Hi[e.id]&&Hi[e.id](e,t,r)}function Uf(e){for(var t=[].concat(e.backtrack),r=t.length-1;r>=0;r--){var n=t[r],a=Gi(n),i=Ft(n);if(!a&&!i)return!0;if(a)return!1}return!1}function Of(e){if(Gi(e.current))return!1;for(var t=0;t<e.lookahead.length;t++){var r=e.lookahead[t],n=Ft(r);if(!n)return!0}return!1}function Pf(e){var t=this,r="arab",n=this.featuresTags[r],a=this.tokenizer.getRangeTokens(e);if(a.length!==1){var i=new it(a.map(function(u){return u.getState("glyphIndex")}),0),s=new it(a.map(function(u){return u.char}),0);a.forEach(function(u,o){if(!Ft(u.char)){i.setCurrentIndex(o),s.setCurrentIndex(o);var c=0;Uf(s)&&(c|=1),Of(s)&&(c|=2);var h;switch(c){case 1:h="fina";break;case 2:h="init";break;case 3:h="medi";break}if(n.indexOf(h)!==-1){var v=t.query.lookupFeature({tag:h,script:r,contextParams:i});if(v instanceof Error)return console.info(v.message);v.forEach(function(p,g){p instanceof _t&&(Bn(p,a,g),i.context[g]=p.substitution)})}}})}}function zi(e,t){var r=e.map(function(n){return n.activeState.value});return new it(r,t||0)}function Ef(e){var t=this,r="arab",n=this.tokenizer.getRangeTokens(e),a=zi(n);a.context.forEach(function(i,s){a.setCurrentIndex(s);var u=t.query.lookupFeature({tag:"rlig",script:r,contextParams:a});u.length&&(u.forEach(function(o){return Bn(o,n,s)}),a=zi(n))})}function Lf(e){var t=e.current,r=e.get(-1);return r===null&&en(t)||!en(r)&&en(t)}function Df(e){var t=e.get(1);return t===null||!en(t)}var Rf={startCheck:Lf,endCheck:Df};function Wi(e,t){var r=e.map(function(n){return n.activeState.value});return new it(r,t||0)}function Mf(e){var t=this,r="latn",n=this.tokenizer.getRangeTokens(e),a=Wi(n);a.context.forEach(function(i,s){a.setCurrentIndex(s);var u=t.query.lookupFeature({tag:"liga",script:r,contextParams:a});u.length&&(u.forEach(function(o){return Bn(o,n,s)}),a=Wi(n))})}function st(e){this.baseDir=e||"ltr",this.tokenizer=new pe,this.featuresTags={}}st.prototype.setText=function(e){this.text=e},st.prototype.contextChecks={latinWordCheck:Rf,arabicWordCheck:bf,arabicSentenceCheck:Tf};function Nn(e){var t=this.contextChecks[e+"Check"];return this.tokenizer.registerContextChecker(e,t.startCheck,t.endCheck)}function If(){return Nn.call(this,"latinWord"),Nn.call(this,"arabicWord"),Nn.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function Af(){var e=this,t=this.tokenizer.getContextRanges("arabicSentence");t.forEach(function(r){var n=e.tokenizer.getRangeTokens(r);e.tokenizer.replaceRange(r.startIndex,r.endOffset,n.reverse())})}st.prototype.registerFeatures=function(e,t){var r=this,n=t.filter(function(a){return r.query.supports({script:e,tag:a})});this.featuresTags.hasOwnProperty(e)?this.featuresTags[e]=this.featuresTags[e].concat(n):this.featuresTags[e]=n},st.prototype.applyFeatures=function(e,t){if(!e)throw new Error("No valid font was provided to apply features");this.query||(this.query=new Xe(e));for(var r=0;r<t.length;r++){var n=t[r];this.query.supports({script:n.script})&&this.registerFeatures(n.script,n.tags)}},st.prototype.registerModifier=function(e,t,r){this.tokenizer.registerModifier(e,t,r)};function _n(){if(this.tokenizer.registeredModifiers.indexOf("glyphIndex")===-1)throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function Bf(){var e=this,t="arab";if(this.featuresTags.hasOwnProperty(t)){_n.call(this);var r=this.tokenizer.getContextRanges("arabicWord");r.forEach(function(n){Pf.call(e,n)})}}function Nf(){var e=this,t="arab";if(this.featuresTags.hasOwnProperty(t)){var r=this.featuresTags[t];if(r.indexOf("rlig")!==-1){_n.call(this);var n=this.tokenizer.getContextRanges("arabicWord");n.forEach(function(a){Ef.call(e,a)})}}}function _f(){var e=this,t="latn";if(this.featuresTags.hasOwnProperty(t)){var r=this.featuresTags[t];if(r.indexOf("liga")!==-1){_n.call(this);var n=this.tokenizer.getContextRanges("latinWord");n.forEach(function(a){Mf.call(e,a)})}}}st.prototype.checkContextReady=function(e){return!!this.tokenizer.getContext(e)},st.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(Bf.call(this),Nf.call(this)),this.checkContextReady("latinWord")&&_f.call(this),this.checkContextReady("arabicSentence")&&Af.call(this)},st.prototype.processText=function(e){(!this.text||this.text!==e)&&(this.setText(e),If.call(this),this.applyFeaturesToContexts())},st.prototype.getBidiText=function(e){return this.processText(e),this.tokenizer.getText()},st.prototype.getTextGlyphs=function(e){this.processText(e);for(var t=[],r=0;r<this.tokenizer.tokens.length;r++){var n=this.tokenizer.tokens[r];if(!n.state.deleted){var a=n.activeState.value;t.push(Array.isArray(a)?a[0]:a)}}return t};function te(e){e=e||{},e.tables=e.tables||{},e.empty||(br(e.familyName,"When creating a new Font object, familyName is required."),br(e.styleName,"When creating a new Font object, styleName is required."),br(e.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),br(e.ascender,"When creating a new Font object, ascender is required."),br(e.descender<=0,"When creating a new Font object, negative descender value is required."),this.names={fontFamily:{en:e.familyName||" "},fontSubfamily:{en:e.styleName||" "},fullName:{en:e.fullName||e.familyName+" "+e.styleName},postScriptName:{en:e.postScriptName||(e.familyName+e.styleName).replace(/\s/g,"")},designer:{en:e.designer||" "},designerURL:{en:e.designerURL||" "},manufacturer:{en:e.manufacturer||" "},manufacturerURL:{en:e.manufacturerURL||" "},license:{en:e.license||" "},licenseURL:{en:e.licenseURL||" "},version:{en:e.version||"Version 0.1"},description:{en:e.description||" "},copyright:{en:e.copyright||" "},trademark:{en:e.trademark||" "}},this.unitsPerEm=e.unitsPerEm||1e3,this.ascender=e.ascender,this.descender=e.descender,this.createdTimestamp=e.createdTimestamp,this.tables=Object.assign(e.tables,{os2:Object.assign({usWeightClass:e.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:e.widthClass||this.usWidthClasses.MEDIUM,fsSelection:e.fsSelection||this.fsSelectionValues.REGULAR},e.tables.os2)})),this.supported=!0,this.glyphs=new ut.GlyphSet(this,e.glyphs||[]),this.encoding=new La(this),this.position=new yr(this),this.substitution=new Ve(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){if(this._hinting)return this._hinting;if(this.outlinesFormat==="truetype")return this._hinting=new Si(this)}})}te.prototype.hasChar=function(e){return this.encoding.charToGlyphIndex(e)!==null},te.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)},te.prototype.charToGlyph=function(e){var t=this.charToGlyphIndex(e),r=this.glyphs.get(t);return r||(r=this.glyphs.get(0)),r},te.prototype.updateFeatures=function(e){return this.defaultRenderOptions.features.map(function(t){return t.script==="latn"?{script:"latn",tags:t.tags.filter(function(r){return e[r]})}:t})},te.prototype.stringToGlyphs=function(e,t){var r=this,n=new st,a=function(v){return r.charToGlyphIndex(v.char)};n.registerModifier("glyphIndex",null,a);var i=t?this.updateFeatures(t.features):this.defaultRenderOptions.features;n.applyFeatures(this,i);for(var s=n.getTextGlyphs(e),u=s.length,o=new Array(u),c=this.glyphs.get(0),h=0;h<u;h+=1)o[h]=this.glyphs.get(s[h])||c;return o},te.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)},te.prototype.nameToGlyph=function(e){var t=this.nameToGlyphIndex(e),r=this.glyphs.get(t);return r||(r=this.glyphs.get(0)),r},te.prototype.glyphIndexToName=function(e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(e):""},te.prototype.getKerningValue=function(e,t){e=e.index||e,t=t.index||t;var r=this.position.defaultKerningTables;return r?this.position.getKerningValue(r,e,t):this.kerningPairs[e+","+t]||0},te.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]},te.prototype.forEachGlyph=function(e,t,r,n,a,i){t=t!==void 0?t:0,r=r!==void 0?r:0,n=n!==void 0?n:72,a=Object.assign({},this.defaultRenderOptions,a);var s=1/this.unitsPerEm*n,u=this.stringToGlyphs(e,a),o;if(a.kerning){var c=a.script||this.position.getDefaultScriptName();o=this.position.getKerningTables(c,a.language)}for(var h=0;h<u.length;h+=1){var v=u[h];if(i.call(this,v,t,r,n,a),v.advanceWidth&&(t+=v.advanceWidth*s),a.kerning&&h<u.length-1){var p=o?this.position.getKerningValue(o,v.index,u[h+1].index):this.getKerningValue(v,u[h+1]);t+=p*s}a.letterSpacing?t+=a.letterSpacing*n:a.tracking&&(t+=a.tracking/1e3*n)}return t},te.prototype.getPath=function(e,t,r,n,a){var i=new he;return this.forEachGlyph(e,t,r,n,a,function(s,u,o,c){var h=s.getPath(u,o,c,a,this);i.extend(h)}),i},te.prototype.getPaths=function(e,t,r,n,a){var i=[];return this.forEachGlyph(e,t,r,n,a,function(s,u,o,c){var h=s.getPath(u,o,c,a,this);i.push(h)}),i},te.prototype.getAdvanceWidth=function(e,t,r){return this.forEachGlyph(e,0,0,t,r,function(){})},te.prototype.draw=function(e,t,r,n,a,i){this.getPath(t,r,n,a,i).draw(e)},te.prototype.drawPoints=function(e,t,r,n,a,i){this.forEachGlyph(t,r,n,a,i,function(s,u,o,c){s.drawPoints(e,u,o,c)})},te.prototype.drawMetrics=function(e,t,r,n,a,i){this.forEachGlyph(t,r,n,a,i,function(s,u,o,c){s.drawMetrics(e,u,o,c)})},te.prototype.getEnglishName=function(e){var t=this.names[e];if(t)return t.en},te.prototype.validate=function(){var e=this;function t(n,a){}function r(n){var a=e.getEnglishName(n);a&&a.trim().length>0}r("fontFamily"),r("weightName"),r("manufacturer"),r("copyright"),r("version"),this.unitsPerEm>0},te.prototype.toTables=function(){return wu.fontToTable(this)},te.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},te.prototype.toArrayBuffer=function(){for(var e=this.toTables(),t=e.encode(),r=new ArrayBuffer(t.length),n=new Uint8Array(r),a=0;a<t.length;a++)n[a]=t[a];return r},te.prototype.download=function(e){var t=this.getEnglishName("fontFamily"),r=this.getEnglishName("fontSubfamily");e=e||t.replace(/\s/g,"")+"-"+r+".otf";var n=this.toArrayBuffer();if(Uu())if(window.URL=window.URL||window.webkitURL,window.URL){var a=new DataView(n),i=new Blob([a],{type:"font/opentype"}),s=document.createElement("a");s.href=window.URL.createObjectURL(i),s.download=e;var u=document.createEvent("MouseEvents");u.initEvent("click",!0,!1),s.dispatchEvent(u)}else console.warn("Font file could not be downloaded. Try using a different browser.");else{var o=require("fs"),c=Ou(n);o.writeFileSync(e,c)}},te.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},te.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},te.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};function qi(e,t){var r=JSON.stringify(e),n=256;for(var a in t){var i=parseInt(a);if(!(!i||i<256)){if(JSON.stringify(t[a])===r)return i;n<=i&&(n=i+1)}}return t[n]=e,n}function Gf(e,t,r){var n=qi(t.name,r);return[{name:"tag_"+e,type:"TAG",value:t.tag},{name:"minValue_"+e,type:"FIXED",value:t.minValue<<16},{name:"defaultValue_"+e,type:"FIXED",value:t.defaultValue<<16},{name:"maxValue_"+e,type:"FIXED",value:t.maxValue<<16},{name:"flags_"+e,type:"USHORT",value:0},{name:"nameID_"+e,type:"USHORT",value:n}]}function Hf(e,t,r){var n={},a=new A.Parser(e,t);return n.tag=a.parseTag(),n.minValue=a.parseFixed(),n.defaultValue=a.parseFixed(),n.maxValue=a.parseFixed(),a.skip("uShort",1),n.name=r[a.parseUShort()]||{},n}function zf(e,t,r,n){for(var a=qi(t.name,n),i=[{name:"nameID_"+e,type:"USHORT",value:a},{name:"flags_"+e,type:"USHORT",value:0}],s=0;s<r.length;++s){var u=r[s].tag;i.push({name:"axis_"+e+" "+u,type:"FIXED",value:t.coordinates[u]<<16})}return i}function Wf(e,t,r,n){var a={},i=new A.Parser(e,t);a.name=n[i.parseUShort()]||{},i.skip("uShort",1),a.coordinates={};for(var s=0;s<r.length;++s)a.coordinates[r[s].tag]=i.parseFixed();return a}function qf(e,t){var r=new M.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:e.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:e.instances.length},{name:"instanceSize",type:"USHORT",value:4+e.axes.length*4}]);r.offsetToData=r.sizeOf();for(var n=0;n<e.axes.length;n++)r.fields=r.fields.concat(Gf(n,e.axes[n],t));for(var a=0;a<e.instances.length;a++)r.fields=r.fields.concat(zf(a,e.instances[a],e.axes,t));return r}function Vf(e,t,r){var n=new A.Parser(e,t),a=n.parseULong();G.argument(a===65536,"Unsupported fvar table version.");var i=n.parseOffset16();n.skip("uShort",1);for(var s=n.parseUShort(),u=n.parseUShort(),o=n.parseUShort(),c=n.parseUShort(),h=[],v=0;v<s;v++)h.push(Hf(e,t+i+v*u,r));for(var p=[],g=t+i+s*u,k=0;k<o;k++)p.push(Wf(e,g+k*c,h,r));return{axes:h,instances:p}}var Xf={make:qf,parse:Vf},jf=function(){return{coverage:this.parsePointer(m.coverage),attachPoints:this.parseList(m.pointer(m.uShortList))}},Yf=function(){var e=this.parseUShort();if(G.argument(e===1||e===2||e===3,"Unsupported CaretValue table version."),e===1)return{coordinate:this.parseShort()};if(e===2)return{pointindex:this.parseShort()};if(e===3)return{coordinate:this.parseShort()}},Zf=function(){return this.parseList(m.pointer(Yf))},Qf=function(){return{coverage:this.parsePointer(m.coverage),ligGlyphs:this.parseList(m.pointer(Zf))}},Kf=function(){return this.parseUShort(),this.parseList(m.pointer(m.coverage))};function Jf(e,t){t=t||0;var r=new m(e,t),n=r.parseVersion(1);G.argument(n===1||n===1.2||n===1.3,"Unsupported GDEF table version.");var a={version:n,classDef:r.parsePointer(m.classDef),attachList:r.parsePointer(jf),ligCaretList:r.parsePointer(Qf),markAttachClassDef:r.parsePointer(m.classDef)};return n>=1.2&&(a.markGlyphSets=r.parsePointer(Kf)),a}var $f={parse:Jf},ot=new Array(10);ot[1]=function(){var t=this.offset+this.relativeOffset,r=this.parseUShort();if(r===1)return{posFormat:1,coverage:this.parsePointer(m.coverage),value:this.parseValueRecord()};if(r===2)return{posFormat:2,coverage:this.parsePointer(m.coverage),values:this.parseValueRecordList()};G.assert(!1,"0x"+t.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},ot[2]=function(){var t=this.offset+this.relativeOffset,r=this.parseUShort();G.assert(r===1||r===2,"0x"+t.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var n=this.parsePointer(m.coverage),a=this.parseUShort(),i=this.parseUShort();if(r===1)return{posFormat:r,coverage:n,valueFormat1:a,valueFormat2:i,pairSets:this.parseList(m.pointer(m.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(a),value2:this.parseValueRecord(i)}})))};if(r===2){var s=this.parsePointer(m.classDef),u=this.parsePointer(m.classDef),o=this.parseUShort(),c=this.parseUShort();return{posFormat:r,coverage:n,valueFormat1:a,valueFormat2:i,classDef1:s,classDef2:u,class1Count:o,class2Count:c,classRecords:this.parseList(o,m.list(c,function(){return{value1:this.parseValueRecord(a),value2:this.parseValueRecord(i)}}))}}},ot[3]=function(){return{error:"GPOS Lookup 3 not supported"}},ot[4]=function(){return{error:"GPOS Lookup 4 not supported"}},ot[5]=function(){return{error:"GPOS Lookup 5 not supported"}},ot[6]=function(){return{error:"GPOS Lookup 6 not supported"}},ot[7]=function(){return{error:"GPOS Lookup 7 not supported"}},ot[8]=function(){return{error:"GPOS Lookup 8 not supported"}},ot[9]=function(){return{error:"GPOS Lookup 9 not supported"}};function ec(e,t){t=t||0;var r=new m(e,t),n=r.parseVersion(1);return G.argument(n===1||n===1.1,"Unsupported GPOS table version "+n),n===1?{version:n,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(ot)}:{version:n,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(ot),variations:r.parseFeatureVariationsList()}}var tc=new Array(10);function rc(e){return new M.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new M.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new M.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new M.LookupList(e.lookups,tc)}])}var nc={parse:ec,make:rc};function ac(e){var t={};e.skip("uShort");var r=e.parseUShort();G.argument(r===0,"Unsupported kern sub-table version."),e.skip("uShort",2);var n=e.parseUShort();e.skip("uShort",3);for(var a=0;a<n;a+=1){var i=e.parseUShort(),s=e.parseUShort(),u=e.parseShort();t[i+","+s]=u}return t}function ic(e){var t={};e.skip("uShort");var r=e.parseULong();r>1&&console.warn("Only the first kern subtable is supported."),e.skip("uLong");var n=e.parseUShort(),a=n&255;if(e.skip("uShort"),a===0){var i=e.parseUShort();e.skip("uShort",3);for(var s=0;s<i;s+=1){var u=e.parseUShort(),o=e.parseUShort(),c=e.parseShort();t[u+","+o]=c}}return t}function sc(e,t){var r=new A.Parser(e,t),n=r.parseUShort();if(n===0)return ac(r);if(n===1)return ic(r);throw new Error("Unsupported kern table version ("+n+").")}var oc={parse:sc};function uc(e,t,r,n){for(var a=new A.Parser(e,t),i=n?a.parseUShort:a.parseULong,s=[],u=0;u<r+1;u+=1){var o=i.call(a);n&&(o*=2),s.push(o)}return s}var lc={parse:uc};function fc(e,t){var r=require("fs");r.readFile(e,function(n,a){if(n)return t(n.message);t(null,pi(a))})}function cc(e,t){var r=new XMLHttpRequest;r.open("get",e,!0),r.responseType="arraybuffer",r.onload=function(){return r.response?t(null,r.response):t("Font could not be loaded: "+r.statusText)},r.onerror=function(){t("Font could not be loaded")},r.send()}function Vi(e,t){for(var r=[],n=12,a=0;a<t;a+=1){var i=A.getTag(e,n),s=A.getULong(e,n+4),u=A.getULong(e,n+8),o=A.getULong(e,n+12);r.push({tag:i,checksum:s,offset:u,length:o,compression:!1}),n+=16}return r}function hc(e,t){for(var r=[],n=44,a=0;a<t;a+=1){var i=A.getTag(e,n),s=A.getULong(e,n+4),u=A.getULong(e,n+8),o=A.getULong(e,n+12),c=void 0;u<o?c="WOFF":c=!1,r.push({tag:i,offset:s,compression:c,compressedLength:u,length:o}),n+=20}return r}function ge(e,t){if(t.compression==="WOFF"){var r=new Uint8Array(e.buffer,t.offset+2,t.compressedLength-2),n=new Uint8Array(t.length);if(Ge(r,n),n.byteLength!==t.length)throw new Error("Decompression error: "+t.tag+" decompressed length doesn't match recorded length");var a=new DataView(n.buffer,0);return{data:a,offset:0}}else return{data:e,offset:t.offset}}function tn(e,t){t=t??{};var r,n,a=new te({empty:!0}),i=new DataView(e,0),s,u=[],o=A.getTag(i,0);if(o===String.fromCharCode(0,1,0,0)||o==="true"||o==="typ1")a.outlinesFormat="truetype",s=A.getUShort(i,4),u=Vi(i,s);else if(o==="OTTO")a.outlinesFormat="cff",s=A.getUShort(i,4),u=Vi(i,s);else if(o==="wOFF"){var c=A.getTag(i,4);if(c===String.fromCharCode(0,1,0,0))a.outlinesFormat="truetype";else if(c==="OTTO")a.outlinesFormat="cff";else throw new Error("Unsupported OpenType flavor "+o);s=A.getUShort(i,12),u=hc(i,s)}else throw new Error("Unsupported OpenType signature "+o);for(var h,v,p,g,k,D,E,L,W,I,J,q,ie=0;ie<s;ie+=1){var V=u[ie],N=void 0;switch(V.tag){case"cmap":N=ge(i,V),a.tables.cmap=Ea.parse(N.data,N.offset),a.encoding=new Da(a.tables.cmap);break;case"cvt ":N=ge(i,V),q=new A.Parser(N.data,N.offset),a.tables.cvt=q.parseShortList(V.length/2);break;case"fvar":v=V;break;case"fpgm":N=ge(i,V),q=new A.Parser(N.data,N.offset),a.tables.fpgm=q.parseByteList(V.length);break;case"head":N=ge(i,V),a.tables.head=Xa.parse(N.data,N.offset),a.unitsPerEm=a.tables.head.unitsPerEm,r=a.tables.head.indexToLocFormat;break;case"hhea":N=ge(i,V),a.tables.hhea=ja.parse(N.data,N.offset),a.ascender=a.tables.hhea.ascender,a.descender=a.tables.hhea.descender,a.numberOfHMetrics=a.tables.hhea.numberOfHMetrics;break;case"hmtx":E=V;break;case"ltag":N=ge(i,V),n=Za.parse(N.data,N.offset);break;case"maxp":N=ge(i,V),a.tables.maxp=Qa.parse(N.data,N.offset),a.numGlyphs=a.tables.maxp.numGlyphs;break;case"name":I=V;break;case"OS/2":N=ge(i,V),a.tables.os2=Cn.parse(N.data,N.offset);break;case"post":N=ge(i,V),a.tables.post=ai.parse(N.data,N.offset),a.glyphNames=new xn(a.tables.post);break;case"prep":N=ge(i,V),q=new A.Parser(N.data,N.offset),a.tables.prep=q.parseByteList(V.length);break;case"glyf":p=V;break;case"loca":W=V;break;case"CFF ":h=V;break;case"kern":L=V;break;case"GDEF":g=V;break;case"GPOS":k=V;break;case"GSUB":D=V;break;case"meta":J=V;break}}var Se=ge(i,I);if(a.tables.name=ni.parse(Se.data,Se.offset,n),a.names=a.tables.name,p&&W){var Be=r===0,ze=ge(i,W),Ke=lc.parse(ze.data,ze.offset,a.numGlyphs,Be),Je=ge(i,p);a.glyphs=yi.parse(Je.data,Je.offset,Ke,a,t)}else if(h){var be=ge(i,h);Va.parse(be.data,be.offset,a,t)}else throw new Error("Font doesn't contain TrueType or CFF outlines.");var ke=ge(i,E);if(Ya.parse(a,ke.data,ke.offset,a.numberOfHMetrics,a.numGlyphs,a.glyphs,t),ko(a,t),L){var Oe=ge(i,L);a.kerningPairs=oc.parse(Oe.data,Oe.offset)}else a.kerningPairs={};if(g){var Pe=ge(i,g);a.tables.gdef=$f.parse(Pe.data,Pe.offset)}if(k){var Ee=ge(i,k);a.tables.gpos=nc.parse(Ee.data,Ee.offset),a.position.init()}if(D){var Fe=ge(i,D);a.tables.gsub=ii.parse(Fe.data,Fe.offset)}if(v){var Ie=ge(i,v);a.tables.fvar=Xf.parse(Ie.data,Ie.offset,a.names)}if(J){var se=ge(i,J);a.tables.meta=si.parse(se.data,se.offset),a.metas=a.tables.meta}return a}function Xi(e,t,r){r=r??{};var n=typeof window>"u",a=n&&!r.isUrl?fc:cc;return new Promise(function(i,s){a(e,function(u,o){if(u){if(t)return t(u);s(u)}var c;try{c=tn(o,r)}catch(h){if(t)return t(h,null);s(h)}if(t)return t(null,c);i(c)})})}function ji(e,t){var r=require("fs"),n=r.readFileSync(e);return tn(pi(n),t)}var pc=Object.freeze({__proto__:null,Font:te,Glyph:He,Path:he,BoundingBox:Qe,_parse:A,parse:tn,load:Xi,loadSync:ji});l.BoundingBox=Qe,l.Font=te,l.Glyph=He,l.Path=he,l._parse=A,l.default=pc,l.load=Xi,l.loadSync=ji,l.parse=tn,Object.defineProperty(l,"__esModule",{value:!0})})});var fs=oe(lr=>{"use strict";var Sc=lr&&lr.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(lr,"__esModule",{value:!0});lr.dviDecode=void 0;var Tc=Sc(Xn()),kc="This is dvi-decode, Version 0.4.7",Fc=79,Jn=100,an=0,$e=128,ss=132,je=133,$n=137,Pt=138,on=139,os=140,us=141,ls=142,gt=143,ea=147,Et=148,ta=152,Lt=153,mt=157,ra=161,Dt=162,na=166,Rt=167,Er=171,yt=235,Mt=239,Ne=243,va=247,Lr=248,ga=249,wc=250,Cc=251,Uc=252,Oc=253,Pc=254,Ec=255,Dr=2,Ye=2147483647,jn=Ye,pt=0,ae,Rr,We,wt,Fr,dt,Ct,wr,sr,Cr,et,X=0,Mr,or=new Map,ns,Jt,ir,Yn,Zn,Ur,Or=[],ar,Xt,ue,de,vt,Wt,qt,Vt,De,tt,aa=[],ia=[],sa=[],oa=[],ua=[],la=[],fa=[],ca=[],jt,Yt,Ir,Zt,Qt,Kt,ha,zt,ur,Nr,re,sn,$,Ht,Pr,Lc,Ar,as,Dc,Qn,Me,Br,Ut,Ot,ft;async function Rc(l,f,d,b,y,F){return new Promise((O,S)=>{et=F||console.log,Ur=0,Yn=[],Yn.push(1),Zn=[],Zn.push(!0),We=0,wt=0,Fr=0,dt=0,Ct=0,wr=!0,sr=[],X=0,or.clear(),ns=0,Me=0,Br=0,Ut=0,Ot=0,ft=0,ar=!1,Xt="",ue=0,de=0,vt=0,Wt=0,qt=0,Vt=0,De=0,tt=0,aa=[],ia=[],sa=[],oa=[],ua=[],la=[],fa=[],ca=[],jt=2147483647-99,Yt=2147483647-99,Ir=Jn+1,Zt=0,Qt=0,Kt=0,ha=0,zt=0,Nr=0,re=0,sn=0,Ht=-1,Pr=-1,Lc=!1,Ar=0,as=-1,Dc=0,Qn=0,Cr={fonts:[],pages:[]};try{if(ae=l,ae===null)throw"!No DVI input provided.";Rr=f===void 0?96:f,ir=d===void 0?0:d,Mr=new Map,b.forEach((w,j)=>{Mr?.set(j.toLowerCase(),{fontPath:w,fontFileName:j})}),Jt=y===void 0?!1:y,et(kc),et("Options selected:");let T="";for(let w=0;w<=Ur;w++)Zn[w]?T=T+Yn[w].toString():T=T+"*",w<Ur?T=T+".":T=T+" ";et("  Debug mode is "+(Jt?"ON":"OFF")),et("  Starting page = "+T),et("  Resolution = "+Rr.toString()+" pixels per inch"),ir>0&&et("  New magnification factor = "+(ir/1e3).toString()+"x"),dt=Re(),dt!==va&&Ae("First byte isn't start of preamble! ("+dt.toString(16)+")"),dt=Re(),dt!==Dr&&_("identification in byte 1 should be "+Dr.toString(16)+"!"),Ut=xe(),Ot=xe(),Ut<=0&&Ae("numerator is "+Ut.toString()),Ot<=0&&Ae("denominator is "+Ot.toString()),_("numerator/denominator="+Ut.toString()+"/"+Ot.toString()),ns=254e5/Ut*(Ot/473628672)/16,Me=Ut/254e3*(Rr/Ot),ft=xe(),ir>0?ft=ir:ft<=0&&Ae("magnification is "+ft.toString()),Br=Me,Me=Br*(ft/1e3),_("magnification="+ft.toString()+"; "+Me.toString()+" pixels per DVI unit"),dt=Re();let C="";for(;dt>0;)dt--,C=C+String.fromCodePoint(Re());_("'"+C+"'"),Qn=X,wr=!0,Zt=0,Qt=0,Kt=0,zt=0,Fr=ae.length,Fr<53&&Ae("only "+Fr.toString()+" bytes long"),wt=Fr-4;do wt===0&&Ae("all 223s"),X=wt,We=Re(),wt--;while(We===223);We!==Dr&&Ae("ID byte is "+We.toString()),X=wt-3,Ct=xe(),(Ct<0||Ct>wt-33)&&Ae("post pointer "+Ct.toString()+" at byte "+(wt-3).toString()),X=Ct,We=Re(),We!==Lr&&Ae("byte "+Ct.toString()+" is not post"),Ar=Ct,as=xe(),ar=!0,zc(),ar=!1,wr=!1,Promise.all(sr).then(()=>{Zt=0,Qt=0,Kt=0,zt=0,X=Qn;let w;do X>=ae.length&&Ae("the file ended prematurely"),w=Re(),wr&&w>=Ne&&w<Ne+4&&(sr.push(un(ln(We))),We=Pt);while(w===Pt);if(w===Lr)ar=!0;else{w!==on&&Ae("byte "+(X-1).toString()+" is not bop"),Pr=X-1,zt++,Or.length=0;for(let U=0;U<10;U++)Or.push(xe());xe()!==Ht&&_("backpointer in byte "+(X-4).toString()+" should be "+Ht.toString()+"!"),Ht=Pr}zt=0;{let U;for(;;){_(" "),U="";for(let H=0;H<=Ur;H++)U=U+Or[H].toString(),H<Ur?U=U+".":U=U+" ";_((X-45).toString()+": beginning of page "+U),Hc()||Ae("page ended unexpectedly"),Cr.pages.push(ur);let R;do X>=ae.length&&Ae("the file ended prematurely"),R=Re(),wr&&R>=Ne&&R<Ne+4&&(sr.push(un(ln(We))),We=Pt);while(R===Pt);if(R===Lr)ar=!0;else{R!==on&&Ae("byte "+(X-1).toString()+" is not bop"),Pr=X-1,zt++,Or.length=0;for(let H=0;H<10;H++)Or.push(xe());xe()!==Ht&&_("backpointer in byte "+(X-4).toString()+" should be "+Ht.toString()+"!"),Ht=Pr}if(ar)break}}let j=[];or.forEach(U=>{j.indexOf(U.fontName)===-1&&(j.push(U.fontName),Cr.fonts.push({fontNum:j.indexOf(U.fontName),fontName:U.fontName,fontPath:U.fontPath,fontFeatures:U.fontFeatures}))});let Y=new Map;or.forEach(U=>{Y.set(U.fontNum,j.indexOf(U.fontName))}),Cr.pages.forEach(U=>{U.pageFonts.forEach(H=>{H.fontNum=Y.get(H.fontNum)});let R=[];U.pageFonts.forEach(H=>{let Z=R.findIndex(ve=>ve.fontNum===H.fontNum);Z>-1?R[Z].glyphs=R[Z].glyphs.concat(H.glyphs):R.push(H)}),U.pageFonts=R.sort((H,Z)=>H.fontNum-Z.fontNum),U.pageFonts.forEach(H=>{let Z=[];H.glyphs.forEach(ve=>{let Q=Z.findIndex(le=>le.glyphIndex===ve.glyphIndex);Q>-1?Z[Q].glyphSizes=Z[Q].glyphSizes.concat(ve.glyphSizes):Z.push(ve)}),H.glyphs=Z.sort((ve,Q)=>ve.glyphIndex-Q.glyphIndex)})}),O(JSON.stringify(Cr))}).catch(w=>{S(w.toString())})}catch(T){T instanceof Error&&S("!Error "+T.name+": "+T.message)}})}lr.dviDecode=Rc;function Mc(l){throw new Error(l)}function Ae(l){Mc("Bad DVI file: "+l+"!")}function Re(){return X>=ae.length?0:ae[X++]}function Ic(){let l=ae[X++];return l<128?l:l-256}function pa(){let l=ae[X++],f=ae[X++];return l*256+f}function Ac(){let l=ae[X++],f=ae[X++];return l<128?l*256+f:(l-256)*256+f}function Bc(){let l=ae[X++],f=ae[X++],d=ae[X++];return(l*256+f)*256+d}function Nc(){let l=ae[X++],f=ae[X++],d=ae[X++];return l<128?(l*256+f)*256+d:((l-256)*256+f)*256+d}function xe(){let l=ae[X++],f=ae[X++],d=ae[X++],b=ae[X++];return l<128?((l*256+f)*256+d)*256+b:(((l-256)*256+f)*256+d)*256+b}function _c(l,f){let d,b=f.tables.head;l.fontOtfUnitsPerEm=b.unitsPerEm;let y=f.glyphs.length,F=0,O=y-1;if(y>0){let S=l.fontScaledPointSize*Rr/72.27,T=1/Me*S;l.fontOtfUnitConv=1/l.fontOtfUnitsPerEm*T;let x,C;for(d=0;d<y;d++)x=f.glyphs.get(d),C=x.advanceWidth,C?l.width.push(Math.round(C*l.fontOtfUnitConv)):l.width.push(0)}if(y>0)for(d=0;d<y;d++)l.width[d]===0?l.pixelWidth.push(0):l.pixelWidth.push(Math.round(Me*l.width[d]));return l.fontBc=F,l.fontEc=O,!0}async function un(l){let f,d,b,y,F="",O="";try{let S="",T="",x="",C=xe(),w=xe();f=xe(),w<=0||f<=0?d=1e3:d=Math.round(1e3*Me*w/(Br*f));let j=Re(),Y=Re();if(F=F+"Font "+l.toString()+": ",Y+j===0)_("null font name!");else{let U;for(We=0;We<Y+j;We++)U=Re(),U!==91&&U!==93&&(S=S+String.fromCodePoint(U));_("DVI font name: "+S);let R=S.indexOf(":/");R>=0&&(S=S.substring(R+2));let H=S.split(":"),Z=H[0],ve=H.length>1?H[1]:"";H=Z.split("/"),S=H[H.length-1],x=ve}if(F=F+S,Mr){S.includes(".")||(_("Font file extension not supplied, trying OpenType..."),S=S+".otf");let U;if(_("Looking up "+S+" in font table"),U=Mr.get(S.toLowerCase()),U&&(T=U.fontPath.endsWith("/")?U.fontPath:U.fontPath+"/",_(S+" is located at "+T),O=T+U.fontFileName),U||S.endsWith(".otf")&&(_("OpenType font file not found, trying TrueType..."),S=S.replace(".otf",".ttf"),_("Looking up "+S+" in font table"),U=Mr.get(S.toLowerCase()),U&&(T=U.fontPath.endsWith("/")?U.fontPath:U.fontPath+"/",_(S+" is located at "+T),O=T+U.fontFileName),U||_("TrueType font file not found.")),!U)throw S+" not found in font table"}if(d!==1e3&&(F=F+" scaled "+d.toString()),b=or.get(l),b)_(F+"---this font was already defined."),b.fontNum!==l&&_("---font num "+l.toString()+" doesn't match previous definition!"),b.fontScaledSize!==w&&_("---scaled size of "+w.toString()+" doesn't match previous definition of "+b.fontScaledSize.toString()+"!"),b.fontDesignSize!==f&&_("---design size of "+f.toString()+" doesn't match previous definition of "+b.fontDesignSize.toString()+"!"),b.fontName!==S&&_("---font name "+S+" doesn't match previous definition!");else{_(F+"---this font wasn't loaded before."),b={fontNum:l,fontName:S,fontPath:T,fontFeatures:x,fontCheckSum:C,fontScaledSize:w,fontDesignSize:f,fontScaledPointSize:ft/1e3*w/65536,fontScaledPixelSize:Math.round(Me*w),fontOtfUnitsPerEm:0,fontOtfUnitConv:0,fontSpace:Math.floor(w/6),fontBc:0,fontEc:0,width:[],pixelWidth:[],otfFont:void 0};{try{_("Loading "+O),y=await Tc.default.load(O)}catch(U){throw et("!Error loading font file "+O),U}_("Font "+l.toString()+": file "+O+" opened:"),w<=0||w>=134217728?_("---not loaded, bad scale ("+w.toString()+")!"):f<=0||f>=134217728?_("---not loaded, bad design size ("+f.toString()+")!"):_c(b,y)&&(_("---loaded at size "+w.toString()+" DVI units"),_("---point size (scaled) is "+b.fontScaledPointSize.toString()+"pt"),f=Math.round(100*Me*w/(Br*f)),f!==100&&(_(" (this font is magnified "+f.toString()+"%)"),_("   ")))}b.otfFont=y,or.set(l,b)}}catch(S){throw et("!defineFont failed for font number "+l.toString()),S}}function ma(){Xt!==""&&(_("["+Xt+"]"),Xt="")}function we(l){if($&&$.otfFont){let f=ur.pageFonts.find(y=>y.fontNum===$.fontNum);f||(f={fontNum:$.fontNum,glyphs:[]},ur.pageFonts.push(f));let d=f.glyphs.find(y=>y.glyphIndex===l);d||(d={glyphIndex:l,glyphSizes:[]},f.glyphs.push(d));let b=d.glyphSizes.find(y=>y.sz===$.fontScaledPixelSize);b||(b={sz:$.fontScaledPixelSize,glyphPlacements:[]},d.glyphSizes.push(b)),b.glyphPlacements.push({x:De,y:tt})}}function ln(l){if(l>=an&&l<an+128)return l-an;if(l>=Er&&l<Er+64)return l-Er;switch(l){case $e:case je:case yt:case Mt:case Ne:return Re();case $e+1:case je+1:case yt+1:case Mt+1:case Ne+1:return pa();case $e+2:case je+2:case yt+2:case Mt+2:case Ne+2:return Bc();case gt:case Et:case Lt:case mt:case Dt:case Rt:return Ic();case gt+1:case Et+1:case Lt+1:case mt+1:case Dt+1:case Rt+1:return Ac();case gt+2:case Et+2:case Lt+2:case mt+2:case Dt+2:case Rt+2:return Nc();case $e+3:case ss:case je+3:case $n:case gt+3:case Et+3:case Lt+3:case mt+3:case Dt+3:case Rt+3:case yt+3:case Mt+3:case Ne+3:return xe();case Pt:case on:case os:case us:case ls:case va:case Lr:case ga:case wc:case Cc:case Uc:case Oc:case Pc:case Ec:return 0;case ea:return vt;case ta:return Wt;case ra:return qt;case na:return Vt;default:return 0}}function is(l){let f=Math.trunc(Me*l);return f<Me*l?f+1:f}function Gc(l,f){let d,b,y,F;function O(T,x){let C=$?$.fontSpace:0;Math.abs(x)>=5*C?tt=Math.round(Me*(de+x)):tt=tt+Math.round(Me*x),de>0&&x>0&&de>Ye-x&&(Ue("arithmetic overflow! parameter changed from "+x.toString()+" to "+(Ye-de).toString()),x=Ye-de),de<0&&x<0&&-de>x+Ye&&(Ue("arithmetic overflow! parameter changed from "+x.toString()+" to "+(-de-Ye).toString()),x=-de-Ye);let w="";Jt&&(w=w+" v="+de.toString(),x>=0&&(w=w+"+"),w=w+x.toString()+"="+(de+x).toString()+", vv="+tt.toString()),de=de+x,Math.abs(de)>Zt&&(Math.abs(de)>jt+99&&(Ue("warning: |v|>"+jt.toString()+"!"),jt=Math.abs(de)),Zt=Math.abs(de)),Ce(T+" "+x.toString()+w)}function S(T){$=or.get(T),$||Ue("invalid font selection: font "+T.toString()+" was never defined!");let x="";return Jt&&($?x=x+$.fontName:x=x+"INVALID FONT!",x=" current font is "+x),x}if(l>=Er&&l<Er+64)return Ce("fntnum"+f.toString()+S(f)),!0;switch(l){case mt:case mt+1:case mt+2:case mt+3:return O("down"+(l-mt+1).toString(),f),!0;case ra:case Dt:case Dt+1:case Dt+2:case Dt+3:return qt=f,O("y"+(l-ra).toString(),f),!0;case na:case Rt:case Rt+1:case Rt+2:case Rt+3:return Vt=f,O("z"+(l-na).toString(),f),!0;case yt:case yt+1:case yt+2:case yt+3:return Ce("fnt"+(l-yt+1).toString()+" "+f.toString()+S(f)),!0;case Ne:case Ne+1:case Ne+2:case Ne+3:return Ce("fntdef"+(l-Ne+1).toString()+" "+f.toString()),sr.push(un(f)),!0;case Mt:case Mt+1:case Mt+2:case Mt+3:{let T="";for(y=!1,f<0&&Ue("string of negative length!"),b=1;b<=f;b++)d=Re(),(d<32||d>126)&&(y=!0),T=T+String.fromCodePoint(d);if(y&&Ue("non-ASCII character in xxx command!"),Ce("xxx '"+T+"'"),T.startsWith("PSfile=")&&T.length>7){let x=T.substring(7,T.length-1).split(" "),C="",w=0,j=0,Y=0,U=0,R=0,H=0;x.length>=1&&(C=x[0].replaceAll('"',""),x.forEach(ne=>{let ee=ne.split("=");if(ee.length===2)switch(ee[0]){case"llx":w=Number.parseInt(ee[1]);break;case"lly":j=Number.parseInt(ee[1]);break;case"urx":Y=Number.parseInt(ee[1]);break;case"ury":U=Number.parseInt(ee[1]);break;case"rwi":R=Number.parseInt(ee[1]);break;case"rhi":H=Number.parseInt(ee[1]);break}}));let Z=R===0?1:R/10/(Y-w),ve=H===0?Z:H/10/(U-j),Q=Rr/72*(ft/1e3),le=Math.floor((Y-w)*Z*Q),_e=Math.floor((U-j)*ve*Q);ur.images.push({fileName:C,x:De,y:tt-_e,w:le,h:_e})}return!0}case va:return Ue("preamble command within a page!"),_("!"),!1;case Lr:case ga:return Ue("postamble command within a page!"),_("!"),!1;default:return Ue("undefined command "+l.toString()+"!"),!0}return!0}function Hc(){zt++,ur={pageFonts:[],rules:[],images:[]};let l,f,d,b,y;function F(x){if(ue>0&&x>0&&ue>Ye-x&&(Ue("arithmetic overflow! parameter changed from "+x.toString()+" to "+(Ye-ue).toString()),x=Ye-ue),ue<0&&x<0&&-ue>x+Ye&&(Ue("arithmetic overflow! parameter changed from "+x.toString()+" to "+(-ue-Ye).toString()),x=-ue-Ye),De=Math.round(Me*(ue+x)),Jt){let C=" h="+ue.toString();x>=0&&(C=C+"+"),et(C+x.toString()+"="+(ue+x).toString()+", hh="+De.toString())}ue=ue+x,Math.abs(ue)>Qt&&(Math.abs(ue)>Yt+99&&(Ue("warning: |h|>"+Yt.toString()+"!"),Yt=Math.abs(ue)),Qt=Math.abs(ue))}function O(x){if(x<$.fontBc||x>$.fontEc?d=jn:d=$.width[x],d===jn){let C="";$?C=C+$.fontName+"!":C=C+"INVALID FONT!",Ue("glyph index "+x.toString()+" invalid in font "+C)}l>=je||(d===jn?d=0:De=De+$.pixelWidth[x],F(d))}function S(){d=xe();let x=is(d),C=" height "+f.toString()+", width "+d.toString();if(f<=0||d<=0)_(C+" (invisible)");else{let w=is(f);ur.rules.push({x:De,y:tt-w,w:x,h:w}),_(C+" ("+ue.toString()+"x"+vt.toString()+" pixels)")}l!==$n&&(De=De+vt,F(d))}function T(){_("level "+sn.toString()+":(h="+ue.toString()+",v="+de.toString()+",w="+vt.toString()+",x="+Wt.toString()+",y="+qt.toString()+",z="+Vt.toString()+",hh="+De.toString()+",vv="+tt.toString()+")")}for(re=0,ue=0,de=0,vt=0,Wt=0,qt=0,Vt=0,De=0,tt=0;;){Nr=X,l=Re(),f=ln(l),X>=ae.length&&Ae("the file ended prematurely");e:for(;;)if(l<an+128){da("setchar"+f.toString()),f<=$.fontEc?we(f):we(pt),O(f);break e}else switch(l){case $e:Ce("set"+(l-$e+1).toString()+" "+f.toString()),f<=$.fontEc?we(f):we(pt),O(f);break e;case $e+1:Ce("set"+(l-$e+1).toString()+" "+f.toString()),f<=$.fontEc?we(f):we(pt),O(f);break e;case $e+2:Ce("set"+(l-$e+1).toString()+" "+f.toString()),f<=$.fontEc?we(f):we(pt),O(f);break e;case $e+3:Ce("set"+(l-$e+1).toString()+" "+f.toString()),f<=$.fontEc?we(f):we(pt),O(f);break e;case je:Ce("put"+(l-je+1).toString()+" "+f.toString()),f<=$.fontEc?we(f):we(pt),O(f);break e;case je+1:Ce("put"+(l-je+1).toString()+" "+f.toString()),f<=$.fontEc?we(f):we(pt),O(f);break e;case je+2:Ce("put"+(l-je+1).toString()+" "+f.toString()),f<=$.fontEc?we(f):we(pt),O(f);break e;case je+3:Ce("put"+(l-je+1).toString()+" "+f.toString()),f<=$.fontEc?we(f):we(pt),O(f);break e;case ss:Ce("setrule"),S();break e;case $n:Ce("putrule"),S();break e;case Pt:return da("nop"),!0;case on:return Ue("bop occurred before eop!"),_("!"),!1;case os:return Ce("eop"),re!==0&&Ue("stack not empty at end of page (level "+re.toString()+")!"),_(" "),!0;case us:if(Ce("push"),re===Kt&&(Kt=re+1,re===Ir&&Ue("deeper than claimed in postamble!"),re===Jn))return Ue("dviDecode capacity exceeded (stack size="+Jn.toString()+")"),_("!"),!1;aa[re]=ue,ia[re]=de,sa[re]=vt,oa[re]=Wt,ua[re]=qt,la[re]=Vt,fa[re]=De,ca[re]=tt,re++,sn=re-1,T();break e;case ls:Ce("pop"),re===0?Ue("(illegal at level zero)!"):(re--,De=fa[re],tt=ca[re],ue=aa[re],de=ia[re],vt=sa[re],Wt=oa[re],qt=ua[re],Vt=la[re]),sn=re,T();break e;case gt:case gt+1:case gt+2:case gt+3:Kn("right"+(l-gt+1).toString(),f),d=f,F(d);break e;case ea:case Et:case Et+1:case Et+2:case Et+3:vt=f,Kn("w"+(l-ea).toString(),f),d=f,F(d);break e;case ta:case Lt:case Lt+1:case Lt+2:case Lt+3:Wt=f,Kn("x"+(l-ta).toString(),f),d=f,F(d);break e;default:if(Gc(l,f))break e;return _("!"),!1}}}function _(l){Jt&&et(l)}function Ce(l){ma(),_(Nr.toString()+": "+l)}function da(l){_(Nr.toString()+": "+l)}function Ue(l){ma(),et(Nr.toString()+": "+l)}function Kn(l,f){if(Xt.length>Fc-2&&ma(),Xt=Xt+" ",$&&$.otfFont){let d=$.fontSpace;f>=d||f<=-4*d?De=Math.round(Me*(ue+f)):De=De+Math.round(Me*f),da(l+" "+f.toString())}}function zc(){let l,f,d;Ar=X-5,_("Postamble starts at byte "+Ar.toString()+"."),xe()!==Ut&&_("numerator doesn't match the preamble!"),xe()!==Ot&&_("denominator doesn't match the preamble!"),xe()!==ft&&ir===0&&_("magnification doesn't match the preamble!"),jt=xe(),Yt=xe(),Ir=pa(),ha=pa(),_("maxv="+jt.toString()+", maxh="+Yt.toString()+", maxstackdepth="+Ir.toString()+", totalpages="+ha.toString()),Jt&&jt+99<Zt&&_("warning: observed maxv was "+Zt.toString()),Yt+99<Qt&&_("warning: observed maxh was "+Qt.toString()),Ir<Kt&&_("warning: observed maxstackdepth was "+Kt.toString());do l=Re(),l>=Ne&&l<Ne+4&&(f=ln(l),sr.push(un(f)),_(" "),l=Pt);while(l===Pt);for(l!==ga&&_("byte "+(X-1).toString()+" is not postpost!"),xe()!==Ar&&_("bad postamble pointer in byte "+(X-4).toString()+"!"),d=Re(),d!==Dr&&_("identification in byte "+(X-1).toString()+" should be "+Dr.toString()+"!"),l=X,d=223;d===223&&X<ae.length;)d=Re();X<ae.length?Ae("signature in byte "+(X-1).toString()+" should be 223"):X<l+4&&_("not enough signature bytes at end of file ("+(X-l).toString()+")")}});var cs=oe(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});fn.decodeDviFile=void 0;var Wc=require("node:fs/promises"),qc=fs();async function Vc(l,f,d,b,y,F){return new Promise(async(O,S)=>{try{let T=await(0,Wc.readFile)(l);try{let x=await(0,qc.dviDecode)(T,d,b*10,f,y,F);O(x)}catch(x){S(x)}}catch(T){S(T)}})}fn.decodeDviFile=Vc});var ps=oe(fr=>{"use strict";var Xc=fr&&fr.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(fr,"__esModule",{value:!0});fr.parseSyncTex=void 0;var hs=Xc(require("node:path"));function jc(l,f,d,b){var y=65781.76*(72/d)*(100/b),F,O,S={offset:{x:0,y:0},blocks:[]};if(l===null)return S;var T=l.split(`
`);let x=/Input:([0-9]+):(.+)/,C=/(X|Y) Offset:([0-9]+)/,w=/\{([0-9]+)$/,j=/\}([0-9]+)$/,Y=/\(([0-9]+),([0-9]+):(-?[0-9]+),(-?[0-9]+):(-?[0-9]+),(-?[0-9]+),(-?[0-9]+)/,U=/(.)([0-9]+),([0-9]+):(-?[0-9]+),(-?[0-9]+)(:?-?([0-9]+))?/;for(var R,H=1;H<T.length;H++){var Z=T[H];if(R=Z.match(x),R){hs.default.normalize(R[2])===hs.default.normalize(f)&&(O=parseInt(R[1]));continue}if(R=Z.match(C),R){let Q=R[1].toLowerCase(),le=Math.round(parseInt(R[2])/y);switch(Q){case"x":{S.offset.x=le;break}case"y":{S.offset.y=le;break}}continue}if(R=Z.match(w),R){F=parseInt(R[1]);continue}if(R=Z.match(j),R){F=void 0;continue}if(R=Z.match(Y),R&&F){if(O===parseInt(R[1])){let Q=parseInt(R[2]),le={type:"h",page:F,lineNumber:Q,left:Math.round(parseInt(R[3])/y),bottom:Math.round(parseInt(R[4])/y),width:Math.round(parseInt(R[5])/y),height:Math.round(parseInt(R[6])/y),depth:Math.round(parseInt(R[7])/y)};Q&&le.width!==0&&le.height!==0&&S.blocks.push(le)}continue}if(R=Z.match(U),R&&F){if(O===parseInt(R[2])){var ve=R[1];if(ve==="g"){let Q=parseInt(R[3]),le={type:"g",page:F,lineNumber:Q,left:Math.round(parseInt(R[4])/y),bottom:Math.round(parseInt(R[5])/y),width:R[7]?Math.round(parseInt(R[7])/y)/y:0,height:R[6]?Math.round(parseInt(R[6])/y):0,depth:0};Q&&S.blocks.push(le)}}continue}}return S}fr.parseSyncTex=jc});var ds=oe(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});cn.getGlyphPaths=void 0;function Yc(l,f,d){let b=[];return l.pageFonts.forEach(y=>{let F=f[y.fontNum];F&&y.glyphs.forEach(O=>{let S=F.glyphs.get(O.glyphIndex);S&&O.glyphSizes.forEach(T=>{let x=S.getBoundingBox(),C=T.sz/(F.unitsPerEm||1e3),w=Math.floor((S.leftSideBearing||0)*C),j=Math.ceil(x.y2*C),Y=d.find(({fontNum:U,glyphIndex:R,size:H})=>{U===y.fontNum&&R===O.glyphIndex&&T.sz});if(!Y){let R=S.getPath(-w,j,T.sz,{features:{hinting:!0}},F).toPathData(2);R.length>0&&(Y={fontNum:y.fontNum,glyphIndex:O.glyphIndex,size:T.sz,path:R,width:Math.ceil(x.x2*C)-Math.floor(x.x1*C),height:Math.ceil(x.y2*C)-Math.floor(x.y1*C)},d.push(Y))}Y&&T.glyphPlacements.forEach(U=>{b.push({glyphPath:Y,x:U.x+w,y:U.y-j})})})})}),{pageGlyphs:b,glyphPaths:d}}cn.getGlyphPaths=Yc});var hn=oe((dp,vs)=>{function Zc(l){var f=typeof l;return l!=null&&(f=="object"||f=="function")}vs.exports=Zc});var ms=oe((vp,gs)=>{var Qc=typeof global=="object"&&global&&global.Object===Object&&global;gs.exports=Qc});var ya=oe((gp,ys)=>{var Kc=ms(),Jc=typeof self=="object"&&self&&self.Object===Object&&self,$c=Kc||Jc||Function("return this")();ys.exports=$c});var xs=oe((mp,bs)=>{var eh=ya(),th=function(){return eh.Date.now()};bs.exports=th});var Ts=oe((yp,Ss)=>{var rh=/\s/;function nh(l){for(var f=l.length;f--&&rh.test(l.charAt(f)););return f}Ss.exports=nh});var Fs=oe((bp,ks)=>{var ah=Ts(),ih=/^\s+/;function sh(l){return l&&l.slice(0,ah(l)+1).replace(ih,"")}ks.exports=sh});var ba=oe((xp,ws)=>{var oh=ya(),uh=oh.Symbol;ws.exports=uh});var Ps=oe((Sp,Os)=>{var Cs=ba(),Us=Object.prototype,lh=Us.hasOwnProperty,fh=Us.toString,_r=Cs?Cs.toStringTag:void 0;function ch(l){var f=lh.call(l,_r),d=l[_r];try{l[_r]=void 0;var b=!0}catch{}var y=fh.call(l);return b&&(f?l[_r]=d:delete l[_r]),y}Os.exports=ch});var Ls=oe((Tp,Es)=>{var hh=Object.prototype,ph=hh.toString;function dh(l){return ph.call(l)}Es.exports=dh});var Is=oe((kp,Ms)=>{var Ds=ba(),vh=Ps(),gh=Ls(),mh="[object Null]",yh="[object Undefined]",Rs=Ds?Ds.toStringTag:void 0;function bh(l){return l==null?l===void 0?yh:mh:Rs&&Rs in Object(l)?vh(l):gh(l)}Ms.exports=bh});var Bs=oe((Fp,As)=>{function xh(l){return l!=null&&typeof l=="object"}As.exports=xh});var _s=oe((wp,Ns)=>{var Sh=Is(),Th=Bs(),kh="[object Symbol]";function Fh(l){return typeof l=="symbol"||Th(l)&&Sh(l)==kh}Ns.exports=Fh});var Ws=oe((Cp,zs)=>{var wh=Fs(),Gs=hn(),Ch=_s(),Hs=0/0,Uh=/^[-+]0x[0-9a-f]+$/i,Oh=/^0b[01]+$/i,Ph=/^0o[0-7]+$/i,Eh=parseInt;function Lh(l){if(typeof l=="number")return l;if(Ch(l))return Hs;if(Gs(l)){var f=typeof l.valueOf=="function"?l.valueOf():l;l=Gs(f)?f+"":f}if(typeof l!="string")return l===0?l:+l;l=wh(l);var d=Oh.test(l);return d||Ph.test(l)?Eh(l.slice(2),d?2:8):Uh.test(l)?Hs:+l}zs.exports=Lh});var Xs=oe((Up,Vs)=>{var Dh=hn(),xa=xs(),qs=Ws(),Rh="Expected a function",Mh=Math.max,Ih=Math.min;function Ah(l,f,d){var b,y,F,O,S,T,x=0,C=!1,w=!1,j=!0;if(typeof l!="function")throw new TypeError(Rh);f=qs(f)||0,Dh(d)&&(C=!!d.leading,w="maxWait"in d,F=w?Mh(qs(d.maxWait)||0,f):F,j="trailing"in d?!!d.trailing:j);function Y(ne){var ee=b,me=y;return b=y=void 0,x=ne,O=l.apply(me,ee),O}function U(ne){return x=ne,S=setTimeout(Z,f),C?Y(ne):O}function R(ne){var ee=ne-T,me=ne-x,Ge=f-ee;return w?Ih(Ge,F-me):Ge}function H(ne){var ee=ne-T,me=ne-x;return T===void 0||ee>=f||ee<0||w&&me>=F}function Z(){var ne=xa();if(H(ne))return ve(ne);S=setTimeout(Z,R(ne))}function ve(ne){return S=void 0,j&&b?Y(ne):(b=y=void 0,O)}function Q(){S!==void 0&&clearTimeout(S),x=0,b=T=y=S=void 0}function le(){return S===void 0?O:ve(xa())}function _e(){var ne=xa(),ee=H(ne);if(b=arguments,y=this,T=ne,ee){if(S===void 0)return U(T);if(w)return clearTimeout(S),S=setTimeout(Z,f),Y(T)}return S===void 0&&(S=setTimeout(Z,f)),O}return _e.cancel=Q,_e.flush=le,_e}Vs.exports=Ah});var Ys=oe((Op,js)=>{var Bh=Xs(),Nh=hn(),_h="Expected a function";function Gh(l,f,d){var b=!0,y=!0;if(typeof l!="function")throw new TypeError(_h);return Nh(d)&&(b="leading"in d?!!d.leading:b,y="trailing"in d?!!d.trailing:y),Bh(l,f,{leading:b,maxWait:f,trailing:y})}js.exports=Gh});var Js=oe(qe=>{"use strict";var Hh=qe&&qe.__createBinding||(Object.create?function(l,f,d,b){b===void 0&&(b=d);var y=Object.getOwnPropertyDescriptor(f,d);(!y||("get"in y?!f.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return f[d]}}),Object.defineProperty(l,b,y)}:function(l,f,d,b){b===void 0&&(b=d),l[b]=f[d]}),zh=qe&&qe.__setModuleDefault||(Object.create?function(l,f){Object.defineProperty(l,"default",{enumerable:!0,value:f})}:function(l,f){l.default=f}),Ks=qe&&qe.__importStar||function(l){if(l&&l.__esModule)return l;var f={};if(l!=null)for(var d in l)d!=="default"&&Object.prototype.hasOwnProperty.call(l,d)&&Hh(f,l,d);return zh(f,l),f},pn=qe&&qe.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(qe,"__esModule",{value:!0});qe.getWebviewOptions=qe.DocumentPanel=void 0;var Ze=Ks(require("vscode")),cr=pn(require("node:path")),$t=Ks(require("node:fs")),Zs=pn(require("node:fs/promises")),Wh=pn(require("util")),qh=cs(),Vh=ps(),Xh=Xn(),jh=ds(),Yh=pn(Ys()),Qs=new Map([["A3",{pageWidth:297,pageHeight:420}],["A4",{pageWidth:210,pageHeight:297}],["A5",{pageWidth:148,pageHeight:210}],["US Letter",{pageWidth:216,pageHeight:279}],["US Legal",{pageWidth:216,pageHeight:356}]]),It=.039370079,fe=class{_resetPrivateVars(){this._synctex=void 0,this._synctexBlocksYSorted=void 0,this._documentSource={},this._documentFonts=[],this._documentGlyphs=[],this._renderPages=[],this._renderedPages=[],this._renderingPage=[],this._webviewScrollYPos=0,this._currentPageNo=1,this._scrollLock=!1}static createOrShow(f,d,b,y,F,O,S,T,x,C,w){if(fe.currentPanel){fe.currentPanel._panel.reveal(Ze.ViewColumn.Beside),fe.currentPanel.pageBufferSize=T,fe.currentPanel.pageGap=x,fe.currentPanel.debugMode=C,fe.currentPanel.dpi=F,fe.currentPanel.mag=S,fe.currentPanel.marginPixels=Math.floor(F*(S/100)),fe.currentPanel._setPageDimensions();return}let j=Ze.window.createWebviewPanel(fe.viewType,"LaTeX Preview",Ze.ViewColumn.Beside,Sa(f));fe.currentPanel=new fe(j,f,d,b,y,F,O,S,T,x,C,w)}constructor(f,d,b,y,F,O,S,T,x,C,w,j){this._disposables=[],this.scrollDocument=(0,Yh.default)(U=>{if(this._scrollLock){this._scrollLock=!1;return}if(U<=1){this._panel.webview.postMessage({type:"scroll",value:{vpos:0}});return}let R=this._synctex?.offset.x||this.dpi,H=this._synctex?.offset.y||this.dpi,Z=Number.MAX_SAFE_INTEGER,ve=0,Q=0,le=0,_e=0,ne=this._synctex?.blocks.filter(({type:ee,lineNumber:me})=>ee==="h"&&me===U);if(ne&&ne.length>0){let ee,me;ne.forEach(ye=>{let Qe=ye.width;if(ye.height>0&&Qe>0){ye.left<Z&&(Z=ye.left,ee=ye),Q!==ye.page-1&&(Q=ye.page-1),_e=Q*(this.pageHeightPixels+this.pageGap);let pr=H+_e+ye.bottom;pr>ve&&(ve=pr,me=ye)}});let Ge=me?.left===ee?.left?me:ee;if(Ge){let ye=H+_e+(Ge.bottom-Ge.height);le=Math.floor(ye/(this.pageHeightPixels+this.pageGap)),this._renderPagesFrom(le,this._getScrollDirection(ye)),this._panel.webview.postMessage({type:"scroll",value:{vPos:ye}})}}else{let ee=this._synctex?.blocks.filter(({type:me,lineNumber:Ge})=>me==="g"&&Ge===U);if(ee&&ee.length>0){let me=ee[1];if(me){Q!==me.page-1&&(Q=me.page-1),_e=Q*(this.pageHeightPixels+this.pageGap);let Ge=H+_e+(me.bottom-15);le=Math.floor(Ge/(this.pageHeightPixels+this.pageGap)),this._renderPagesFrom(le,this._getScrollDirection(Ge)),this._panel.webview.postMessage({type:"scroll",value:{vPos:Ge}})}}}},50),this._panel=f,this.editor=b,this._extensionUri=d,this._previewStatusBarItem=Ze.window.createStatusBarItem(Ze.StatusBarAlignment.Right,100),this._fontMap=y,this._fontCachePath=F,this.pageBufferSize=x,this.pageGap=C,this.debugMode=w,this.dpi=O,this.mag=T,this.pageSize=S,this.marginPixels=Math.floor(O*(T/100));let Y=Qs.get(S);Y?(this.pageWidthPixels=Math.floor(Y.pageWidth*It*O*(T/100)),this.pageHeightPixels=Math.floor(Y.pageHeight*It*O*(T/100))):(this.pageWidthPixels=Math.floor(210*It*O*(T/100)),this.pageHeightPixels=Math.floor(297*It*O*(T/100))),this._synctex=void 0,this._synctexBlocksYSorted=void 0,this._documentSource={},this._documentFonts=[],this._glyphPaths=[],this._documentGlyphs=[],this._renderPages=[],this._renderedPages=[],this._renderingPage=[],this._webviewScrollYPos=0,this._currentPageNo=1,this._scrollLock=!1,this._outputChannel=j,this._outputChannel.show(!0),this._update(),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._panel.onDidChangeViewState(U=>{U.webviewPanel.active?this._previewStatusBarItem.show():this._previewStatusBarItem.hide()},null,this._disposables),this._panel.webview.onDidReceiveMessage(U=>{switch(U.command){case"webviewScrolled":this._webviewScrolled(U.scrollY);return;case"pageRendered":this._renderedPages.push(U.pageIndex),this._renderingPage[U.pageIndex]=!1;let R=this._renderPages.pop();R&&this._renderPage(R);return}},null,this._disposables)}_updateStatus(){this._previewStatusBarItem.text=`Page ${this._currentPageNo}/${this._documentSource.pages.length} Size: ${this.pageSize} Mag: ${this.mag}% DPI: ${this.dpi}`}pageSizeChanged(){this._setPageDimensions()}magnificationChanged(){this._setPageDimensions()}_setPageDimensions(){this.marginPixels=Math.floor(this.dpi*(this.mag/100));let f=Qs.get(this.pageSize);f?(this.pageWidthPixels=Math.floor(f.pageWidth*It*this.dpi*(this.mag/100)),this.pageHeightPixels=Math.floor(f.pageHeight*It*this.dpi*(this.mag/100))):(this.pageWidthPixels=Math.floor(210*It*this.dpi*(this.mag/100)),this.pageHeightPixels=Math.floor(297*It*this.dpi*(this.mag/100)))}async generateDocument(f){this._outputChannel.clear(),this._resetPrivateVars(),f.document.fileName!==this.editor.document.fileName&&this._resetGlyphBitmaps(),this.editor=f;let d=cr.default.dirname(this.editor.document.fileName),b=cr.default.extname(f.document.fileName),y=this.editor.document.fileName.replace(b,".dvi");$t.default.existsSync(y)&&$t.default.rmSync(y);try{this.debugMode&&(this._outputChannel.appendLine("Fonts found on this system:"),this._fontMap.forEach((C,w)=>{this._outputChannel.appendLine(C+"/"+w)}));let F=Wh.default.promisify(require("child_process").exec),O="dvilualatex --halt-on-error --interaction=nonstopmode --synctex=-1 "+this.editor.document.fileName;this._outputChannel.appendLine(O);let{stdout:S,stderr:T}=await F(O,{cwd:d});this.debugMode&&this._outputChannel.appendLine(S),T&&this._outputChannel.appendLine(T),this._parseSyncTexFile(y.replace(".dvi",".synctex")),this._outputChannel.appendLine("Decoding dvi file "+y+" ...");let x=await(0,qh.decodeDviFile)(y,this._fontMap,this.dpi,this.mag,this.debugMode,this._outputChannel.appendLine);this._documentSource=JSON.parse(x),this._outputChannel.appendLine("Loading fonts ..."),await this._loadFonts(),this._outputChannel.appendLine("Rendering preview..."),this._update(),this._panel.webview.options=Sa(this._extensionUri),this._initCanvas();for(let C=0;C<this._documentSource.pages.length;C++)this._renderingPage.push(!1);this._renderPagesFrom(0,1),this._updateStatus()}catch(F){F.stdout&&this._outputChannel.appendLine(F.stdout.toString()),this._outputChannel.appendLine(String(F)),this._outputChannel.appendLine("Could not generate dvi file - review the log for errors."),this.dispose()}}async _loadFonts(){let f=this._documentSource?.fonts?.map(async d=>{try{let b=cr.default.join(d.fontPath,d.fontName),y=cr.default.join(this._fontCachePath,d.fontName);await Zs.default.copyFile(b,y,$t.constants.COPYFILE_EXCL)}catch(b){b.code!=="EEXIST"&&this._outputChannel.appendLine(String(b))}try{let b=await(0,Xh.load)(this._fontCachePath+"/"+d.fontName);this._documentFonts[d.fontNum]=b}catch(b){this._outputChannel.appendLine(String(b))}});return Promise.all(f)}_parseSyncTexFile(f){if($t.default.existsSync(f)){this._outputChannel.appendLine("Parsing synctex file "+f+" ...");let d=$t.default.readFileSync(f,{encoding:"utf8"});if(d&&this.editor.document.fileName)try{let b=(0,Vh.parseSyncTex)(d,this.editor.document.fileName,this.dpi,this.mag);this._synctex=b,this._synctex?.blocks.sort(({lineNumber:y},{lineNumber:F})=>y-F),this._synctexBlocksYSorted=[...this._synctex?.blocks].sort(({page:y,bottom:F},{page:O,bottom:S})=>y*(this.pageHeightPixels+this.pageGap)+F-(O*(this.pageHeightPixels+this.pageGap)+S))}catch(b){this._outputChannel.appendLine(String(b))}}else this._outputChannel.appendLine("WARNING: No synctex file found. Scroll synchronization will be unavailable.")}_initCanvas(){this._panel.webview.postMessage({type:"initCanvas",value:{pageCount:this._documentSource.pages.length,marginPixels:this.marginPixels,pageWidth:this.pageWidthPixels,pageHeight:this.pageHeightPixels,pageGap:this.pageGap}})}_resetGlyphBitmaps(){this._panel.webview.postMessage({type:"resetGlyphBitmaps",value:{}})}_renderPagesFrom(f,d){let b=this.pageBufferSize,y;do y=f+b*d,!this._renderPages.includes(y)&&this._renderingPage[y]===!1&&!this._renderedPages.includes(y)&&this._renderPages.push(y),b--;while(b>0);this._renderingPage[f]===!1&&!this._renderedPages.includes(f)?this._renderPage(f):(y=this._renderPages.pop(),y&&this._renderPage(y))}_renderPage(f){if(f>=0&&f<this._documentSource.pages.length&&this._renderingPage[f]===!1&&!this._renderedPages.includes(f))try{this._renderingPage[f]=!0;let d=(0,jh.getGlyphPaths)(this._documentSource.pages[f],this._documentFonts,this._glyphPaths);this._glyphPaths=d.glyphPaths,this._documentGlyphs[f]=d.pageGlyphs,this._panel.webview.postMessage({type:"renderPage",value:{pageIndex:f,pageSource:this._documentSource.pages[f],pageGlyphs:this._documentGlyphs[f]}})}catch(d){this._outputChannel.appendLine(String(d)),this._renderingPage[f]=!1}}_getScrollDirection(f){return this._webviewScrollYPos<f?1:this._webviewScrollYPos>f?-1:0}_webviewScrolled(f){if(f===this._webviewScrollYPos)return;let d=Math.floor(f/(this.pageHeightPixels+this.pageGap));this._currentPageNo=d+1,this._updateStatus(),this._renderPagesFrom(d,this._getScrollDirection(f));let b=this._lineFromScrollPos(f);if(b){let y=this._toRevealRange(b,this.editor);this._scrollLock=!0,this.editor.revealRange(y,Ze.TextEditorRevealType.AtTop)}this._webviewScrollYPos=f}_lineFromScrollPos(f){let d=this._synctex?.offset.y||this.dpi,b=Math.floor(f/(this.pageHeightPixels+this.pageGap)),y=b*(this.pageHeightPixels+this.pageGap),F=f-(y+d),O;if(this._synctexBlocksYSorted){do O=this._synctexBlocksYSorted.findIndex(({page:S,bottom:T})=>S===b+1&&T===F),F--;while(O===-1&&F>=0);if(O>=0)return this._synctexBlocksYSorted[O].lineNumber}}_toRevealRange(f,d){return f>=d.document.lineCount?new Ze.Range(d.document.lineCount-1,0,d.document.lineCount-1,0):new Ze.Range(f,0,f+1,0)}getTopmostLine(f){return f.visibleRanges.length?f.visibleRanges[0].start.line+1:void 0}dispose(){for(fe.currentPanel=void 0,this._panel.dispose();this._disposables.length;){let f=this._disposables.pop();f&&f.dispose()}}_update(){let f=this._panel.webview;f.html=this._getHtmlForWebview(f)}_getHtmlForWebview(f){let d=Ze.Uri.joinPath(this._extensionUri,"out","webviewFunctions.js"),b=f.asWebviewUri(d),y=Ze.Uri.joinPath(this._extensionUri,"out","reset.css"),F=Ze.Uri.joinPath(this._extensionUri,"out","vscode.css"),O=fe.documentPathUri?f.asWebviewUri(fe.documentPathUri):"",S=f.asWebviewUri(y),T=f.asWebviewUri(F),x=Zh(),C=`const documentPath = '${O}';`;return`<!DOCTYPE html>
			<html lang="en">
			<head>
				<meta charset="UTF-8">
				<!--
					Use a content security policy to only allow loading images from https or from our extension directory,
					and only allow scripts that have a specific nonce.
				-->
				<meta http-equiv="Content-Security-Policy" content="default-src 'none'; connect-src ${f.cspSource}; style-src ${f.cspSource}; img-src ${f.cspSource} https:; script-src 'nonce-${x}'">
				<meta name="viewport" content="width=device-width, initial-scale=1.0">				
				<link href="${S}" rel="stylesheet">
				<link href="${T}" rel="stylesheet">			
				<title>LaTeX Preview</title>
			</head>
			<body>
				<div class="menu" data-vscode-context='{"webviewSection": "menu", "preventDefaultContextMenuItems": true}'>
				<canvas id="cnv" height="10000" width="780"></canvas>
				</div>
				<script nonce="${x}">${C}</script>
				<script nonce="${x}" src="${b}"></script>
			</body>
			</html>`}async exportDocument(){this._outputChannel.clear(),this._outputChannel.show();let f=this.editor.document.fileName,d=cr.default.dirname(f),b=cr.default.extname(f),y=f.replace(b,".json");$t.default.existsSync(y)&&$t.default.rmSync(y);try{let F=JSON.stringify(this._documentSource,null,4);Zs.default.writeFile(y,F);let O=Ze.Uri.file(y);this._outputChannel.appendLine("Document JSON written to "+O)}catch(F){this._outputChannel.appendLine(String(F)),this._outputChannel.appendLine("Failed to write JSON file.")}}};qe.DocumentPanel=fe;fe.viewType="latexPreview";function Sa(l){let f=[Ze.Uri.joinPath(l,"out")];return fe&&fe.documentPathUri&&f.push(fe.documentPathUri),{enableScripts:!0,localResourceRoots:f}}qe.getWebviewOptions=Sa;function Zh(){let l="",f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let d=0;d<32;d++)l+=f.charAt(Math.floor(Math.random()*f.length));return l}});var to=oe(rt=>{"use strict";var Qh=rt&&rt.__createBinding||(Object.create?function(l,f,d,b){b===void 0&&(b=d);var y=Object.getOwnPropertyDescriptor(f,d);(!y||("get"in y?!f.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return f[d]}}),Object.defineProperty(l,b,y)}:function(l,f,d,b){b===void 0&&(b=d),l[b]=f[d]}),Kh=rt&&rt.__setModuleDefault||(Object.create?function(l,f){Object.defineProperty(l,"default",{enumerable:!0,value:f})}:function(l,f){l.default=f}),Jh=rt&&rt.__importStar||function(l){if(l&&l.__esModule)return l;var f={};if(l!=null)for(var d in l)d!=="default"&&Object.prototype.hasOwnProperty.call(l,d)&&Qh(f,l,d);return Kh(f,l),f},Ta=rt&&rt.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(rt,"__esModule",{value:!0});rt.generatePdf=void 0;var $h=Jh(require("vscode")),$s=Ta(require("node:path")),eo=Ta(require("node:fs")),ep=Ta(require("util"));async function tp(l,f){f.clear(),f.show();let d=$s.default.dirname(l),b=$s.default.extname(l),y=l.replace(b,".pdf");eo.default.existsSync(y)&&eo.default.rmSync(y);try{let F=ep.default.promisify(require("child_process").exec),O="lualatex --halt-on-error --interaction=nonstopmode "+l;f.appendLine(O);let{stdout:S,stderr:T}=await F(O,{cwd:d});f.appendLine(S),T&&f.appendLine(T),f.appendLine("Done.");let x=$h.Uri.file(y);f.appendLine("PDF written to "+x)}catch(F){F.stdout&&f.appendLine(F.stdout.toString()),f.appendLine(String(F)),f.appendLine("Could not generate pdf file - review the log for errors.")}}rt.generatePdf=tp});var rp=exports&&exports.__createBinding||(Object.create?function(l,f,d,b){b===void 0&&(b=d);var y=Object.getOwnPropertyDescriptor(f,d);(!y||("get"in y?!f.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return f[d]}}),Object.defineProperty(l,b,y)}:function(l,f,d,b){b===void 0&&(b=d),l[b]=f[d]}),np=exports&&exports.__setModuleDefault||(Object.create?function(l,f){Object.defineProperty(l,"default",{enumerable:!0,value:f})}:function(l,f){l.default=f}),ap=exports&&exports.__importStar||function(l){if(l&&l.__esModule)return l;var f={};if(l!=null)for(var d in l)d!=="default"&&Object.prototype.hasOwnProperty.call(l,d)&&rp(f,l,d);return np(f,l),f},ka=exports&&exports.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(exports,"__esModule",{value:!0});var ce=ap(require("vscode")),dn=ka(require("node:fs")),ip=ka(ts()),hr=ka(require("node:path")),K=Js(),sp=to(),op=["A5","A4","A3","US Letter","US Legal"],vn;module.exports.activate=async l=>{if(ce.window.activeTextEditor?.document?.fileName){let f=ce.window.activeTextEditor,d=hr.default.extname(f.document.fileName);if(d===".tex"||d===".latex"){let y=ce.workspace.getConfiguration("latexPreview")?.get("latexFontDir")??"",F=await(0,ip.default)({additionalFolders:[y],extensions:["ttf","otf"]}),O=new Map;F?.forEach(C=>{O.set(hr.default.basename(C),hr.default.dirname(C))}),vn=ce.window.createOutputChannel("LaTeX Preview");let S=hr.default.join(l.extensionUri.fsPath,"font-cache");dn.default.existsSync(S)||dn.default.mkdirSync(S);let T=f.document.fileName.replace(d,".log");if(dn.default.existsSync(T)){let C=dn.default.readFileSync(T,"utf8");if(C){let w=C.indexOf("Lua module: luaotfload");if(w>-1){let j=C.substring(w,w+39),Y=j.substring(j.length-5,j.length);Number.parseFloat(Y)<3.23&&ce.window.showWarningMessage("luaotfload package older than v3.23 detected. Fonts may not be loaded correctly.")}}}let x=ce.commands.registerCommand("latex-preview.preview",()=>{let C=ce.window.activeTextEditor;if(C){K.DocumentPanel.documentPathUri=ce.Uri.file(hr.default.dirname(C.document.fileName));let w=ce.workspace.getConfiguration("latexPreview"),j=w?.get("dpi")??96,Y=w?.get("pageSize")??"A4",U=w?.get("mag")??100,R=w?.get("debugMode")??!1,H=w?.get("pageBufferSize")??2,Z=w?.get("pageGap")??0;K.DocumentPanel.createOrShow(l.extensionUri,C,O,S,j,Y,U,H,Z,R,vn),K.DocumentPanel.currentPanel&&K.DocumentPanel.currentPanel.generateDocument(C)}});l.subscriptions.push(x),x=ce.commands.registerCommand("latex-preview.generatePdf",()=>{if(ce.window.activeTextEditor?.document?.fileName){let C=ce.window.activeTextEditor,w=hr.default.extname(C.document.fileName);(w===".tex"||w===".latex")&&(0,sp.generatePdf)(C.document.fileName,vn)}}),l.subscriptions.push(x),x=ce.window.onDidChangeTextEditorVisibleRanges(C=>{if(C.textEditor?.document?.fileName===K.DocumentPanel.currentPanel?.editor?.document?.fileName){let w=K.DocumentPanel.currentPanel.getTopmostLine(C.textEditor);w&&K.DocumentPanel.currentPanel.scrollDocument(w)}}),l.subscriptions.push(x),x=ce.workspace.onDidSaveTextDocument(async C=>{ce.window.activeTextEditor&&C.fileName===K.DocumentPanel.currentPanel?.editor?.document?.fileName&&K.DocumentPanel.currentPanel.generateDocument(ce.window.activeTextEditor)}),l.subscriptions.push(x),x=ce.commands.registerCommand("latex-preview.setPageSize",async()=>{if(K.DocumentPanel.currentPanel?.editor){let C=await ce.window.showQuickPick(op,{title:"Select a page size...",placeHolder:K.DocumentPanel.currentPanel.pageSize,ignoreFocusOut:!0,canPickMany:!1});C&&(K.DocumentPanel.currentPanel.pageSize=C,K.DocumentPanel.currentPanel.pageSizeChanged(),K.DocumentPanel.currentPanel.generateDocument(K.DocumentPanel.currentPanel.editor))}}),l.subscriptions.push(x),x=ce.commands.registerCommand("latex-preview.magIncrease",()=>{K.DocumentPanel.currentPanel?.editor&&(K.DocumentPanel.currentPanel.mag+=10,K.DocumentPanel.currentPanel.magnificationChanged(),K.DocumentPanel.currentPanel.generateDocument(K.DocumentPanel.currentPanel.editor))}),l.subscriptions.push(x),x=ce.commands.registerCommand("latex-preview.magDecrease",()=>{K.DocumentPanel.currentPanel?.editor&&(K.DocumentPanel.currentPanel.mag-=10,K.DocumentPanel.currentPanel.magnificationChanged(),K.DocumentPanel.currentPanel.generateDocument(K.DocumentPanel.currentPanel.editor))}),l.subscriptions.push(x),x=ce.commands.registerCommand("latex-preview.setMagnification",async()=>{if(K.DocumentPanel.currentPanel?.editor){let C=await ce.window.showInputBox({title:"Enter magnification value (%)...",validateInput:w=>{let j=parseInt(w);if(Number.isNaN(j)||j<50||j>200)return"Enter a integer value between 50 an 200"},placeHolder:K.DocumentPanel.currentPanel.mag.toString(),ignoreFocusOut:!0});C&&(K.DocumentPanel.currentPanel.mag=parseInt(C),K.DocumentPanel.currentPanel.magnificationChanged(),K.DocumentPanel.currentPanel.generateDocument(K.DocumentPanel.currentPanel.editor))}}),l.subscriptions.push(x),x=ce.commands.registerCommand("latex-preview.exportDocument",()=>{K.DocumentPanel.currentPanel?.editor&&K.DocumentPanel.currentPanel.exportDocument()}),l.subscriptions.push(x)}}};module.exports.deactivate=()=>{vn.dispose()};
/*! Bundled license information:

opentype.js/dist/opentype.js:
  (*! https://mths.be/codepointat v0.2.0 by @mathias *)
*/
